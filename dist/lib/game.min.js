!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PIXI")):"function"==typeof define&&define.amd?define("typescript_intro",["PIXI"],e):"object"==typeof exports?exports.typescript_intro=e(require("PIXI")):t.typescript_intro=e(t.PIXI)}(window,function(r){return n=[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.GameManager=void 0,o(r(1))),a=r(7),u=r(8),l=r(10),h=r(11),c=r(12),f=r(19),d=r(21),p=r(22),m=r(24),_=(v.prototype.onLoadComplete=function(){var t=this;this.audio=new p.Audio,this.background=new d.Background,this.keyDisplay=new m.keyDisplay,this.dummyServer=new a.DummyServer,this.reelManager=new u.ReelManager,this.droppedItemManager=new f.DroppedItemManager,this.playButton=new l.Button(!0,["spinButton","stopButton"],650,510,1),this.musicButton=new l.Button(!0,["musicButton"],750,50,.1),this.winMessage=new h.WinMessage,this.winAnimation=new c.WinAnimation(this.reelManager.getReelArray(),this.droppedItemManager.getDroppedItemArray()),this.playButton.button.on("pointertap",function(){t.playButton.toggleButton()?(t.playButton.changeTexture(1),t.reelManager.startAll(),t.winAnimation.resetIconAnimation(),t.audio.toggleWinSoundEffect(!1),t.audio.toggleSpinSoundEffect(!0)):(t.playButton.changeTexture(0),t.newTicket=t.dummyServer.getTicket(),t.reelManager.stopAll(t.newTicket),t.audio.toggleSpinSoundEffect(!1),t.winMessage.checkWin(t.newTicket)&&(t.winAnimation.playWinAnimation(),t.audio.toggleWinSoundEffect(!0)))}),this.musicButton.button.on("pointertap",function(){t.musicButton.toggleButton()?t.audio.toggleMusicEffect(!0):t.audio.toggleMusicEffect(!1)})},v);function v(){v.app=new s.Application({width:800,height:600,backgroundColor:1087931}),document.body.appendChild(v.app.view),s.Loader.shared.add("bow","assets/bow.png"),s.Loader.shared.add("armor","assets/armor.png"),s.Loader.shared.add("coin","assets/coin.png"),s.Loader.shared.add("tome","assets/tome.png"),s.Loader.shared.add("tools","assets/tools.png"),s.Loader.shared.add("gemRed","assets/gemRed.png"),s.Loader.shared.add("slotWindow","assets/slotWindow.png"),s.Loader.shared.add("panel","assets/panel.png"),s.Loader.shared.add("spinButton","assets/spinButton.png"),s.Loader.shared.add("stopButton","assets/stopButton.png"),s.Loader.shared.add("musicButton","assets/musicButton.png"),s.Loader.shared.onComplete.add(this.onLoadComplete.bind(this)),s.Loader.shared.load()}e.GameManager=_,window.onload=function(){new _}},function(t,e){t.exports=r},function(t,e,r){"use strict";var w=r(13),A=r(15);function b(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=i,e.resolve=function(t,e){return i(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},e.format=function(t){A.isString(t)&&(t=i(t));return t instanceof b?t.format():b.prototype.format.call(t)},e.Url=b;var C=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,S=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,e=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),E=["'"].concat(e),O=["%","/","?",";","#"].concat(E),P=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,I=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},F={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},L=r(16);function i(t,e,r){if(t&&A.isObject(t)&&t instanceof b)return t;var n=new b;return n.parse(t,e,r),n}b.prototype.parse=function(t,e,r){if(!A.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),n=-1!==n&&n<t.indexOf("#")?"?":"#",i=t.split(n);i[0]=i[0].replace(/\\/g,"/");var o=(o=t=i.join(n)).trim();if(!r&&1===t.split("#").length){i=S.exec(o);if(i)return this.path=o,this.href=o,this.pathname=i[1],i[2]?(this.search=i[2],this.query=e?L.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var s,n=C.exec(o);if(n&&(s=(n=n[0]).toLowerCase(),this.protocol=s,o=o.substr(n.length)),!(r||n||o.match(/^\/\/[^@\/]+@[^@\/]+/))||!(x="//"===o.substr(0,2))||n&&F[n]||(o=o.substr(2),this.slashes=!0),!F[n]&&(x||n&&!D[n])){for(var a=-1,u=0;u<P.length;u++)-1!==(l=o.indexOf(P[u]))&&(-1===a||l<a)&&(a=l);-1!==(t=-1===a?o.lastIndexOf("@"):o.lastIndexOf("@",a))&&(i=o.slice(0,t),o=o.slice(t+1),this.auth=decodeURIComponent(i));for(var l,a=-1,u=0;u<O.length;u++)-1!==(l=o.indexOf(O[u]))&&(-1===a||l<a)&&(a=l);-1===a&&(a=o.length),this.host=o.slice(0,a),o=o.slice(a),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var h=this.hostname.split(/\./),u=0,c=h.length;u<c;u++){var f=h[u];if(f&&!f.match(M)){for(var d="",p=0,m=f.length;p<m;p++)127<f.charCodeAt(p)?d+="x":d+=f[p];if(!d.match(M)){var _=h.slice(0,u),v=h.slice(u+1),g=f.match(I);g&&(_.push(g[1]),v.unshift(g[2])),v.length&&(o="/"+v.join(".")+o),this.hostname=_.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=w.toASCII(this.hostname));var y=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+y,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!R[s])for(u=0,c=E.length;u<c;u++){var b,T=E[u];-1!==o.indexOf(T)&&((b=encodeURIComponent(T))===T&&(b=escape(T)),o=o.split(T).join(b))}n=o.indexOf("#"),-1!==n&&(this.hash=o.substr(n),o=o.slice(0,n)),t=o.indexOf("?");return-1!==t?(this.search=o.substr(t),this.query=o.substr(t+1),e&&(this.query=L.parse(this.query)),o=o.slice(0,t)):e&&(this.search="",this.query={}),o&&(this.pathname=o),D[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(y=this.pathname||"",i=this.search||"",this.path=y+i),this.href=this.format(),this},b.prototype.format=function(){var t=this.auth||"",e=(t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",i=!1,o="",t=(this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&A.isObject(this.query)&&Object.keys(this.query).length&&(o=L.stringify(this.query)),this.search||o&&"?"+o||"");return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||D[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),t&&"?"!==t.charAt(0)&&(t="?"+t),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(t=t.replace("#","%23"))+n},b.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},b.prototype.resolveObject=function(t){A.isString(t)&&((f=new b).parse(t,!1,!0),t=f);for(var e=new b,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];e[i]=this[i]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(e[a]=t[a])}return D[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!D[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var h=u[l];e[h]=t[h]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||F[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}return e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(f=e.pathname||"",d=e.search||"",e.path=f+d),e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var f=e.pathname&&"/"===e.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=d||f||e.host&&t.pathname,p=f,m=e.pathname&&e.pathname.split("/")||[],c=t.pathname&&t.pathname.split("/")||[],_=e.protocol&&!D[e.protocol];if(_&&(e.hostname="",e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),f=f&&(""===c[0]||""===m[0])),d)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,m=c;else if(c.length)(m=m||[]).pop(),m=m.concat(c),e.search=t.search,e.query=t.query;else if(!A.isNullOrUndefined(t.search))return _&&(e.hostname=e.host=m.shift(),(x=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=x.shift(),e.host=e.hostname=x.shift())),e.search=t.search,e.query=t.query,A.isNull(e.pathname)&&A.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(!m.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var v=m.slice(-1)[0],d=(e.host||t.host||1<m.length)&&("."===v||".."===v)||""===v,g=0,y=m.length;0<=y;y--)"."===(v=m[y])?m.splice(y,1):".."===v?(m.splice(y,1),g++):g&&(m.splice(y,1),g--);if(!f&&!p)for(;g--;)m.unshift("..");!f||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),d&&"/"!==m.join("/").substr(-1)&&m.push("");var x,p=""===m[0]||m[0]&&"/"===m[0].charAt(0);return _&&(e.hostname=e.host=!p&&m.length?m.shift():"",(x=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=x.shift(),e.host=e.hostname=x.shift())),(f=f||e.host&&m.length)&&!p&&m.unshift(""),m.length?e.pathname=m.join("/"):(e.pathname=null,e.path=null),A.isNull(e.pathname)&&A.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},b.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,d="~";function i(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");r=new o(r,n||t,i),n=d?d+e:e;return t._events[n]?t._events[n].fn?t._events[n]=[t._events[n],r]:t._events[n].push(r):(t._events[n]=r,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(d=!1)),a.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(d?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var t=d?d+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,n=e.length,i=new Array(n);r<n;r++)i[r]=e[r].fn;return i},a.prototype.listenerCount=function(t){t=d?d+t:t,t=this._events[t];return t?t.fn?1:t.length:0},a.prototype.emit=function(t,e,r,n,i,o){var s=d?d+t:t;if(!this._events[s])return!1;var a,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,n),!0;case 5:return u.fn.call(u.context,e,r,n,i),!0;case 6:return u.fn.call(u.context,e,r,n,i,o),!0}for(f=1,a=new Array(l-1);f<l;f++)a[f-1]=arguments[f];u.fn.apply(u.context,a)}else for(var h,c=u.length,f=0;f<c;f++)switch(u[f].once&&this.removeListener(t,u[f].fn,void 0,!0),l){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,e);break;case 3:u[f].fn.call(u[f].context,e,r);break;case 4:u[f].fn.call(u[f].context,e,r,n);break;default:if(!a)for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];u[f].fn.apply(u[f].context,a)}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,r,n){t=d?d+t:t;if(!this._events[t])return this;if(!e)return u(this,t),this;var i=this._events[t];if(i.fn)i.fn!==e||n&&!i.once||r&&i.context!==r||u(this,t);else{for(var o=0,s=[],a=i.length;o<a;o++)(i[o].fn!==e||n&&!i[o].once||r&&i[o].context!==r)&&s.push(i[o]);s.length?this._events[t]=1===s.length?s[0]:s:u(this,t)}return this},a.prototype.removeAllListeners=function(t){return t?(t=d?d+t:t,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=d,t.exports=a.EventEmitter=a},function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,i,o,s,a,u=e&&e.length,l=u?e[0]*r:t.length,h=m(t,0,l,r,!0),c=[];if(!h||h.next===h.prev)return c;if(u&&(h=function(t,e,r,n){var i,o,s,a,u=[];for(i=0,o=e.length;i<o;i++)a=e[i]*n,s=i<o-1?e[i+1]*n:t.length,(a=m(t,a,s,n,!1))===a.next&&(a.steiner=!0),u.push(function(t){var e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next,e!==t;);return r}(a));for(u.sort(_),i=0;i<u.length;i++)r=function(t,e){var r=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&s<a){if((s=a)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}}while(n=n.next,n!==e);if(!r)return null;if(i===s)return r;var u,l=r,h=r.x,c=r.y,f=1/0;n=r;for(;i>=n.x&&n.x>=h&&i!==n.x&&O(o<c?i:s,o,h,c,o<c?s:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),R(n,t)&&(u<f||u===f&&(n.x>r.x||n.x===r.x&&function(t,e){return P(t.prev,t,e.prev)<0&&P(e.next,t,t.next)<0}(r,n)))&&(r=n,f=u)),n=n.next,n!==l;);return r}(t,e);if(!r)return e;var t=F(r,t),n=C(r,r.next);return C(t,t.next),e===r?n:e}(u[i],r),r=C(r,r.next);return r}(t,e,h,r)),t.length>80*r){for(var f=n=t[0],d=i=t[1],p=r;p<l;p+=r)(o=t[p])<f&&(f=o),(s=t[p+1])<d&&(d=s),n<o&&(n=o),i<s&&(i=s);a=0!==(a=Math.max(n-f,i-d))?1/a:0}return S(h,c,r,f,d,a),c}function m(t,e,r,n,i){var o,s;if(i===0<v(t,e,r,n))for(o=e;o<r;o+=n)s=a(o,t[o],t[o+1],s);else for(o=r-n;e<=o;o-=n)s=a(o,t[o],t[o+1],s);return s&&M(s,s.next)&&(D(s),s=s.next),s}function C(t,e){if(!t)return t;e=e||t;var r,n=t;do{if(r=!1,n.steiner||!M(n,n.next)&&0!==P(n.prev,n,n.next))n=n.next;else{if(D(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function S(t,e,r,n,i,o,s){if(t){if(!s&&o){for(var a=t,u=n,l=i,h=o,c=a;null===c.z&&(c.z=E(c.x,c.y,u,l,h)),c.prevZ=c.prev,c.nextZ=c.next,(c=c.next)!==a;);c.prevZ.nextZ=null,c.prevZ=null;var f,d,p,m,_,v,g,y,x=c,b=1;do{for(d=x,_=x=null,v=0;d;){for(v++,p=d,f=g=0;f<b&&(g++,p=p.nextZ);f++);for(y=b;0<g||0<y&&p;)0!==g&&(0===y||!p||d.z<=p.z)?(d=(m=d).nextZ,g--):(p=(m=p).nextZ,y--),_?_.nextZ=m:x=m,m.prevZ=_,_=m;d=p}}while(_.nextZ=null,b*=2,1<v)}for(var T,w,A=t;t.prev!==t.next;)if(T=t.prev,w=t.next,o?function(t,e,r,n){var i=t.prev,o=t,s=t.next;if(0<=P(i,o,s))return;var a=(i.x<o.x?i.x<s.x?i:s:o.x<s.x?o:s).x,u=(i.y<o.y?i.y<s.y?i:s:o.y<s.y?o:s).y,l=(i.x>o.x?i.x>s.x?i:s:o.x>s.x?o:s).x,h=(i.y>o.y?i.y>s.y?i:s:o.y>s.y?o:s).y,c=E(a,u,e,r,n),f=E(l,h,e,r,n),d=t.prevZ,p=t.nextZ;for(;d&&d.z>=c&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&O(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=P(d.prev,d,d.next))return;if(d=d.prevZ,p!==t.prev&&p!==t.next&&O(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=P(p.prev,p,p.next))return;p=p.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&O(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=P(d.prev,d,d.next))return;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&O(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=P(p.prev,p,p.next))return;p=p.nextZ}return 1}(t,n,i,o):function(t){var e=t.prev,r=t,n=t.next;if(0<=P(e,r,n))return;var i=t.next.next;for(;i!==t.prev;){if(O(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=P(i.prev,i,i.next))return;i=i.next}return 1}(t))e.push(T.i/r),e.push(t.i/r),e.push(w.i/r),D(t),t=w.next,A=w.next;else if((t=w)===A){s?1===s?S(t=function(t,e,r){var n=t;do{var i=n.prev,o=n.next.next}while(!M(i,o)&&I(i,n,n.next,o)&&R(i,o)&&R(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),D(n),D(n.next),n=t=o),n=n.next,n!==t);return C(n)}(C(t),e,r),e,r,n,i,o,2):2===s&&function(t,e,r,n,i,o){var s=t;do{for(var a,u=s.next.next;u!==s.prev;){if(s.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&I(r,r.next,t,e))return 1}while(r=r.next,r!==t);return}(t,e)&&(R(t,e)&&R(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next,r!==t;);return n}(t,e)&&(P(t.prev,t,e.prev)||P(t,e.prev,e))||M(t,e)&&0<P(t.prev,t,t.next)&&0<P(e.prev,e,e.next))}(s,u))return a=F(s,u),s=C(s,s.next),a=C(a,a.next),S(s,e,r,n,i,o),S(a,e,r,n,i,o);u=u.next}}while(s=s.next,s!==t)}(t,e,r,n,i,o):S(C(t),e,r,n,i,o,1);break}}}function _(t,e){return t.x-e.x}function E(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function O(t,e,r,n,i,o,s,a){return 0<=(i-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(n-a)-(r-s)*(e-a)&&0<=(r-s)*(o-a)-(i-s)*(n-a)}function P(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function I(t,e,r,n){var i=l(P(t,e,r)),o=l(P(t,e,n)),s=l(P(r,n,t)),a=l(P(r,n,e));return i!==o&&s!==a||(0===i&&u(t,r,e)||(0===o&&u(t,n,e)||(0===s&&u(r,t,n)||!(0!==a||!u(r,e,n)))))}function u(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function l(t){return 0<t?1:t<0?-1:0}function R(t,e){return P(t.prev,t,t.next)<0?0<=P(t,e,t.next)&&0<=P(t,t.prev,e):P(t,e,t.prev)<0||P(t,t.next,e)<0}function F(t,e){var r=new s(t.i,t.x,t.y),n=new s(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function a(t,e,r,n){t=new s(t,e,r);return n?(t.next=n.next,(t.prev=n).next.prev=t,n.next=t):(t.prev=t).next=t,t}function D(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function s(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=n,(t.exports.default=n).deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(v(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,h=a<u-1?e[a+1]*r:t.length;s-=Math.abs(v(t,l,h,r))}for(var c=0,a=0;a<n.length;a+=3){var f=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[f]-t[p])*(t[1+d]-t[1+f])-(t[f]-t[d])*(t[1+p]-t[1+f]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);0<i&&(n+=t[i-1].length,r.holes.push(n))}return r}},function(t,e){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){t.exports=r(0)},function(t,e,r){"use strict";function n(){this.onLoadComplete()}Object.defineProperty(e,"__esModule",{value:!0}),e.DummyServer=void 0,n.prototype.onLoadComplete=function(){this.ticketArray=[{reel0:1,reel1:1,reel2:1,reel3:1,reel4:1,win:!0,score:100},{reel0:2,reel1:2,reel2:2,reel3:2,reel4:2,win:!0,score:150},{reel0:3,reel1:3,reel2:3,reel3:3,reel4:3,win:!0,score:200},{reel0:0,reel1:0,reel2:0,reel3:0,reel4:0,win:!0,score:50},{reel0:3,reel1:4,reel2:2,reel3:3,reel4:0,win:!1,score:0},{reel0:1,reel1:2,reel2:2,reel3:3,reel4:4,win:!1,score:0},{reel0:0,reel1:2,reel2:2,reel3:3,reel4:4,win:!1,score:0},{reel0:1,reel1:2,reel2:0,reel3:3,reel4:0,win:!1,score:0}]},n.prototype.getTicket=function(){return this.ticketArray[Math.floor(Math.random()*this.ticketArray.length)]},e.DummyServer=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReelManager=void 0;var n=r(9),i=r(0);function o(){this.textureArray=["tools","tome","coin","armor","bow"],this.reelArray=[new n.Reel(this.textureArray),new n.Reel(this.textureArray),new n.Reel(this.textureArray),new n.Reel(this.textureArray),new n.Reel(this.textureArray)],this.setupReel(this.reelArray)}o.prototype.stopAll=function(r){this.reelArray.map(function(t,e){t.stopReel(r["reel"+e])})},o.prototype.startAll=function(){for(var t=0;t<this.reelArray.length;t++)this.reelArray[t].startReel()},o.prototype.getReelArray=function(){return this.reelArray},o.prototype.setupReel=function(r){this.reelArray.map(function(t,e){e=i.GameManager.app.view.width/(r.length+1)*(e+1);t.setReelPos(e,200)})},e.ReelManager=o},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.Reel=void 0,o(r(1))),a=r(0);function u(t){this.textureArray=t,this.main()}u.prototype.main=function(){this.reel=new s.Container,this.reel.name="reel",a.GameManager.app.stage.addChild(this.reel),this.reel.x=a.GameManager.app.view.width/2,this.reel.y=0,this.populateReel(this.textureArray)},u.prototype.populateReel=function(t){this.newIcon=s.AnimatedSprite.fromImages(t),this.newIcon.animationSpeed=Math.random(),this.newIcon.height=150,this.newIcon.width=150,this.newIcon.anchor.set(.5),this.reel.addChild(this.newIcon)},u.prototype.startSpin=function(){this.newIcon.play()},u.prototype.stopSpin=function(t){this.newIcon.gotoAndStop(t)},u.prototype.stopReel=function(t){this.stopSpin(t)},u.prototype.startReel=function(){this.startSpin()},u.prototype.setReelPos=function(t,e){this.reel.position.set(t,e)},e.Reel=u},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0,o(r(1))),a=r(0);function u(t,e,r,n,i){this.toggle=!1,this.button=s.AnimatedSprite.fromImages(e),this.button.scale.set(i),a.GameManager.app.stage.addChild(this.button),this.button.anchor.set(.5),this.button.position.set(r,n),this.button.visible=t,this.button.interactive=!0,this.button.buttonMode=!0}u.prototype.toggleButton=function(){return this.toggle?this.toggle=!1:this.toggle=!0,this.toggle},u.prototype.changeTexture=function(t){this.button.gotoAndStop(t)},e.Button=u},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.WinMessage=void 0,o(r(1))),a=r(0);function u(){this.score=0;var t=new s.TextStyle({fontFamily:"Arial Black",fontStyle:"italic"});this.text=new s.Text("SCORE: ",t),this.setupWinText()}u.prototype.setupWinText=function(){a.GameManager.app.stage.addChild(this.text),this.text.position.set(100,100)},u.prototype.updateWin=function(t){this.score+=t,this.text.text="SCORE: "+this.score},u.prototype.checkWin=function(t){return!!t.win&&(this.updateWin(t.score),!0)},e.WinMessage=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WinAnimation=void 0;var n=r(26),i=r(25),o=r(0);function s(t,e){this.reelArray=t,this.droppedItemArray=e,this.main()}s.prototype.main=function(){this.iconTl=n.gsap.timeline({}),this.droppedItemTl=n.gsap.timeline({}),this.setupIconAnimation(),this.setupDroppedItemAnimation()},s.prototype.playWinAnimation=function(){console.log("hello"),this.iconTl.play(3),this.droppedItemTl.play(0)},s.prototype.resetIconAnimation=function(){this.iconTl.pause(0)},s.prototype.setupIconAnimation=function(){var r=this;this.reelArray.map(function(t,e){t.reel.filters=[new i.GlowFilter({distance:15,outerStrength:2})],r.iconTl.to(t.reel.scale,{x:1.5,y:1.5,duration:1,repeat:-1,yoyo:!0}),r.iconTl.to(t.reel,{rotation:-.25*Math.PI,duration:1,repeat:-1,yoyo:!0,ease:"elastic.out(1, 0.3)"},"start"),r.iconTl.to(t.reel,{rotation:.25*Math.PI,duration:1,repeat:-1,yoyo:!0,ease:"elastic.out(1, 0.3)"},"start"),r.iconTl.pause()})},s.prototype.setupDroppedItemAnimation=function(){var r=this,n=o.GameManager.app.stage.height+100;this.droppedItemArray.map(function(t,e){r.droppedItemTl.to(t.droppedItem,{y:n,duration:2*Math.random()+1,delay:+Math.random()},"start"),r.droppedItemTl.set(t.droppedItem,{onComplete:function(){this.pause()}}),r.droppedItemTl.pause()})},e.WinAnimation=s},function(t,m,C){!function(t,e){var r,_,v,g,i,o,n,s,a,u,l,y,x;/*! https://mths.be/punycode v1.4.1 by @mathias */function b(t){throw new RangeError(u[t])}function h(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function c(t,e){var r=t.split("@"),n="",r=(1<r.length&&(n=r[0]+"@",t=r[1]),(t=t.replace(a,".")).split("."));return n+h(r,e).join(".")}function T(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function p(t){return h(t,function(t){var e="";return 65535<t&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,r){var n=0;for(t=r?y(t/o):t>>1,t+=y(t/e);l*g>>1<t;n+=v)t=y(t/l);return y(n+(l+1)*t/(t+i))}function f(t){var e,r,n,i,o,s,a,u=[],l=t.length,h=0,c=128,f=72,d=t.lastIndexOf("-");for(d<0&&(d=0),r=0;r<d;++r)128<=t.charCodeAt(r)&&b("not-basic"),u.push(t.charCodeAt(r));for(n=0<d?d+1:0;n<l;){for(i=h,o=1,s=v;l<=n&&b("invalid-input"),a=t.charCodeAt(n++),(v<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:v)||a>y((_-h)/o))&&b("overflow"),h+=a*o,!(a<(a=s<=f?1:f+g<=s?g:s-f));s+=v)o>y(_/(a=v-a))&&b("overflow"),o*=a;f=A(h-i,e=u.length+1,0==i),y(h/e)>_-c&&b("overflow"),c+=y(h/e),h%=e,u.splice(h++,0,c)}return p(u)}function d(t){for(var e,r,n,i,o,s,a,u,l,h,c=[],f=(t=T(t)).length,d=128,p=72,m=e=0;m<f;++m)(a=t[m])<128&&c.push(x(a));for(r=n=c.length,n&&c.push("-");r<f;){for(i=_,m=0;m<f;++m)d<=(a=t[m])&&a<i&&(i=a);for(i-d>y((_-e)/(u=r+1))&&b("overflow"),e+=(i-d)*u,d=i,m=0;m<f;++m)if((a=t[m])<d&&++e>_&&b("overflow"),a==d){for(o=e,s=v;!(o<(l=s<=p?1:p+g<=s?g:s-p));s+=v)c.push(x(w(l+(h=o-l)%(l=v-l),0))),o=y(h/l);c.push(x(w(o,0))),p=A(e,u,r==n),e=0,++r}++e,++d}return c.join("")}m&&m.nodeType,t&&t.nodeType,(e="object"==typeof e&&e).global!==e&&e.window!==e&&e.self,_=2147483647,g=26,i=38,o=700,n=/^xn--/,s=/[^\x20-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},l=(v=36)-1,y=Math.floor,x=String.fromCharCode,r={version:"1.4.1",ucs2:{decode:T,encode:p},decode:f,encode:d,toASCII:function(t){return c(t,function(t){return s.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return c(t,function(t){return n.test(t)?f(t.slice(4).toLowerCase()):t})}},void 0!==(e=function(){return r}.call(m,C,m,t))&&(t.exports=e)}.call(this,C(14)(t),C(5))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(17),e.encode=e.stringify=r(18)},function(t,e,r){"use strict";t.exports=function(t,e,r,n){r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g,e=(t=t.split(e=e||"&"),1e3),s=(n&&"number"==typeof n.maxKeys&&(e=n.maxKeys),t.length);0<e&&e<s&&(s=e);for(var a=0;a<s;++a){var u,l=t[a].replace(o,"%20"),h=l.indexOf(r),h=0<=h?(u=l.substr(0,h),l.substr(h+1)):(u=l,""),l=decodeURIComponent(u),h=decodeURIComponent(h);Object.prototype.hasOwnProperty.call(i,l)?c(i[l])?i[l].push(h):i[l]=[i[l],h]:i[l]=h}return i};var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function o(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(r,n,i,t){return n=n||"&",i=i||"=","object"==typeof(r=null===r?void 0:r)?a(u(r),function(t){var e=encodeURIComponent(o(t))+i;return s(r[t])?a(r[t],function(t){return e+encodeURIComponent(o(t))}).join(n):e+encodeURIComponent(o(r[t]))}).join(n):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var u=Object.keys||function(t){var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DroppedItemManager=void 0;var n=r(20);function i(){this.textureArray=["coin","gemRed"],this.droppedItemCount=100,this.droppedItemArray=[],this.createXDroppedItems(this.droppedItemCount)}i.prototype.createXDroppedItems=function(t){for(var e=0;e<t;e++){var r=new n.DroppedItem(this.textureArray);this.droppedItemArray.push(r)}},i.prototype.getDroppedItemArray=function(){return this.droppedItemArray},e.DroppedItemManager=i},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.DroppedItem=void 0,o(r(1))),a=r(0);function u(t){this.textureArray=t,this.droppedItem=s.AnimatedSprite.fromImages(this.textureArray),this.setupDroppedItem(),this.setRandomTexture()}u.prototype.setupDroppedItem=function(){this.droppedItem.position.set(800*Math.random(),-200*Math.random()-100),this.droppedItem.anchor.set(.5),this.droppedItem.scale.set(.2),this.droppedItem.rotation=360*Math.random(),a.GameManager.app.stage.addChild(this.droppedItem)},u.prototype.setRandomTexture=function(){this.droppedItem.gotoAndStop(Math.random()*this.textureArray.length)},e.DroppedItem=u},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0,o(r(1))),a=r(0);function u(){this.slotWindow=s.Sprite.from("slotWindow"),this.panel=s.Sprite.from("panel"),this.setupSlotWindow(),this.setupPanel()}u.prototype.setupSlotWindow=function(){this.slotWindow.position.set(a.GameManager.app.view.width/2,200),this.slotWindow.anchor.set(.5),this.slotWindow.scale.set(1.8,1.5),a.GameManager.app.stage.addChild(this.slotWindow)},u.prototype.setupPanel=function(){this.panel.position.set(a.GameManager.app.view.width/2,450),this.panel.anchor.set(.5),this.panel.scale.set(.9,1),a.GameManager.app.stage.addChild(this.panel)},e.Background=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Audio=void 0;var n=r(23);function i(){this.sfx={music:new n.Howl({src:["assets/backgroundMusic.mp3"],volume:.2,loop:!0}),winSoundEffect:new n.Howl({src:["assets/winEffect.wav"],loop:!0}),spinSoundEffect:new n.Howl({src:["assets/spinEffect.wav"],loop:!0})}}i.prototype.toggleWinSoundEffect=function(t){t?(this.sfx.winSoundEffect.play(),this.sfx.winSoundEffect.fade(1,0,3e3)):this.sfx.winSoundEffect.stop()},i.prototype.toggleMusicEffect=function(t){t?this.sfx.music.play():this.sfx.music.stop()},i.prototype.toggleSpinSoundEffect=function(t){t?this.sfx.spinSoundEffect.play():this.sfx.spinSoundEffect.stop()},e.Audio=i},function(i,f,t){!function(r){var n;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";function t(){this.init()}function e(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")}t.prototype={init:function(){var t=this||g;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||g;if(t=parseFloat(t),e.ctx||c(),void 0!==t&&0<=t&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,g.ctx.currentTime);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var n=e._howls[r]._getSoundIds(),i=0;i<n.length;i++){var o=e._howls[r]._soundById(n[i]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||g;e.ctx||c(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,g.ctx.currentTime);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var n=e._howls[r]._getSoundIds(),i=0;i<n.length;i++){var o=e._howls[r]._soundById(n[i]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||g,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||g,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,c()),t},codecs:function(t){return(this||g)._codecs[t.replace(/^x-/,"")]},_setup:function(){var e=this||g;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||g,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator?e._navigator.userAgent:"",i=n.match(/OPR\/([0-6].)/g),i=i&&parseInt(i[0].split("/")[1],10)<33,o=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),n=n.match(/Version\/(.*?) /),o=o&&n&&parseInt(n[1],10)<15;return e._codecs={mp3:!(i||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(o||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(o||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var a,u=this||g;if(!u._audioUnlocked&&u.ctx)return u._audioUnlocked=!1,u.autoUnlock=!1,u._mobileUnloaded||44100===u.ctx.sampleRate||(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050),a=function(t){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var e=new Audio;e._unlocked=!0,u._releaseHtml5Audio(e)}catch(t){u.noAudio=!0;break}for(var r=0;r<u._howls.length;r++)if(!u._howls[r]._webAudio)for(var n=u._howls[r]._getSoundIds(),i=0;i<n.length;i++){var o=u._howls[r]._soundById(n[i]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}u._autoResume();var s=u.ctx.createBufferSource();s.buffer=u._scratchBuffer,s.connect(u.ctx.destination),void 0===s.start?s.noteOn(0):s.start(0),"function"==typeof u.ctx.resume&&u.ctx.resume(),s.onended=function(){s.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var t=0;t<u._howls.length;t++)u._howls[t]._emit("unlock")}},document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),u},_obtainHtml5Audio:function(){var t=this||g;if(t._html5AudioPool.length)return t._html5AudioPool.pop();t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||g;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&g.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){var t;e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())},e.ctx.suspend().then(t,t))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&g.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var g=new t,o=(e.prototype={init:function(t){var e=this;return g.ctx||c(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=g.usingWebAudio&&!e._html5,void 0!==g.ctx&&g.ctx&&g.autoUnlock&&g._unlockAudio(),g._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(g.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var r,n,i=0;i<t._src.length;i++){if(t._format&&t._format[i])r=t._format[i];else{if("string"!=typeof(n=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=(r=(r=/^data:audio\/([^;,]+);/i.exec(n))||/\.([^.]+)$/.exec(n.split("?",1)[0]))&&r[1].toLowerCase()}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&g.codecs(r)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new o(t),t._webAudio&&a(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,r){var n=this,t=null;if("number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(i++,t=n._sounds[o]._id);1===i?e=null:t=null}}var s,a=t?n._soundById(t):n._inactiveSound();if(!a)return null;if(t&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state)return a._sprite=e,a._ended=!1,s=a._id,n._queue.push({event:"play",action:function(){n.play(s)}}),s;if(t&&!a._paused)return r||n._loadQueue("play"),a._id;n._webAudio&&g._autoResume();var u,l,h,c,f=Math.max(0,0<a._seek?a._seek:n._sprite[e][0]/1e3),d=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-f),p=1e3*d/Math.abs(a._rate),m=n._sprite[e][0]/1e3,_=(n._sprite[e][0]+n._sprite[e][1])/1e3,v=(a._sprite=e,a._ended=!1,function(){a._paused=!1,a._seek=f,a._start=m,a._stop=_,a._loop=!(!a._loop&&!n._sprite[e][2])});{if(!(_<=f))return u=a._node,n._webAudio?(h=function(){n._playLock=!1,v(),n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;u.gain.setValueAtTime(t,g.ctx.currentTime),a._playStart=g.ctx.currentTime,void 0===u.bufferSource.start?a._loop?u.bufferSource.noteGrainOn(0,f,86400):u.bufferSource.noteGrainOn(0,f,d):a._loop?u.bufferSource.start(0,f,86400):u.bufferSource.start(0,f,d),p!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),p)),r||setTimeout(function(){n._emit("play",a._id),n._loadQueue()},0)},"running"===g.state&&"interrupted"!==g.ctx.state?h():(n._playLock=!0,n.once("resume",h),n._clearTimer(a._id))):(l=function(){u.currentTime=f,u.muted=a._muted||n._muted||g._muted||u.muted,u.volume=a._volume*g.volume(),u.playbackRate=a._rate;try{var t=u.play();if(t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)?(n._playLock=!0,v(),t.then(function(){n._playLock=!1,u._unlocked=!0,r?n._loadQueue():n._emit("play",a._id)}).catch(function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):r||(n._playLock=!1,v(),n._emit("play",a._id)),u.playbackRate=a._rate,u.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),p):(n._endTimers[a._id]=function(){n._ended(a),u.removeEventListener("ended",n._endTimers[a._id],!1)},u.addEventListener("ended",n._endTimers[a._id],!1))}catch(t){n._emit("playerror",a._id,t)}},"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===u.src&&(u.src=n._src,u.load()),h=window&&window.ejecta||!u.readyState&&g._navigator.isCocoonJS,3<=u.readyState||h?l():(n._playLock=!0,n._state="loading",c=function(){n._state="loaded",l(),u.removeEventListener(g._canPlayEvent,c,!1)},u.addEventListener(g._canPlayEvent,c,!1),n._clearTimer(a._id))),a._id;n._ended(a)}},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var r=e._getSoundIds(t),n=0;n<r.length;n++){e._clearTimer(r[n]);var i=e._soundById(r[n]);if(i&&!i._paused&&(i._seek=e.seek(r[n]),i._rateSeek=0,i._paused=!0,e._stopFade(r[n]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(t)}}),r;for(var n=r._getSoundIds(t),i=0;i<n.length;i++){r._clearTimer(n[i]);var o=r._soundById(n[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,r._stopFade(n[i]),o._node&&(r._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),r._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&r._clearSound(o._node))),e||r._emit("stop",o._id))}return r},mute:function(t,e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(t,e)}}),r;if(void 0===e){if("boolean"!=typeof t)return r._muted;r._muted=t}for(var n=r._getSoundIds(e),i=0;i<n.length;i++){var o=r._soundById(n[i]);o&&(o._muted=t,o._interval&&r._stopFade(o._id),r._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,g.ctx.currentTime):o._node&&(o._node.muted=!!g._muted||t),r._emit("mute",o._id))}return r},volume:function(){var t,e,r=this,n=arguments;if(0===n.length)return r._volume;if(1===n.length||2===n.length&&void 0===n[1]?0<=r._getSoundIds().indexOf(n[0])?i=parseInt(n[0],10):t=parseFloat(n[0]):2<=n.length&&(t=parseFloat(n[0]),i=parseInt(n[1],10)),!(void 0!==t&&0<=t&&t<=1))return(e=i?r._soundById(i):r._sounds[0])?e._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,n)}}),r;void 0===i&&(r._volume=t);for(var i=r._getSoundIds(i),o=0;o<i.length;o++)(e=r._soundById(i[o]))&&(e._volume=t,n[2]||r._stopFade(i[o]),r._webAudio&&e._node&&!e._muted?e._node.gain.setValueAtTime(t,g.ctx.currentTime):e._node&&!e._muted&&(e._node.volume=t*g.volume()),r._emit("volume",e._id));return r},fade:function(t,e,r,n){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,r,n)}}),i;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),r=parseFloat(r),i.volume(t,n);for(var o=i._getSoundIds(n),s=0;s<o.length;s++){var a,u,l=i._soundById(o[s]);l&&(n||i._stopFade(o[s]),i._webAudio&&!l._muted&&(u=(a=g.ctx.currentTime)+r/1e3,l._volume=t,l._node.gain.setValueAtTime(t,a),l._node.gain.linearRampToValueAtTime(e,u)),i._startFadeInterval(l,t,e,r,o[s],void 0===n))}return i},_startFadeInterval:function(e,r,n,i,t,o){var s=this,a=r,u=n-r,l=Math.abs(u/.01),l=Math.max(4,0<l?i/l:i),h=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var t=(Date.now()-h)/i;h=Date.now(),a+=u*t,a=Math.round(100*a)/100,a=u<0?Math.max(n,a):Math.min(n,a),s._webAudio?e._volume=a:s.volume(a,e._id,!0),o&&(s._volume=a),(n<r&&a<=n||r<n&&n<=a)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(n,e._id),s._emit("fade",e._id))},l)},_stopFade:function(t){var e=this,r=e._soundById(t);return r&&r._interval&&(e._webAudio&&r._node.gain.cancelScheduledValues(g.ctx.currentTime),clearInterval(r._interval),r._interval=null,e.volume(r._fadeTo,t),r._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(r=n._soundById(parseInt(i[0],10)))&&r._loop;n._loop=t=i[0]}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=n._getSoundIds(e),s=0;s<o.length;s++)(r=n._soundById(o[s]))&&(r._loop=t,n._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=t)&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop,n.playing(o[s])&&(n.pause(o[s],!0),n.play(o[s],!0))));return n},rate:function(){var t,e=this,r=arguments;if(0===r.length?o=e._sounds[0]._id:1===r.length?0<=e._getSoundIds().indexOf(r[0])?o=parseInt(r[0],10):t=parseFloat(r[0]):2===r.length&&(t=parseFloat(r[0]),o=parseInt(r[1],10)),"number"!=typeof t)return((i=e._soundById(o))||e)._rate;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,r)}}),e;void 0===o&&(e._rate=t);for(var n,i,o=e._getSoundIds(o),s=0;s<o.length;s++)(i=e._soundById(o[s]))&&(e.playing(o[s])&&(i._rateSeek=e.seek(o[s]),i._playStart=e._webAudio?g.ctx.currentTime:i._playStart),i._rate=t,e._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,g.ctx.currentTime):i._node&&(i._node.playbackRate=t),n=e.seek(o[s]),n=1e3*((e._sprite[i._sprite][0]+e._sprite[i._sprite][1])/1e3-n)/Math.abs(i._rate),!e._endTimers[o[s]]&&i._paused||(e._clearTimer(o[s]),e._endTimers[o[s]]=setTimeout(e._ended.bind(e,i),n)),e._emit("rate",i._id));return e},seek:function(){var t,e,r=this,n=arguments;if(0===n.length?r._sounds.length&&(e=r._sounds[0]._id):1===n.length?0<=r._getSoundIds().indexOf(n[0])?e=parseInt(n[0],10):r._sounds.length&&(e=r._sounds[0]._id,t=parseFloat(n[0])):2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10)),void 0===e)return 0;if("number"==typeof t&&("loaded"!==r._state||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,n)}}),r;var i,o,s,a,u,l=r._soundById(e);if(l){if(!("number"==typeof t&&0<=t))return r._webAudio?(a=r.playing(e)?g.ctx.currentTime-l._playStart:0,u=l._rateSeek?l._rateSeek-l._seek:0,l._seek+(u+a*Math.abs(l._rate))):l._node.currentTime;(i=r.playing(e))&&r.pause(e,!0),l._seek=t,l._ended=!1,r._clearTimer(e),r._webAudio||!l._node||isNaN(l._node.duration)||(l._node.currentTime=t),o=function(){i&&r.play(e,!0),r._emit("seek",e)},i&&!r._webAudio?(s=function(){r._playLock?setTimeout(s,0):o()},setTimeout(s,0)):o()}return r},playing:function(t){if("number"==typeof t)return!!(t=this._soundById(t))&&!t._paused;for(var e=0;e<this._sounds.length;e++)if(!this._sounds[e]._paused)return!0;return!1},duration:function(t){var e=this._duration,t=this._soundById(t);return e=t?this._sprite[t._sprite][1]/1e3:e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,r=0;r<e.length;r++)e[r]._paused||t.stop(e[r]._id),t._webAudio||(t._clearSound(e[r]._node),e[r]._node.removeEventListener("error",e[r]._errorFn,!1),e[r]._node.removeEventListener(g._canPlayEvent,e[r]._loadFn,!1),e[r]._node.removeEventListener("ended",e[r]._endFn,!1),g._releaseHtml5Audio(e[r]._node)),delete e[r]._node,t._clearTimer(e[r]._id);for(var n=g._howls.indexOf(t),i=(0<=n&&g._howls.splice(n,1),!0),r=0;r<g._howls.length;r++)if(g._howls[r]._src===t._src||0<=t._src.indexOf(g._howls[r]._src)){i=!1;break}return s&&i&&delete s[t._src],g.noAudio=!1,t._state="unloaded",t._sounds=[],t=null},on:function(t,e,r,n){t=this["_on"+t];return"function"==typeof e&&t.push(n?{id:r,fn:e,once:n}:{id:r,fn:e}),this},off:function(t,e,r){var n=this,i=n["_on"+t],o=0;if("number"==typeof e&&(r=e,e=null),e||r)for(o=0;o<i.length;o++){var s=r===i[o].id;if(e===i[o].fn&&s||!e&&s){i.splice(o,1);break}}else if(t)n["_on"+t]=[];else for(var a=Object.keys(n),o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(n[a[o]])&&(n[a[o]]=[]);return n},once:function(t,e,r){return this.on(t,e,r,1),this},_emit:function(t,e,r){for(var n=this,i=n["_on"+t],o=i.length-1;0<=o;o--)i[o].id&&i[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,r)}.bind(n,i[o].fn),0),i[o].once&&n.off(t,i[o].fn,i[o].id));return n._loadQueue(t),n},_loadQueue:function(t){var e,r=this;return 0<r._queue.length&&((e=r._queue[0]).event===t&&(r._queue.shift(),r._loadQueue()),t||e.action()),r},_ended:function(t){var e=this,r=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n,r=!(!t._loop&&!e._sprite[r][2]);return e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r&&(e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=g.ctx.currentTime,n=1e3*(t._stop-t._start)/Math.abs(t._rate),e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),n)),e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),g._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e,r=this;return r._endTimers[t]&&("function"!=typeof r._endTimers[t]?clearTimeout(r._endTimers[t]):(e=r._soundById(t))&&e._node&&e._node.removeEventListener("ended",r._endTimers[t],!1),delete r._endTimers[t]),r},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new o(t)},_drain:function(){var t=this,e=t._pool,r=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&r++;for(n=t._sounds.length-1;0<=n;n--){if(r<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),r--)}}},_getSoundIds:function(t){if(void 0!==t)return[t];for(var e=[],r=0;r<this._sounds.length;r++)e.push(this._sounds[r]._id);return e},_refreshBuffer:function(t){return t._node.bufferSource=g.ctx.createBufferSource(),t._node.bufferSource.buffer=s[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,g.ctx.currentTime),this},_cleanBuffer:function(t){var e=g._navigator&&0<=g._navigator.vendor.indexOf("Apple");if(g._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=g._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(g._navigator&&g._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}},function(t){this._parent=t,this.init()}),s=(o.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++g._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,r=g._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),t._node.gain.setValueAtTime(r,g.ctx.currentTime),t._node.paused=!0,t._node.connect(g.masterGain)):g.noAudio||(t._node=g._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(g._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=r*g.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++g._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(g._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}},{}),a=function(e){var t=e._src;if(s[t])return e._duration=s[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);l(n.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){o.setRequestHeader(t,e._xhr.headers[t])}),o.onload=function(){var t=(o.status+"")[0];"0"!==t&&"2"!==t&&"3"!==t?e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+"."):l(o.response,e)},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[t],e.load())},u(o)}},u=function(e){try{e.send()}catch(t){e.onerror()}},l=function(t,e){function r(){e._emit("loaderror",null,"Decoding audio data failed.")}function n(t){t&&0<e._sounds.length?(s[e._src]=t,h(e,t)):r()}"undefined"!=typeof Promise&&1===g.ctx.decodeAudioData.length?g.ctx.decodeAudioData(t).then(n).catch(r):g.ctx.decodeAudioData(t,n,r)},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},c=function(){if(g.usingWebAudio){try{"undefined"!=typeof AudioContext?g.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?g.ctx=new webkitAudioContext:g.usingWebAudio=!1}catch(t){g.usingWebAudio=!1}g.ctx||(g.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(g._navigator&&g._navigator.platform),e=g._navigator&&g._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),e=e?parseInt(e[1],10):null;t&&e&&e<9&&(t=/safari/.test(g._navigator&&g._navigator.userAgent.toLowerCase()),g._navigator&&!t&&(g.usingWebAudio=!1)),g.usingWebAudio&&(g.masterGain=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),g.masterGain.gain.setValueAtTime(g._muted?0:g._volume,g.ctx.currentTime),g.masterGain.connect(g.ctx.destination)),g._setup()}};void 0!==(n=function(){return{Howler:g,Howl:e}}.apply(f,[]))&&(i.exports=n),f.Howler=g,f.Howl=e,void 0!==r?(r.HowlerGlobal=t,r.Howler=g,r.Howl=e,r.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=t,window.Howler=g,window.Howl=e,window.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var r=e._howls.length-1;0<=r;r--)e._howls[r].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,r){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof t?n._pos:(n._pos=[t,e,r],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,r,n,i,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,r="number"!=typeof r?a[2]:r,n="number"!=typeof n?a[3]:n,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(s._orientation=[t,e,r,n,i,o],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(t,e,r,n,i,o),s)},Howl.prototype.init=(r=Howl.prototype.init,function(t){var e=this;return e._orientation=t.orientation||[1,0,0],e._stereo=t.stereo||null,e._pos=t.pos||null,e._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},e._onstereo=t.onstereo?[{fn:t.onstereo}]:[],e._onpos=t.onpos?[{fn:t.onpos}]:[],e._onorientation=t.onorientation?[{fn:t.onorientation}]:[],r.call(this,t)}),Howl.prototype.stereo=function(t,e){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,e)}}),r;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var i=r._getSoundIds(e),o=0;o<i.length;o++){var s=r._soundById(i[o]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||l(s,n),"spatial"==n?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,e,r,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,e,r,n)}}),i;if(e="number"!=typeof e?0:e,r="number"!=typeof r?-.5:r,void 0===n){if("number"!=typeof t)return i._pos;i._pos=[t,e,r]}for(var o=i._getSoundIds(n),s=0;s<o.length;s++){var a=i._soundById(o[s]);if(a){if("number"!=typeof t)return a._pos;a._pos=[t,e,r],a._node&&(a._panner&&!a._panner.pan||l(a,"spatial"),void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):a._panner.setPosition(t,e,r)),i._emit("pos",a._id)}}return i},Howl.prototype.orientation=function(t,e,r,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,e,r,n)}}),i;if(e="number"!=typeof e?i._orientation[1]:e,r="number"!=typeof r?i._orientation[2]:r,void 0===n){if("number"!=typeof t)return i._orientation;i._orientation=[t,e,r]}for(var o=i._getSoundIds(n),s=0;s<o.length;s++){var a=i._soundById(o[s]);if(a){if("number"!=typeof t)return a._orientation;a._orientation=[t,e,r],a._node&&(a._panner||(a._pos||(a._pos=i._pos||[0,0,-.5]),l(a,"spatial")),void 0!==a._panner.orientationX?(a._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):a._panner.setOrientation(t,e,r)),i._emit("orientation",a._id)}}return i},Howl.prototype.pannerAttr=function(){var t,e,r=this,n=arguments;if(!r._webAudio)return r;if(0===n.length)return r._pannerAttr;if(1===n.length){if("object"!=typeof n[0])return((s=r._soundById(parseInt(n[0],10)))||r)._pannerAttr;t=n[0],void 0===e&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var i,o,s,a=r._getSoundIds(e),u=0;u<a.length;u++)(s=r._soundById(a[u]))&&(i=s._pannerAttr,i={coneInnerAngle:(void 0!==t.coneInnerAngle?t:i).coneInnerAngle,coneOuterAngle:(void 0!==t.coneOuterAngle?t:i).coneOuterAngle,coneOuterGain:(void 0!==t.coneOuterGain?t:i).coneOuterGain,distanceModel:(void 0!==t.distanceModel?t:i).distanceModel,maxDistance:(void 0!==t.maxDistance?t:i).maxDistance,refDistance:(void 0!==t.refDistance?t:i).refDistance,rolloffFactor:(void 0!==t.rolloffFactor?t:i).rolloffFactor,panningModel:(void 0!==t.panningModel?t:i).panningModel},(o=s._panner)?(o.coneInnerAngle=i.coneInnerAngle,o.coneOuterAngle=i.coneOuterAngle,o.coneOuterGain=i.coneOuterGain,o.distanceModel=i.distanceModel,o.maxDistance=i.maxDistance,o.refDistance=i.refDistance,o.rolloffFactor=i.rolloffFactor,o.panningModel=i.panningModel):(s._pos||(s._pos=r._pos||[0,0,-.5]),l(s,"spatial")));return r},Sound.prototype.init=(n=Sound.prototype.init,function(){var t=this,e=t._parent;t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,n.call(this),t._stereo?e.stereo(t._stereo):t._pos&&e.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}),Sound.prototype.reset=(i=Sound.prototype.reset,function(){var t=this,e=t._parent;return t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,t._stereo?e.stereo(t._stereo):t._pos?e.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,e._refreshBuffer(t)),i.call(this)});var r,n,i,l=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}.call(this,t(5))},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.keyDisplay=void 0,o(r(1))),a=r(0);function u(){this.textureArray=["tools","tome","coin","armor"],this.keySpriteArray=[],this.keyTextArray=[],this.createKeySpriteArray(),this.setupKeySprites(),this.createKeyTextArray(),this.setupKeyText()}u.prototype.createKeySpriteArray=function(){var r=this;this.textureArray.map(function(t,e){r.keySpriteArray.push(s.Sprite.from(t))})},u.prototype.createKeyTextArray=function(){var r=this,n=new s.TextStyle({fontFamily:"Arial Black",fontStyle:"bold"});this.textureArray.map(function(t,e){r.keyTextArray.push(new s.Text("X5 "+t+": "+50*(e+1),n))})},u.prototype.setupKeySprites=function(){this.keySpriteArray.map(function(t,e){a.GameManager.app.stage.addChild(t),t.position.set(100,375+50*e),t.anchor.set(.5),t.scale.set(.15)})},u.prototype.setupKeyText=function(){this.keyTextArray.map(function(t,e){a.GameManager.app.stage.addChild(t),t.position.set(125,375+50*e),t.anchor.set(0,.5)})},e.keyDisplay=u},function(N,t,e){"use strict";e.r(t),e.d(t,"AdjustmentFilter",function(){return xi}),e.d(t,"AdvancedBloomFilter",function(){return Ai}),e.d(t,"AsciiFilter",function(){return Ci}),e.d(t,"BevelFilter",function(){return Si}),e.d(t,"BloomFilter",function(){return Xi}),e.d(t,"BulgePinchFilter",function(){return Hi}),e.d(t,"ColorMapFilter",function(){return Wi}),e.d(t,"ColorOverlayFilter",function(){return Yi}),e.d(t,"ColorReplaceFilter",function(){return qi}),e.d(t,"ConvolutionFilter",function(){return Ki}),e.d(t,"CrossHatchFilter",function(){return Zi}),e.d(t,"CRTFilter",function(){return Qi}),e.d(t,"DotFilter",function(){return $i}),e.d(t,"DropShadowFilter",function(){return Ji}),e.d(t,"EmbossFilter",function(){return to}),e.d(t,"GlitchFilter",function(){return eo}),e.d(t,"GlowFilter",function(){return ro}),e.d(t,"GodrayFilter",function(){return no}),e.d(t,"KawaseBlurFilter",function(){return bi}),e.d(t,"MotionBlurFilter",function(){return io}),e.d(t,"MultiColorReplaceFilter",function(){return oo}),e.d(t,"OldFilmFilter",function(){return so}),e.d(t,"OutlineFilter",function(){return ao}),e.d(t,"PixelateFilter",function(){return uo}),e.d(t,"RadialBlurFilter",function(){return lo}),e.d(t,"ReflectionFilter",function(){return ho}),e.d(t,"RGBSplitFilter",function(){return co}),e.d(t,"ShockwaveFilter",function(){return fo}),e.d(t,"SimpleLightmapFilter",function(){return po}),e.d(t,"TiltShiftAxisFilter",function(){return mo}),e.d(t,"TiltShiftFilter",function(){return go}),e.d(t,"TiltShiftXFilter",function(){return _o}),e.d(t,"TiltShiftYFilter",function(){return vo}),e.d(t,"TwistFilter",function(){return yo}),e.d(t,"ZoomBlurFilter",function(){return xo});function k(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var t=/iPhone/i,B=/iPod/i,r=/iPad/i,U=/\biOS-universal(?:.+)Mac\b/i,n=/\bAndroid(?:.+)Mobile\b/i,i=/Android/i,o=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,s=/Silk/i,a=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,z=/BlackBerry/i,j=/BB10/i,l=/Opera Mini/i,G=/\b(CriOS|Chrome)(?:.+)Mobile/i,h=/Mobile(?:.+)Firefox\b/i;
/*!
 * @pixi/settings - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
I=window.navigator,L={userAgent:"",platform:"",maxTouchPoints:0},I||"undefined"==typeof navigator?"string"==typeof I?L.userAgent=I:I&&I.userAgent&&(L={userAgent:I.userAgent,platform:I.platform,maxTouchPoints:I.maxTouchPoints||0}):L={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0},void 0!==(S=(I=void 0!==(S=(I=L.userAgent).split("[FBAN"))[1]?S[0]:I).split("Twitter"))[1]&&(I=S[0]),V=I,(I={apple:{phone:(S=function(t){return t.test(V)})(t)&&!S(a),ipod:S(B),tablet:!S(t)&&(S(r)||k(L))&&!S(a),universal:S(U),device:(S(t)||S(B)||S(r)||S(U)||k(L))&&!S(a)},amazon:{phone:S(o),tablet:!S(o)&&S(s),device:S(o)||S(s)},android:{phone:!S(a)&&S(o)||!S(a)&&S(n),tablet:!S(a)&&!S(o)&&!S(n)&&(S(s)||S(i)),device:!S(a)&&(S(o)||S(s)||S(n)||S(i))||S(/\bokhttp\b/i)},windows:{phone:S(a),tablet:S(u),device:S(a)||S(u)},other:{blackberry:S(z),blackberry10:S(j),opera:S(l),firefox:S(h),chrome:S(G),device:S(z)||S(j)||S(l)||S(h)||S(G)},any:!1,phone:!1,tablet:!1}).any=I.apple.device||I.android.device||I.windows.device||I.other.device,I.phone=I.apple.phone||I.android.phone||I.windows.phone,I.tablet=I.apple.tablet||I.android.tablet||I.windows.tablet;var V,t=I;var X,H,W,c,Y,q,K,Z,Q,$,J,tt,et,rt,nt,f,it,ot,st,m={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(B=32,r=!0,(t.tablet||t.phone)&&(t.apple.device&&(it=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(it[1],10)<11&&(r=!1),t.android.device&&(it=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(it[1],10)<7&&(r=!1)),r?B:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:t.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!t.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},B=((U=X=X||{})[U.WEBGL_LEGACY=0]="WEBGL_LEGACY",U[U.WEBGL=1]="WEBGL",U[U.WEBGL2=2]="WEBGL2",(L=H=H||{})[L.UNKNOWN=0]="UNKNOWN",L[L.WEBGL=1]="WEBGL",L[L.CANVAS=2]="CANVAS",(o=W=W||{})[o.COLOR=16384]="COLOR",o[o.DEPTH=256]="DEPTH",o[o.STENCIL=1024]="STENCIL",(s=c=c||{})[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR",(n=Y=Y||{})[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",(i=q=q||{})[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(a=K=K||{})[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(u=Z=Z||{})[u.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",u[u.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",u[u.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",u[u.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",u[u.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",u[u.FLOAT=5126]="FLOAT",u[u.HALF_FLOAT=36193]="HALF_FLOAT",(z=Q=Q||{})[z.NEAREST=0]="NEAREST",z[z.LINEAR=1]="LINEAR",(j=$=$||{})[j.CLAMP=33071]="CLAMP",j[j.REPEAT=10497]="REPEAT",j[j.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(l=J=J||{})[l.OFF=0]="OFF",l[l.POW2=1]="POW2",l[l.ON=2]="ON",(h=tt=tt||{})[h.NPM=0]="NPM",h[h.UNPACK=1]="UNPACK",h[h.PMA=2]="PMA",h[h.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",h[h.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",h[h.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(S=et=et||{})[S.NO=0]="NO",S[S.YES=1]="YES",S[S.AUTO=2]="AUTO",S[S.BLEND=0]="BLEND",S[S.CLEAR=1]="CLEAR",S[S.BLIT=2]="BLIT",(G=rt=rt||{})[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL",(I=nt=nt||{}).LOW="lowp",I.MEDIUM="mediump",I.HIGH="highp",(it=f=f||{})[it.NONE=0]="NONE",it[it.SCISSOR=1]="SCISSOR",it[it.STENCIL=2]="STENCIL",it[it.SPRITE=3]="SPRITE",(r=ot=ot||{})[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",e(3)),U=e.n(B),at=(e(4),e(2)),ut=(
/*!
 * @pixi/utils - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
m.RETINA_PREFIX=/@([0-9\.]+)x/,!(m.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0)),lt="5.3.12";
/*!
 * @pixi/constants - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function ht(t,e){return(e=void 0===e?[]:e)[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function ct(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var ft=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[c.NORMAL_NPM]=c.NORMAL,t[c.ADD_NPM]=c.ADD,t[c.SCREEN_NPM]=c.SCREEN,e[c.NORMAL]=c.NORMAL_NPM,e[c.ADD]=c.ADD_NPM,e[c.SCREEN]=c.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();Float32Array,Uint32Array,Int32Array,Uint8Array;function dt(t){return t+=0===t?1:0,--t,(t=(t=(t=(t=(t|=t>>>1)|t>>>2)|t>>>4)|t>>>8)|t>>>16)+1}function pt(t){return!(t&t-1||!t)}function mt(t){var e=(65535<t?1:0)<<4,r=(255<(t>>>=e)?1:0)<<3;return(e|=r)|(r=(15<(t>>>=r)?1:0)<<2)|(r=(3<(t>>>=r)?1:0)<<1)|(t>>>=r)>>1}var _t=0;var vt={};function gt(t,e,r){var n;void 0===r&&(r=3),vt[e]||(void 0===(n=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),vt[e]=!0)}var yt={},xt=Object.create(null),bt=Object.create(null);Tt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Tt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Tt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Tt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Tt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Tt(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||m.RESOLUTION,this.resize(t,e)}var wt;function At(t,e){t=m.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}
/*!
 * @pixi/runner - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */St.prototype.emit=function(t,e,r,n,i,o,s,a){if(8<arguments.length)throw new Error("max arguments reached");var u=this.name,l=this.items;this._aliasCount++;for(var h=0,c=l.length;h<c;h++)l[h][u](t,e,r,n,i,o,s,a);return l===this.items&&this._aliasCount--,this},St.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},St.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},St.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},St.prototype.contains=function(t){return-1!==this.items.indexOf(t)},St.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},St.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(St.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(St.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0});var Ct,d=St;function St(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(d.prototype,{dispatch:{value:d.prototype.emit},run:{value:d.prototype.emit}}),
/*!
 * @pixi/ticker - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
m.TARGET_FPMS=.06,(L=Ct=Ct||{})[L.INTERACTION=50]="INTERACTION",L[L.HIGH=25]="HIGH",L[L.NORMAL=0]="NORMAL",L[L.LOW=-25]="LOW",L[L.UTILITY=-50]="UTILITY";Ot.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Ot.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Ot.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Ot.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e};var Et=Ot;function Ot(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}p.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},p.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},p.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},p.prototype.add=function(t,e,r){return void 0===r&&(r=Ct.NORMAL),this._addListener(new Et(t,e,r))},p.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Ct.NORMAL),this._addListener(new Et(t,e,r,!0))},p.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},p.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(p.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),p.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},p.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},p.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},p.prototype.update=function(t){var e;if((t=void 0===t?performance.now():t)>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*m.TARGET_FPMS;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(p.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,m.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(p,"shared",{get:function(){var t;return p._shared||((t=p._shared=new p).autoStart=!0,t._protected=!0),p._shared},enumerable:!1,configurable:!0}),Object.defineProperty(p,"system",{get:function(){var t;return p._system||((t=p._system=new p).autoStart=!0,t._protected=!0),p._system},enumerable:!1,configurable:!0});var Pt=p;function p(){var e=this;this._head=new Et(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/m.TARGET_FPMS,this.elapsedMS=1/m.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}
/*!
 * @pixi/math - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Mt,It=2*Math.PI,Rt=(Math.PI,Math.PI/180),_=((o=Mt=Mt||{})[o.POLY=0]="POLY",o[o.RECT=1]="RECT",o[o.CIRC=2]="CIRC",o[o.ELIP=3]="ELIP",o[o.RREC=4]="RREC",Object.defineProperty(v.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(v,"EMPTY",{get:function(){return new v(0,0,0,0)},enumerable:!1,configurable:!0}),v.prototype.clone=function(){return new v(this.x,this.y,this.width,this.height)},v.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},v.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},v.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},v.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},v.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(t-n,0),this},v.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this},v.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=t-n,this},v);function v(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=Mt.RECT}Ft.prototype.clone=function(){return new Ft(this.x,this.y)},Ft.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Ft.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Ft.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Ft.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this};var g=Ft;function Ft(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}Lt.prototype.clone=function(t,e){return new Lt(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},Lt.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},Lt.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Lt.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Lt.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(Lt.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(Lt.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0});var Dt=Lt;function Lt(t,e,r,n){void 0===n&&(n=0),this._x=r=void 0===r?0:r,this._y=n,this.cb=t,this.scope=e}y.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},y.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},y.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},y.prototype.apply=function(t,e){e=e||new g;var r=t.x,t=t.y;return e.x=this.a*r+this.c*t+this.tx,e.y=this.b*r+this.d*t+this.ty,e},y.prototype.applyInverse=function(t,e){e=e||new g;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,t=t.y;return e.x=this.d*r*n+-this.c*r*t+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},y.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},y.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},y.prototype.rotate=function(t){var e=Math.cos(t),t=Math.sin(t),r=this.a,n=this.c,i=this.tx;return this.a=r*e-this.b*t,this.b=r*t+this.b*e,this.c=n*e-this.d*t,this.d=n*t+this.d*e,this.tx=i*e-this.ty*t,this.ty=i*t+this.ty*e,this},y.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},y.prototype.setTransform=function(t,e,r,n,i,o,s,a,u){return this.a=Math.cos(s+u)*i,this.b=Math.sin(s+u)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},y.prototype.prepend=function(t){var e,r,n=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,r=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d),this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},y.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),s=Math.atan2(r,e),a=Math.abs(o+s);return a<1e-5||Math.abs(It-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},y.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},y.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},y.prototype.clone=function(){var t=new y;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},y.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},y.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(y,"IDENTITY",{get:function(){return new y},enumerable:!1,configurable:!0}),Object.defineProperty(y,"TEMP_MATRIX",{get:function(){return new y},enumerable:!1,configurable:!0});var Nt=y;function y(t,e,r,n,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o}var kt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Bt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ut=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],jt=[],Gt=[],Vt=Math.sign;for(var x=0;x<16;x++){var Xt=[];jt.push(Xt);for(var Ht=0;Ht<16;Ht++)for(var Wt=Vt(kt[x]*kt[Ht]+Ut[x]*Bt[Ht]),Yt=Vt(Bt[x]*kt[Ht]+zt[x]*Bt[Ht]),qt=Vt(kt[x]*Ut[Ht]+Ut[x]*zt[Ht]),Kt=Vt(Bt[x]*Ut[Ht]+zt[x]*zt[Ht]),Zt=0;Zt<16;Zt++)if(kt[Zt]===Wt&&Bt[Zt]===Yt&&Ut[Zt]===qt&&zt[Zt]===Kt){Xt.push(Zt);break}}for(x=0;x<16;x++){var Qt=new Nt;Qt.set(kt[x],Bt[x],Ut[x],zt[x],0,0),Gt.push(Qt)}var b={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return kt[t]},uY:function(t){return Bt[t]},vX:function(t){return Ut[t]},vY:function(t){return zt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return jt[t][e]},sub:function(t,e){return jt[t][b.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?b.S:b.N:2*Math.abs(e)<=Math.abs(t)?0<t?b.E:b.W:0<e?0<t?b.SE:b.SW:0<t?b.NE:b.NW},matrixAppendRotationInv:function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);e=Gt[b.inv(e)];e.tx=r,e.ty=n,t.append(e)}};$t.prototype.onChange=function(){this._localID++},$t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},$t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},$t.prototype.updateTransform=function(t){var e,r,n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(r=this.worldTransform).a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},$t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty($t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),$t.IDENTITY=new $t;function $t(){this.worldTransform=new Nt,this.localTransform=new Nt,this.position=new Dt(this.onChange,this,0,0),this.scale=new Dt(this.onChange,this,1,1),this.pivot=new Dt(this.onChange,this,0,0),this.skew=new Dt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}
/*!
 * @pixi/core - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
m.PREFER_ENV=t.any?X.WEBGL:X.WEBGL2,m.STRICT_TEXTURE_CACHE=!1;var Jt=[];function te(t,e){if(!t)return null;var r,n="";"string"==typeof t&&(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(n=r[1].toLowerCase());for(var i=Jt.length-1;0<=i;--i){var o=Jt[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function T(t,e){function r(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}ne.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},ne.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},ne.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(ne.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),ne.prototype.update=function(){this.destroyed||this.onUpdate.emit()},ne.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(ne.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),ne.prototype.style=function(t,e,r){return!1},ne.prototype.dispose=function(){},ne.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},ne.test=function(t,e){return!1};var re=ne;function ne(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new d("setRealSize"),this.onUpdate=new d("update"),this.onError=new d("onError")}T(se,ie=re),se.prototype.upload=function(t,e,r){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===tt.UNPACK),r.width===e.width&&r.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,t.texImage2D(e.target,0,r.internalFormat,e.width,e.height,0,e.format,r.type,this.data)),!0},se.prototype.dispose=function(){this.data=null},se.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array};var ie,oe=se;function se(t,e){var r=this,e=e||{},n=e.width,e=e.height;if(n&&e)return(r=ie.call(this,n,e)||this).data=t,r;throw new Error("BufferResource width or height invalid")}var ae,ue={scaleMode:Q.NEAREST,format:q.RGBA,alphaMode:tt.NPM},w=(T(A,ae=U.a),Object.defineProperty(A.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),A.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},A.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},A.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},A.prototype._refreshPOT=function(){this.isPowerOfTwo=pt(this.realWidth)&&pt(this.realHeight)},A.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},A.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},A.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},A.prototype.onError=function(t){this.emit("error",this,t)},A.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete bt[this.cacheId],delete xt[this.cacheId],this.cacheId=null),this.dispose(),A.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},A.prototype.dispose=function(){this.emit("dispose",this)},A.prototype.castToBaseTexture=function(){return this},A.from=function(t,e,r){void 0===r&&(r=m.STRICT_TEXTURE_CACHE);var n="string"==typeof t,i=null,i=n?t:(t._pixiId||(t._pixiId="pixiid_"+ ++_t),t._pixiId),o=bt[i];if(n&&r&&!o)throw new Error('The cacheId "'+i+'" does not exist in BaseTextureCache.');return o||((o=new A(t,e)).cacheId=i,A.addToCache(o,i)),o},A.fromBuffer=function(t,e,r,n){t=t||new Float32Array(e*r*4);var i=new oe(t,{width:e,height:r}),t=t instanceof Float32Array?Z.FLOAT:Z.UNSIGNED_BYTE;return new A(i,Object.assign(ue,n||{width:e,height:r,type:t}))},A.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),bt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),bt[e]=t)},A.removeFromCache=function(t){if("string"==typeof t){var e,r=bt[t];if(r)return-1<(e=r.textureCacheIds.indexOf(t))&&r.textureCacheIds.splice(e,1),delete bt[t],r}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete bt[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},A._globalBatch=0,A);function A(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=ae.call(this)||this,n=(e=e||{}).alphaMode,i=e.mipmap,o=e.anisotropicLevel,s=e.scaleMode,a=e.width,u=e.height,l=e.wrapMode,h=e.format,c=e.type,f=e.target,d=e.resolution,p=e.resourceOptions;return!t||t instanceof re||((t=te(t,p)).internal=!0),r.width=a||0,r.height=u||0,r.resolution=d||m.RESOLUTION,r.mipmap=void 0!==i?i:m.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==o?o:m.ANISOTROPIC_LEVEL,r.wrapMode=l||m.WRAP_MODE,r.scaleMode=void 0!==s?s:m.SCALE_MODE,r.format=h||q.RGBA,r.type=c||Z.UNSIGNED_BYTE,r.target=f||K.TEXTURE_2D,r.alphaMode=void 0!==n?n:tt.UNPACK,void 0!==e.premultiplyAlpha&&(r.premultiplyAlpha=e.premultiplyAlpha),r.uid=++_t,r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<u,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}T(he,le=re),he.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof re?this.addResourceAt(t[r],r):this.addResourceAt(te(t[r],e),r))},he.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},he.prototype.addResourceAt=function(t,e){if(this.items[e])return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this;throw new Error("Index "+e+" is out of bounds")},he.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");le.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},he.prototype.unbind=function(t){le.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},he.prototype.load=function(){var r=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=r.items[0],e=t.realWidth,t=t.realHeight;return r.resize(e,t),Promise.resolve(r)}),this._load};var le,s=he;function he(t,e){var r=this,e=e||{},n=e.width,e=e.height;(r=le.call(this,n,e)||this).items=[],r.itemDirtyIds=[];for(var i=0;i<t;i++){var o=new w;r.items.push(o),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}T(fe,ce=s),fe.prototype.addBaseTextureAt=function(t,e){if(t.resource)return this.addResourceAt(t.resource,e),this;throw new Error("ArrayResource does not support RenderTexture")},fe.prototype.bind=function(t){ce.prototype.bind.call(this,t),t.target=K.TEXTURE_2D_ARRAY},fe.prototype.upload=function(t,e,r){var n=this.length,i=this.itemDirtyIds,o=this.items,s=t.gl;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var a=0;a<n;a++){var u=o[a];i[a]<u.dirtyId&&(i[a]=u.dirtyId,u.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,u.resource.width,u.resource.height,1,e.format,e.type,u.resource.source))}return!0};var ce,n=fe;function fe(t,e){var r,n=this,i=e||{},o=i.width,i=i.height,t=Array.isArray(t)?(r=t).length:t,n=ce.call(this,t,{width:o,height:i})||this;return r&&n.initFromArray(r,e),n}T(me,de=re),me.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,(wt=wt||document.createElement("a")).href=t;var r=!(t=Object(at.parse)(wt.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},me.prototype.upload=function(t,e,r,n){var t=t.gl,i=e.realWidth,o=e.realHeight;return n=n||this.source,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===tt.UNPACK),this.noSubImage||e.target!==t.TEXTURE_2D||r.width!==i||r.height!==o?(r.width=i,r.height=o,t.texImage2D(e.target,0,e.format,e.format,e.type,n)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},me.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),de.prototype.update.call(this))},me.prototype.dispose=function(){this.source=null};var de,pe=me;function me(t){var e=this,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;return(e=de.call(this,r,n)||this).source=t,e.noSubImage=!1,e}T(ve,_e=pe),ve.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement};var _e,i=ve;function ve(){return null!==_e&&_e.apply(this,arguments)||this}T(ye,ge=s),ye.prototype.bind=function(t){ge.prototype.bind.call(this,t),t.target=K.TEXTURE_CUBE_MAP},ye.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=K.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},ye.prototype.upload=function(t,e,r){for(var n=this.itemDirtyIds,i=0;i<ye.SIDES;i++){var o=this.items[i];n[i]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,r),n[i]=o.dirtyId):n[i]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[i]=-1))}return!0},ye.test=function(t){return Array.isArray(t)&&t.length===ye.SIDES},ye.SIDES=6;var ge,a=ye;function ye(t,e){var r=this,n=e||{},i=n.width,o=n.height,s=n.autoLoad,n=n.linkBaseTexture;if(t&&t.length!==ye.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var r=ge.call(this,6,{width:i,height:o})||this,a=0;a<ye.SIDES;a++)r.items[a].target=K.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==n,t&&r.initFromArray(t,e),!1!==s&&r.load(),r}T(Te,xe=pe),Te.prototype.load=function(t){var i=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){function r(){i.destroyed||(n.onload=null,n.onerror=null,i.resize(n.width,n.height),i._load=null,i.createBitmap?t(i.process()):t(i))}var n=i.source;i.url=n.src;n.complete&&n.src?r():(n.onload=r,n.onerror=function(t){e(t),i.onError.emit(t)})}),this._load)},Te.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===tt.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},Te.prototype.upload=function(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return xe.prototype.upload.call(this,t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(xe.prototype.upload.call(this,t,e,r,this.bitmap),!this.preserveBitmap){var n,i=!0,o=e._glTextures;for(n in o){var s=o[n];if(s!==r&&s.dirtyId!==e.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Te.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,xe.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Te.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement};var xe,be=Te;function Te(t,e){var r,n=this;return e=e||{},t instanceof HTMLImageElement||(r=new Image,pe.crossOrigin(r,t,e.crossorigin),r.src=t,t=r),n=xe.call(this,t)||this,!t.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==e.createBitmap?e.createBitmap:m.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,void 0!==e.premultiplyAlpha&&(n.premultiplyAlpha=e.premultiplyAlpha),n.bitmap=null,n._load=null,!1!==e.autoLoad&&n.load(),n}T(Ae,we=pe),Ae.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},Ae.prototype._loadSvg=function(){var o=this,s=new Image;pe.crossOrigin(s,this.svg,this._crossorigin),s.src=this.svg,s.onerror=function(t){o._resolve&&(s.onerror=null,o.onError.emit(t))},s.onload=function(){if(o._resolve){var t=s.width,e=s.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=t*o.scale,n=e*o.scale,i=((o._overrideWidth||o._overrideHeight)&&(r=o._overrideWidth||o._overrideHeight/e*t,n=o._overrideHeight||o._overrideWidth/t*e),r=Math.round(r),n=Math.round(n),o.source);i.width=r,i.height=n,i._pixiId="canvas_"+ ++_t,i.getContext("2d").drawImage(s,0,0,t,e,0,0,r,n),o._resolve(),o._resolve=null}}},Ae.getSize=function(t){var t=Ae.SVG_SIZE.exec(t),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e},Ae.prototype.dispose=function(){we.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},Ae.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},Ae.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var we,u=Ae;function Ae(t,e){var r=this;return e=e||{},(r=we.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=e.scale||1,r._overrideWidth=e.width,r._overrideHeight=e.height,r._resolve=null,r._crossorigin=e.crossorigin,r._load=null,!1!==e.autoLoad&&r.load(),r}T(C,Ce=pe),C.prototype.update=function(t){void 0===t&&(t=0),this.destroyed||(t=Pt.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(Ce.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},C.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,r.load())}),this._load},C.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},C.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},C.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},C.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Pt.shared.add(this.update,this),this._isConnectedToTicker=!0)},C.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},C.prototype._onCanPlay=function(){var t=this.source,e=(t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),this.valid);this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},C.prototype.dispose=function(){this._isConnectedToTicker&&Pt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Ce.prototype.dispose.call(this)},Object.defineProperty(C.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Pt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),C.test=function(t,e){return t instanceof HTMLVideoElement||-1<C.TYPES.indexOf(e)},C.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],C.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Ce,z=C;function C(t,e){var r=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var n=document.createElement("video"),i=(n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),(t="string"==typeof t?[t]:t)[0].src||t[0]);pe.crossOrigin(n,i,e.crossorigin);for(var o=0;o<t.length;++o){var s=document.createElement("source"),a=t[o],u=a.src,a=a.mime,l=(u=u||t[o]).split("?").shift().toLowerCase(),l=l.substr(l.lastIndexOf(".")+1),a=a||C.MIME_TYPES[l]||"video/"+l;s.src=u,s.type=a,n.appendChild(s)}t=n}return(r=Ce.call(this,t)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=e.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==e.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==e.autoLoad&&r.load(),r}T(Ee,Se=pe),Ee.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap};var Se,j=Ee;function Ee(){return null!==Se&&Se.apply(this,arguments)||this}Jt.push(be,j,i,z,u,oe,a,n);Oe.prototype.destroy=function(){this.renderer=null};l=Oe;function Oe(t){this.renderer=t}T(Ie,Pe=oe),Ie.prototype.upload=function(t,e,r){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===tt.UNPACK),r.width===e.width&&r.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,n.texImage2D(e.target,0,1===t.context.webGLVersion?n.DEPTH_COMPONENT:n.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0};var Pe,Me=Ie;function Ie(){return null!==Pe&&Pe.apply(this,arguments)||this}Object.defineProperty(Fe.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Fe.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new w(null,{scaleMode:Q.NEAREST,resolution:1,mipmap:J.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Fe.prototype.addDepthTexture=function(t){return this.depthTexture=t||new w(new Me(null,{width:this.width,height:this.height}),{scaleMode:Q.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:J.OFF,format:q.DEPTH_COMPONENT,type:Z.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Fe.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Fe.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Fe.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(t/i,e/i))}},Fe.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Fe.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)};var Re=Fe;function Fe(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new d("disposeFramebuffer"),this.multisample=ot.NONE}T(Ne,De=w),Ne.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},Ne.prototype.dispose=function(){this.framebuffer.dispose(),De.prototype.dispose.call(this)},Ne.prototype.destroy=function(){De.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null};var De,Le=Ne;function Ne(t){var e=this,t=(e=De.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,t||{}),r=t.width,t=t.height;return e.mipmap=0,e.width=Math.ceil(r)||100,e.height=Math.ceil(t)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new Re(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}Be.prototype.set=function(t,e,r){var n,i,o,s,a=e.width,e=e.height;r?(n=t.width/2/a,i=t.height/2/e,o=t.x/a+n,s=t.y/e+i,r=b.add(r,b.NW),this.x0=o+n*b.uX(r),this.y0=s+i*b.uY(r),r=b.add(r,2),this.x1=o+n*b.uX(r),this.y1=s+i*b.uY(r),r=b.add(r,2),this.x2=o+n*b.uX(r),this.y2=s+i*b.uY(r),r=b.add(r,2),this.x3=o+n*b.uX(r),this.y3=s+i*b.uY(r)):(this.x0=t.x/a,this.y0=t.y/e,this.x1=(t.x+t.width)/a,this.y1=t.y/e,this.x2=(t.x+t.width)/a,this.y2=(t.y+t.height)/e,this.x3=t.x/a,this.y3=(t.y+t.height)/e),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var ke=Be;function Be(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Ue,S,ze=new ke,je=(T(E,Ue=U.a),E.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},E.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},E.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture)&&t.url&&xt[t.url]&&E.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,E.removeFromCache(this),this.textureCacheIds=null},E.prototype.clone=function(){return new E(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},E.prototype.updateUvs=function(){this._uvs===ze&&(this._uvs=new ke),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},E.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=m.STRICT_TEXTURE_CACHE);var n="string"==typeof t,i=null,i=n?t:(t._pixiId||(t._pixiId="pixiid_"+ ++_t),t._pixiId),o=xt[i];if(n&&r&&!o)throw new Error('The cacheId "'+i+'" does not exist in TextureCache.');return o||(e.resolution||(e.resolution=At(t)),(o=new E(new w(t,e))).baseTexture.cacheId=i,w.addToCache(o.baseTexture,i),E.addToCache(o,i)),o},E.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),n=E.from(t,Object.assign({resourceOptions:r},e),!1),t=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):t.load().then(function(){return Promise.resolve(n)})},E.fromBuffer=function(t,e,r,n){return new E(w.fromBuffer(t,e,r,n))},E.fromLoader=function(t,e,r){t=new be(t);t.url=e;t=new E(new w(t,{scaleMode:m.SCALE_MODE,resolution:At(e)}));return w.addToCache(t.baseTexture,r=r||e),E.addToCache(t,r),r!==e&&(w.addToCache(t.baseTexture,e),E.addToCache(t,e)),t},E.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),xt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),xt[e]=t)},E.removeFromCache=function(t){if("string"==typeof t){var e,r=xt[t];if(r)return-1<(e=r.textureCacheIds.indexOf(t))&&r.textureCacheIds.splice(e,1),delete xt[t],r}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)xt[t.textureCacheIds[n]]===t&&delete xt[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(E.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(o||s)throw e="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,r="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height,new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(o&&s?"and":"or")+" "+r);this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),E.prototype.castToBaseTexture=function(){return this.baseTexture},E);function E(t,e,r,n,i,o){var s=Ue.call(this)||this;if(s.noFrame=!1,e||(s.noFrame=!0,e=new _(0,0,1,1)),t instanceof E&&(t=t.baseTexture),s.baseTexture=t,s._frame=e,s.trim=n,s.valid=!1,s._uvs=ze,s.uvMatrix=null,s.orig=r||e,s._rotate=Number(i||0),!0===i)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return s.defaultAnchor=o?new g(o.x,o.y):new g(0,0),s._updateID=0,s.textureCacheIds=[],t.valid?s.noFrame?t.valid&&s.onBaseTextureUpdated(t):s.frame=e:t.once("loaded",s.onBaseTextureUpdated,s),s.noFrame&&t.on("update",s.onBaseTextureUpdated,s),s}function Ge(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}je.EMPTY=new je(new w),Ge(je.EMPTY),Ge(je.EMPTY.baseTexture),je.WHITE=((h=document.createElement("canvas")).width=16,h.height=16,(S=h.getContext("2d")).fillStyle="white",S.fillRect(0,0,16,16),new je(new w(new i(h)))),Ge(je.WHITE),Ge(je.WHITE.baseTexture);T(He,Ve=je),Object.defineProperty(He.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),He.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},He.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},He.create=function(t){return new He(new Le(t="number"==typeof t?{width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t))};var Ve,Xe=He;function He(t,e){var r,n,i,o,s=this,a=null;return t instanceof Le||(r=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],console.warn("Please use RenderTexture.create("+r+", "+n+") instead of the ctor directly."),a=arguments[0],e=null,t=new Le({width:r,height:n,scaleMode:i,resolution:o})),(s=Ve.call(this,t,e)||this).legacyRenderer=a,s.valid=!0,s.filterFrame=null,s.filterPoolKey=null,s.updateUvs(),s}Ye.prototype.createTexture=function(t,e){t=new Le(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Xe(t)},Ye.prototype.getOptimalTexture=function(t,e,r){var n=Ye.SCREEN_KEY,i=(t*=r=void 0===r?1:r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(n=(65535&(t=dt(t)))<<16|65535&(e=dt(e))),this.texturePool[n]||(this.texturePool[n]=[]),this.texturePool[n].pop());return(i=i||this.createTexture(t,e)).filterPoolKey=n,i.setResolution(r),i},Ye.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Ye.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},Ye.prototype.returnFilterTexture=function(t){this.returnTexture(t)},Ye.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},Ye.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=Ye.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},Ye.SCREEN_KEY="screen";var We=Ye;function Ye(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}Ke.prototype.destroy=function(){this.buffer=null},Ke.from=function(t,e,r,n,i){return new Ke(t,e,r,n,i)};var qe=Ke;function Ke(t,e,r,n,i,o,s){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=o,this.instance=s}var Ze=0,Qe=($e.prototype.update=function(t){this.data=t||this.data,this._updateID++},$e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},$e.prototype.destroy=function(){this.dispose(),this.data=null},$e.from=function(t){return new $e(t=t instanceof Array?new Float32Array(t):t)},$e);function $e(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Ze++,this.disposeRunner=new d("disposeBuffer")}function Je(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var tr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var er={5126:4,5123:2,5121:1},rr=0,nr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},G=(O.prototype.addAttribute=function(t,e,r,n,i,o,s,a){if(void 0===r&&(r=0),void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Qe||(e instanceof Array&&(e=new Float32Array(e)),e=new Qe(e));var u=t.split("|");if(1<u.length){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,r,n,i);return this}var h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new qe(h,r,n,i,o,s,a),this.instanced=this.instanced||a,this},O.prototype.getAttribute=function(t){return this.attributes[t]},O.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},O.prototype.addIndex=function(t){return t instanceof Qe||(t instanceof Array&&(t=new Uint16Array(t)),t=new Qe(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},O.prototype.getIndex=function(){return this.indexBuffer},O.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],n=new Qe;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*er[i.type]/4),i.buffer=0}for(n.data=function(t,e){for(var r=0,n=0,i={},o=0;o<t.length;o++)n+=e[o],r+=t[o].length;for(var s=new ArrayBuffer(4*r),a=null,u=0,o=0;o<t.length;o++){var l=e[o],h=t[o],c=Je(h);i[c]||(i[c]=new tr[c](s));for(var a=i[c],f=0;f<h.length;f++)a[(f/l|0)*n+u+f%l]=h[f];u+=l}return new Float32Array(s)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},O.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},O.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},O.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},O.prototype.clone=function(){for(var t=new O,e=0;e<this.buffers.length;e++)t.buffers[e]=new Qe(this.buffers[e].data.slice(0));for(e in this.attributes){var r=this.attributes[e];t.attributes[e]=new qe(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},O.merge=function(t){for(var e=new O,r=[],n=[],i=[],o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.buffers.length;a++)n[a]=n[a]||0,n[a]+=s.buffers[a].data.length,i[a]=0;for(o=0;o<s.buffers.length;o++)r[o]=new nr[Je(s.buffers[o].data)](n[o]),e.buffers[o]=new Qe(r[o]);for(o=0;o<t.length;o++){s=t[o];for(a=0;a<s.buffers.length;a++)r[a].set(s.buffers[a].data,i[a]),i[a]+=s.buffers[a].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.index=!0;for(var u=0,l=0,h=0,c=0,o=0;o<s.buffers.length;o++)if(s.buffers[o]!==s.indexBuffer){c=o;break}for(o in s.attributes){var f=s.attributes[o];(0|f.buffer)===c&&(l+=f.size*er[f.type]/4)}for(o=0;o<t.length;o++){for(var d=t[o].indexBuffer.data,a=0;a<d.length;a++)e.indexBuffer.data[a+h]+=u;u+=s.buffers[c].data.length/l,h+=d.length}}return e},O);function O(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=rr++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new d("disposeGeometry"),this.refCount=0}T(sr,ir=G);var ir,or=sr;function sr(){var t=ir.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}T(lr,ar=G),lr.prototype.map=function(t,e){var r;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,t=e.x,r=e.y,this.vertices[0]=t,this.vertices[1]=r,this.vertices[2]=t+e.width,this.vertices[3]=r,this.vertices[4]=t+e.width,this.vertices[5]=r+e.height,this.vertices[6]=t,this.vertices[7]=r+e.height,this.invalidate(),this},lr.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this};var ar,ur=lr;function lr(){var t=ar.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Qe(t.vertices),t.uvBuffer=new Qe(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var hr=0,cr=(fr.prototype.update=function(){this.dirtyId++},fr.prototype.add=function(t,e,r){this.uniforms[t]=new fr(e,r)},fr.from=function(t,e){return new fr(t,e)},fr);function fr(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=hr++,this.static=!!e}pr.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var dr=pr;function pr(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new _,this.destinationFrame=new _,this.filters=[]}T(vr,mr=l),vr.prototype.push=function(t,e){for(var r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new dr,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++)var h=e[l],o=Math.min(o,h.resolution),s=this.useMaxPadding?Math.max(s,h.padding):s+h.padding,a=a&&h.autoFit,u=u||h.legacy;1===n.length&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),n.push(i),i.resolution=o,i.legacy=u,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(s),a&&i.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),i.sourceFrame.ceil(o),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;n=this.tempRect;n.width=i.sourceFrame.width,n.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,r.renderTexture.bind(i.renderTexture,i.sourceFrame,n),r.renderTexture.clear()},vr.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters,n=(this.activeState=e,this.globalUniforms.uniforms),i=(n.outputFrame=e.sourceFrame,n.resolution=e.resolution,n.inputSize),o=n.inputPixel,s=n.inputClamp,i=(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=i[0]*e.resolution,o[1]=i[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*i[2]-.5*o[2],s[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy&&((s=n.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp),this.globalUniforms.update(),t[t.length-1]);if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,i.renderTexture,et.BLEND,e),this.returnFilterTexture(e.renderTexture);else{for(var a=e.renderTexture,u=((h=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame,0),u=0;u<r.length-1;++u){r[u].apply(this,a,h,et.CLEAR,e);var l=a,a=h,h=l}r[u].apply(this,a,i.renderTexture,et.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},vr.prototype.bindAndClear=function(t,e){var r;void 0===e&&(e=et.CLEAR),t&&t.filterFrame?((r=this.tempRect).width=t.filterFrame.width,r.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,r)):this.renderer.renderTexture.bind(t),"boolean"==typeof e&&(e=e?et.CLEAR:et.BLEND,gt("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===et.CLEAR||e===et.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},vr.prototype.applyFilter=function(t,e,r,n){var i=this.renderer;this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.state.set(t.state),i.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(Y.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(Y.TRIANGLE_STRIP))},vr.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,n=r.sourceFrame,r=r.destinationFrame,i=e._texture.orig,t=t.set(r.width,0,0,r.height,n.x,n.y),r=e.worldTransform.copyTo(Nt.TEMP_MATRIX);return r.invert(),t.prepend(r),t.scale(1/i.width,1/i.height),t.translate(e.anchor.x,e.anchor.y),t},vr.prototype.destroy=function(){this.texturePool.clear(!1)},vr.prototype.getOptimalFilterTexture=function(t,e,r){return this.texturePool.getOptimalTexture(t,e,r=void 0===r?1:r)},vr.prototype.getFilterTexture=function(t,e){"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},vr.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},vr.prototype.emptyPool=function(){this.texturePool.clear(!0)},vr.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)};var mr,_r=vr;function vr(t){var e=mr.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new We,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new or,e.quadUv=new ur,e.tempRect=new _,e.activeState={},e.globalUniforms=new cr({outputFrame:e.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}yr.prototype.flush=function(){},yr.prototype.destroy=function(){this.renderer=null},yr.prototype.start=function(){},yr.prototype.stop=function(){this.flush()},yr.prototype.render=function(t){};var gr=yr;function yr(t){this.renderer=t}T(Tr,xr=l),Tr.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Tr.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Tr.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Tr.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,n=e-1;0<=n;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)},Tr.prototype.boundArray=function(t,e,r,n){for(var i=t.elements,o=t.ids,s=t.count,a=0,u=0;u<s;u++){var l=i[u],h=l._batchLocation;if(0<=h&&h<n&&e[h]===l)o[u]=h;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){o[u]=a,e[l._batchLocation=a]=l;break}a++}}};var xr,br=Tr;function Tr(t){var e=xr.call(this,t)||this;return e.emptyRenderer=new gr(t),e.currentRenderer=e.emptyRenderer,e}var wr,Ar=0,Cr=(T(Sr,wr=l),Object.defineProperty(Sr.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Sr.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ar++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Sr.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ar++,this.renderer.runners.contextChange.emit(t)},Sr.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Sr.prototype.createContext=function(t,e){var r;if(r=m.PREFER_ENV>=X.WEBGL2?t.getContext("webgl2",e):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},Sr.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},Sr.prototype.handleContextLost=function(t){t.preventDefault()},Sr.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Sr.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Sr.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Sr.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext,e=(r&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly"),r||!!t.getExtension("OES_element_index_uint"));(this.supports.uint32Indices=e)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Sr);function Sr(t){var e=wr.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Er,Or=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=ot.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Pr=new _,Mr=(T(P,Er=l),P.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,m.PREFER_ENV===X.WEBGL_LEGACY&&(t=e=null),e?r.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,r.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},P.prototype.bind=function(t,e){var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var i=0;i<t.colorTextures.length;i++){var o=t.colorTextures[i];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},P.prototype.setViewport=function(t,e,r,n){var i=this.viewport;i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))},Object.defineProperty(P.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),P.prototype.clear=function(t,e,r,n,i){void 0===i&&(i=W.COLOR|W.DEPTH);var o=this.gl;o.clearColor(t,e,r,n),o.clear(i)},P.prototype.initFramebuffer=function(t){var e=this.gl,e=new Or(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},P.prototype.resizeFramebuffer=function(t){for(var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=(r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height)),t.colorTextures),i=0;i<n.length;i++)this.renderer.texture.bind(n[i],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},P.prototype.updateFramebuffer=function(t){for(var e,r,n,i=this.gl,o=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures.length,a=(i.drawBuffers||(s=Math.min(s,1)),1<o.multisample&&(o.msaaBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,o.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,o.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,o.msaaBuffer)),[]),u=0;u<s;u++)0===u&&1<o.multisample||(r=(e=t.colorTextures[u]).parentTextureArray||e,this.renderer.texture.bind(r,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+u,e.target,r._glTextures[this.CONTEXT_UID].texture,0),a.push(i.COLOR_ATTACHMENT0+u));1<a.length&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(n=t.depthTexture,this.renderer.texture.bind(n,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,0)),o.stencil||!t.stencil&&!t.depth||(o.stencil=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,o.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),t.depthTexture||i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o.stencil))},P.prototype.detectSamples=function(t){var e=this.msaaSamples,r=ot.NONE;if(t<=1||null===e)return r;for(var n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return r=1===r?ot.NONE:r},P.prototype.blit=function(t,e,r){var n=this.current,i=this.renderer,o=this.gl,s=this.CONTEXT_UID;if(2===i.context.webGLVersion&&n){i=n.glFramebuffers[s];if(i){if(!t){if(i.multisample<=1)return;i.blitFramebuffer||(i.blitFramebuffer=new Re(n.width,n.height),i.blitFramebuffer.addColorTexture(0,n.colorTextures[0])),(t=i.blitFramebuffer).width=n.width,t.height=n.height}e||((e=Pr).width=n.width,e.height=n.height);s=e.width===(r=r||e).width&&e.height===r.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,i.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,o.COLOR_BUFFER_BIT,s?o.NEAREST:o.LINEAR)}}},P.prototype.disposeFramebuffer=function(t,e){var r,n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;n&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(n.framebuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)))},P.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},P.prototype.forceStencil=function(){var t,e,r,n,i=this.current;!i||(t=i.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(i.enableStencil(),e=i.width,i=i.height,n=(r=this.gl).createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,i),t.stencil=n,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n))},P.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new _},P);function P(t){t=Er.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new Re(10,10),t.msaaSamples=null,t}var Ir,Rr=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Fr={5126:4,5123:2,5121:1},Dr=(T(M,Ir=l),M.prototype.contextChange=function(){this.disposeAll(!0);var e,o,t=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=m.PREFER_ENV===X.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((o=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,n,i){return o.drawElementsInstancedANGLE(t,e,r,n,i)},t.drawArraysInstanced=function(t,e,r,n){return o.drawArraysInstancedANGLE(t,e,r,n)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},M.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1,n=(n||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0),n[e.program.id]||this.initGeometryVao(t,e.program,i));this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},M.prototype.reset=function(){this.unbind()},M.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var n,i,o=t.buffers[r],s=o._glBuffers[this.CONTEXT_UID];o._updateID!==s.updateID&&(s.updateID=o._updateID,n=o.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(n,s.buffer),(this._boundBuffer=s).byteLength>=o.data.byteLength?e.bufferSubData(n,0,o.data):(i=o.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,s.byteLength=o.data.byteLength,e.bufferData(n,o.data,i)))}},M.prototype.checkCompatibility=function(t,e){var r,n=t.attributes;for(r in e.attributeData)if(!n[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},M.prototype.getSignature=function(t,e){var r,n=t.attributes,i=e.attributeData,o=["g",t.id];for(r in n)i[r]&&o.push(r);return o.join("-")},M.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0),this.checkCompatibility(t,e);var n=this.gl,i=this.CONTEXT_UID,o=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],a=s[o];if(a)return s[e.id]=a;var u,l=t.buffers,h=t.attributes,c={},f={};for(u in l)c[u]=0,f[u]=0;for(u in h)!h[u].size&&e.attributeData[u]?h[u].size=e.attributeData[u].size:h[u].size||console.warn("PIXI Geometry attribute '"+u+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[h[u].buffer]+=h[u].size*Fr[h[u].type];for(u in h){var d=h[u],p=d.size;void 0===d.stride&&(c[d.buffer]===p*Fr[d.type]?d.stride=0:d.stride=c[d.buffer]),void 0===d.start&&(d.start=f[d.buffer],f[d.buffer]+=p*Fr[d.type])}a=n.createVertexArray(),n.bindVertexArray(a);for(var m=0;m<l.length;m++){var _=l[m];_._glBuffers[i]||(_._glBuffers[i]=new Rr(n.createBuffer()),(this.managedBuffers[_.id]=_).disposeRunner.add(this)),r&&_._glBuffers[i].refCount++}return this.activateVao(t,e),this._activeVao=a,s[e.id]=a,s[o]=a},M.prototype.disposeBuffer=function(t,e){var r,n;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],r=t._glBuffers[this.CONTEXT_UID],n=this.gl,t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID]))},M.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=t.buffers;if(t.disposeRunner.remove(this),r){for(var o=0;o<i.length;o++){var s=i[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(i[o],e)}if(!e)for(var a in r)"g"===a[0]&&(a=r[a],this._activeVao===a&&this.unbind(),n.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},M.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);for(e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},M.prototype.activateVao=function(t,e){var r,n=this.gl,i=this.CONTEXT_UID,o=t.buffers,s=t.attributes,a=(t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer),null);for(r in s){var u=s[r],l=o[u.buffer]._glBuffers[i];if(e.attributeData[r]){a!==l&&(n.bindBuffer(n.ARRAY_BUFFER,l.buffer),a=l);l=e.attributeData[r].location;if(n.enableVertexAttribArray(l),n.vertexAttribPointer(l,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(l,1)}}}},M.prototype.draw=function(t,e,r,n){var i,o,s=this.gl,a=this._activeGeometry;return a.indexBuffer?(o=2===(i=a.indexBuffer.data.BYTES_PER_ELEMENT)?s.UNSIGNED_SHORT:s.UNSIGNED_INT,2===i||4===i&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,o,(r||0)*i,n||1):s.drawElements(t,e||a.indexBuffer.data.length,o,(r||0)*i):console.warn("unsupported index buffer type: uint32")):a.instanced?s.drawArraysInstanced(t,r,e||a.getSize(),n||1):s.drawArrays(t,r,e||a.getSize()),this},M.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},M);function M(t){t=Ir.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}Nr.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=f.NONE,this.autoDetect=!0),this._target=null},Nr.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var Lr=Nr;function Nr(t){void 0===t&&(t=null),this.type=f.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function kr(t,e,r){e=t.createShader(e);return t.shaderSource(e,r),t.compileShader(e),e}function Br(t,e,r,n){var i=kr(t,t.VERTEX_SHADER,e),o=kr(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,i),t.attachShader(s,o),n)for(var a in n)t.bindAttribLocation(s,n[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(i))),t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(i),t.deleteShader(o),s}function Ur(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function zr(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Ur(2*e);case"bvec3":return Ur(3*e);case"bvec4":return Ur(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var jr,Gr={},Vr=Gr;function Xr(){var t,e;return(Vr===Gr||Vr&&Vr.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=m.PREFER_ENV>=X.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Vr=e),Vr}function Hr(t,e,r){return"precision"!==t.substring(0,9)?"precision "+(e===nt.HIGH&&r!==nt.HIGH?nt.MEDIUM:e)+" float;\n"+t:r!==nt.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Wr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var Yr=null,qr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Kr(t,e){if(!Yr){var r=Object.keys(qr);Yr={};for(var n=0;n<r.length;++n){var i=r[n];Yr[t[i]]=qr[i]}}return Yr[e]}var Zr=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Qr={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},$r={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Jr,tn=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function en(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var n=tn.replace(/%forloop%/gi,function(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var rn=0,nn={},on=(sn.prototype.extractData=function(t,e){var r=Xr();r?(t=Br(r,t,e),this.attributeData=this.getAttributeData(t,r),this.uniformData=this.getUniformData(t,r),r.deleteProgram(t)):(this.uniformData={},this.attributeData={})},sn.prototype.getAttributeData=function(t,e){for(var r={},n=[],i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var s=e.getActiveAttrib(t,o),a=Kr(e,s.type),a={type:a,name:s.name,size:Wr[a],location:0};r[s.name]=a,n.push(a)}n.sort(function(t,e){return t.name>e.name?1:-1});for(o=0;o<n.length;o++)n[o].location=o;return r},sn.prototype.getUniformData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=e.getActiveUniform(t,i),s=o.name.replace(/\[.*?\]$/,""),a=o.name.match(/\[.*?\]$/),u=Kr(e,o.type);r[s]={type:u,size:o.size,isArray:a,value:zr(u,o.size)}}return r},Object.defineProperty(sn,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(sn,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),sn.from=function(t,e,r){var n=t+e,i=yt[n];return i||(yt[n]=i=new sn(t,e,r)),i},sn);function sn(t,e,r){void 0===r&&(r="pixi-shader"),this.id=rn++,this.vertexSrc=t||sn.defaultVertexSrc,this.fragmentSrc=e||sn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),nn[r]?(nn[r]++,r+="-"+nn[r]):nn[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Hr(this.vertexSrc,m.PRECISION_VERTEX,nt.HIGH),this.fragmentSrc=Hr(this.fragmentSrc,m.PRECISION_FRAGMENT,(jr||(jr=nt.MEDIUM,(t=Xr())&&t.getShaderPrecisionFormat&&(t=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),jr=t.precision?nt.HIGH:nt.MEDIUM)),jr))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}un.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){r=e.uniforms[r];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},un.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(un.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),un.from=function(t,e,r){return new un(on.from(t,e),r)};var an=un;function un(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof cr?e:new cr(e):new cr({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}Object.defineProperty(hn.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(hn.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(hn.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(hn.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(hn.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(hn.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==c.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(hn.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),hn.for2d=function(){var t=new hn;return t.depthTest=!1,t.blend=!0,t};var ln=hn;function hn(){this.data=0,this.blendMode=c.NORMAL,this.polygonOffset=0,this.blend=!0}T(fn,cn=an),fn.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n)},Object.defineProperty(fn.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(fn,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(fn,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0});var cn,I=fn;function fn(t,e,r){var n=this,t=on.from(t||fn.defaultVertexSrc,e||fn.defaultFragmentSrc);return(n=cn.call(this,t,r)||this).padding=0,n.resolution=m.FILTER_RESOLUTION,n.enabled=!0,n.autoFit=!0,n.legacy=!!n.program.attributeData.aTextureCoord,n.state=new ln,n}var dn=new Nt,pn=(Object.defineProperty(mn.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),mn.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},mn.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var t=e._uvs,t=(this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0),e.orig),r=e.trim,t=(r&&(dn.set(t.width/r.width,0,0,t.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(dn)),e.baseTexture),r=this.uClampFrame,n=this.clampMargin/t.resolution,i=this.clampOffset;return r[0]=(e._frame.x+n+i)/t.width,r[1]=(e._frame.y+n+i)/t.height,r[2]=(e._frame.x+e._frame.width-n+i)/t.width,r[3]=(e._frame.y+e._frame.height-n+i)/t.height,this.uClampOffset[0]=i/t.realWidth,this.uClampOffset[1]=i/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},mn);function mn(t,e){this._texture=t,this.mapCoord=new Nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}T(gn,_n=I),gn.prototype.apply=function(t,e,r,n){var i=this.maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new pn(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))};var _n,vn=gn;function gn(t){var e=this,r=new Nt,e=_n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=r,e}T(bn,yn=l),bn.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},bn.prototype.push=function(t,e){var r,n=e;switch(n.isMaskData||((r=this.maskDataPool.pop()||new Lr).pooled=!0,r.maskObject=e,n=r),n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case f.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case f.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case f.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},bn.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case f.SCISSOR:this.renderer.scissor.pop();break;case f.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case f.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},bn.prototype.detect=function(t){var e,r=t.maskObject;r.isSprite?t.type=f.SPRITE:(t.type=f.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()&&(r=r.worldTransform,e=Math.atan2(r.b,r.a),r=Math.atan2(r.d,r.c),e=Math.round(e*(180/Math.PI)*100),r=Math.round(r*(180/Math.PI)*100)-e,0==(e=(e%9e3+9e3)%9e3)&&9e3==(r=(r%18e3+18e3)%18e3)&&(t.type=f.SCISSOR)))},bn.prototype.pushSpriteMask=function(t){var e=t.maskObject,t=t._target,r=this.alphaMaskPool[this.alphaMaskIndex],n=((r=r||(this.alphaMaskPool[this.alphaMaskIndex]=[new vn(e)]))[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea);t.filterArea=e.getBounds(!0),this.renderer.filter.push(t,r),t.filterArea=n,this.alphaMaskIndex++},bn.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--};var yn,xn=bn;function bn(t){t=yn.call(this,t)||this;return t.enableScissor=!1,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}T(wn,Tn=l),wn.prototype.getStackLength=function(){return this.maskStack.length},wn.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength(),t=(this.maskStack=t,this.getStackLength());t!==r&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},wn.prototype._useCurrent=function(){},wn.prototype.destroy=function(){Tn.prototype.destroy.call(this),this.maskStack=null};var Tn,r=wn;function wn(t){t=Tn.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}T(Sn,An=r),Sn.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Sn.prototype.push=function(t){var e=t.maskObject,r=(e.renderable=!0,t._scissorRect),n=e.getBounds(!0),i=this.renderer.gl;e.renderable=!1,r?n.fit(r):i.enable(i.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},Sn.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},Sn.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,n=r.transform,i=r.sourceFrame,r=r.destinationFrame,o=(e||this.renderer).resolution,s=(t.x-i.x)*o+r.x,i=(t.y-i.y)*o+r.y,r=t.width*o,t=t.height*o;n&&(s+=n.tx*o,i+=n.ty*o),e||(i=this.renderer.height-t-i),this.renderer.gl.scissor(s,i,r,t)};var An,Cn=Sn;function Sn(t){t=An.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}T(Pn,En=r),Pn.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},Pn.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,n,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},Pn.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},Pn.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},Pn.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1};var En,On=Pn;function Pn(t){t=En.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}T(Rn,Mn=l),Rn.prototype.update=function(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);e=this.renderer;e.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,e.globalUniforms.update(),e.shader.shader&&e.shader.syncUniformGroup(e.shader.shader.uniforms.globals)},Rn.prototype.calculateProjection=function(t,e,r,n){var i=this.projectionMatrix,n=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=n*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-n-e.y*i.d},Rn.prototype.setTransform=function(t){};var Mn,In=Rn;function Rn(t){t=Mn.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Nt,t.transform=null,t}var Fn,Dn=new _,Ln=new _,Nn=new _,kn=(T(Bn,Fn=l),Bn.prototype.bind=function(t,e,r){var n,i,o,s=this.renderer;(this.current=t=void 0===t?null:t)?(o=(n=t.baseTexture).resolution,e||(Dn.width=t.frame.width,Dn.height=t.frame.height,e=Dn),r||(Ln.x=t.frame.x,Ln.y=t.frame.y,Ln.width=e.width,Ln.height=e.height,r=Ln),i=n.framebuffer):(o=s.resolution,e||(Dn.width=s.screen.width,Dn.height=s.screen.height,e=Dn),r||((r=Dn).width=e.width,r.height=e.height)),Nn.x=r.x*o,Nn.y=r.y*o,Nn.width=r.width*o,Nn.height=r.height*o,this.renderer.framebuffer.bind(i,Nn),this.renderer.projection.update(r,e,o,!i),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},Bn.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},Bn.prototype.resize=function(){this.bind(null)},Bn.prototype.reset=function(){this.bind(null)},Bn);function Bn(t){var e=Fn.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new _,e.destinationFrame=new _,e}zn.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Un=zn;function zn(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var jn,Gn=0,Vn={textureCount:0},Xn=(T(R,jn=l),R.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Jr)return Jr;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Jr=!0===t({a:"b"},"a","b")}catch(t){Jr=!1}return Jr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},R.prototype.contextChange=function(t){this.gl=t,this.reset()},R.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Vn.textureCount=0,this.syncUniformGroup(t.uniformGroup,Vn)),n},R.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},R.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},R.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},R.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r,n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(r in t.uniforms){var i=e[r];if(i){for(var o,s=t.uniforms[r],a=!1,u=0;u<Zr.length;u++)if(Zr[u].test(i,s)){n.push(Zr[u].code(r,s)),a=!0;break}a||(o=(1===i.size?Qr:$r)[i.type].replace("location",'ud["'+r+'"].location'),n.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+o+";"))}else t.uniforms[r].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},R.prototype.getSignature=function(t,e){var r,n=[];for(r in t.uniforms)n.push(r),e[r]&&n.push(e[r].type);return n.join("-")},R.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},R.prototype.generateShader=function(t){var e=this.gl,r=t.program,n={};for(i in r.attributeData)n[i]=r.attributeData[i].location;var i,o=Br(e,r.vertexSrc,r.fragmentSrc,n),s={};for(i in r.uniformData){var a=r.uniformData[i];s[i]={location:e.getUniformLocation(o,i),value:zr(a.type,a.size)}}t=new Un(o,s);return r.glPrograms[this.renderer.CONTEXT_UID]=t},R.prototype.reset=function(){this.program=null,this.shader=null},R.prototype.destroy=function(){this.destroyed=!0},R);function R(t){t=jn.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=Gn++,t}T(F,Hn=l),F.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[c.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.ADD]=[t.ONE,t.ONE],e[c.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.NONE]=[0,0],e[c.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[c.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[c.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[c.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[c.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[c.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[c.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[c.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[c.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[c.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[c.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},F.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},F.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},F.prototype.setBlend=function(t){this.updateCheck(F.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},F.prototype.setOffset=function(t){this.updateCheck(F.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},F.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},F.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},F.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},F.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,t=this.blendModes[t],e=this.gl,2===t.length?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD)))},F.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},F.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},F.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},F.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},F.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)};var Hn,Wn=F;function F(t){t=Hn.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=c.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.checks=[],t.defaultState=new ln,t.defaultState.blend=!0,t}T(Kn,Yn=l),Kn.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==rt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},Kn.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),r=!(e[n]=null))}if(r){for(var o=0,n=0;n<e.length;n++)null!==e[n]&&(e[o++]=e[n]);e.length=o}},Kn.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var n=t.children.length-1;0<=n;n--)this.unload(t.children[n])};var Yn,qn=Kn;function Kn(t){t=Yn.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=m.GC_MAX_IDLE,t.checkCountMax=m.GC_MAX_CHECK_COUNT,t.mode=m.GC_MODE,t}var Zn,Qn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},$n=(T(Jn,Zn=l),Jn.prototype.contextChange=function(){var t=this.gl=this.renderer.gl,e=(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var n=new Qn(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Qn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},Jn.prototype.bind=function(t,e){void 0===e&&(e=0);var r,n=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null)},Jn.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},Jn.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)},Jn.prototype.initTexture=function(t){var e=new Qn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},Jn.prototype.initTextureType=function(t,e){var r;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(r=this.renderer.gl,t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===Z.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F))},Jn.prototype.updateTexture=function(t){var e,r,n,i=t._glTextures[this.CONTEXT_UID];i&&(n=this.renderer,this.initTextureType(t,i),t.resource&&t.resource.upload(n,t,i)||(e=t.realWidth,r=t.realHeight,n=n.gl,(i.width!==e||i.height!==r||i.dirtyId<0)&&(i.width=e,i.height=r,n.texImage2D(t.target,0,i.internalFormat,e,r,0,t.format,i.type,null))),t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId)},Jn.prototype.destroyTexture=function(t,e){var r=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){r=this.managedTextures.indexOf(t);if(-1!==r){var n=this.managedTextures,e=r,i=1,t=n.length;if(!(t<=e||0===i)){for(var o=t-(i=t<e+i?t-e:i),s=e;s<o;++s)n[s]=n[s+i];n.length=o}}}},Jn.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==J.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=$.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},Jn.prototype.setStyle=function(t,e){var r,n=this.gl;e.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Q.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST),(e=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===Q.LINEAR&&(r=Math.min(t.anisotropicLevel,n.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),n.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,r))):n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Q.LINEAR?n.LINEAR:n.NEAREST),n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Q.LINEAR?n.LINEAR:n.NEAREST)},Jn);function Jn(t){t=Zn.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new w,t}var ti,ei=new Nt,B=(T(ri,ti=U.a),ri.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(ri.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(ri.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),ri.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},ri.prototype.generateTexture=function(t,e,r,n){0===(n=n||t.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);e=Xe.create({width:0|n.width,height:0|n.height,scaleMode:e,resolution:r});return ei.tx=-n.x,ei.ty=-n.y,this.render(t,e,!1,ei,!!t.parent),e},ri.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);t=this;t.plugins=null,t.type=H.UNKNOWN,t.view=null,t.screen=null,t._tempDisplayObjectParent=null,t.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(ri.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+("000000".substr(0,6-e.length)+e)),ht(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),ri);function ri(t,e){void 0===t&&(t=H.UNKNOWN);var r=ti.call(this)||this;return(e=Object.assign({},m.RENDER_OPTIONS,e)).roundPixels&&(m.ROUND_PIXELS=e.roundPixels,gt("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),r.options=e,r.type=t,r.screen=new _(0,0,e.width,e.height),r.view=e.view||document.createElement("canvas"),r.resolution=e.resolution||m.RESOLUTION,r.transparent=e.transparent,r.autoDensity=e.autoDensity||e.autoResize||!1,r.preserveDrawingBuffer=e.preserveDrawingBuffer,r.clearBeforeRender=e.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,0],r._backgroundColorString="#000000",r.backgroundColor=e.backgroundColor||r._backgroundColor,r._lastObjectRendered=null,r.plugins={},r}var ni;T(ii,ni=B),ii.create=function(t){if(st=void 0===st?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:m.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e,r=document.createElement("canvas"),n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);return n&&(e=n.getExtension("WEBGL_lose_context"))&&e.loseContext(),n=null,i}catch(t){return!1}}():st)return new ii(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},ii.prototype.addSystem=function(t,e){e=e||t.name;var r,n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(r in this[e]=n,this.runners)this.runners[r].add(n);return this},ii.prototype.render=function(t,e,r,n,i){this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(e||(this._lastObjectRendered=t),i||(n=t.enableTempParent(),t.updateTransform(),t.disableTempParent(n)),this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},ii.prototype.resize=function(t,e){ni.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},ii.prototype.reset=function(){return this.runners.reset.emit(),this},ii.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},ii.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();ni.prototype.destroy.call(this,t),this.gl=null},ii.registerPlugin=function(t,e){(ii.__plugins=ii.__plugins||{})[t]=e};function ii(t){var e,r=ni.call(this,H.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new d("destroy"),contextChange:new d("contextChange"),reset:new d("reset"),update:new d("update"),postrender:new d("postrender"),prerender:new d("prerender"),resize:new d("resize")},r.globalUniforms=new cr({projectionMatrix:new Nt},!0),r.addSystem(xn,"mask").addSystem(Cr,"context").addSystem(Wn,"state").addSystem(Xn,"shader").addSystem($n,"texture").addSystem(Dr,"geometry").addSystem(Mr,"framebuffer").addSystem(Cn,"scissor").addSystem(On,"stencil").addSystem(In,"projection").addSystem(qn,"textureGC").addSystem(_r,"filter").addSystem(kn,"renderTexture").addSystem(br,"batch"),r.initPlugins(ii.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:t.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,t=2===r.context.webGLVersion?"WebGL 2":"WebGL 1",ut||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(e=window.console).log.apply(e,["\n %c %c %c PixiJS "+lt+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS "+lt+" - "+t+" - http://www.pixijs.com/"),ut=!0),r.resize(r.options.width,r.options.height),r}var oi=function(){this.texArray=null,this.blend=0,this.type=Y.TRIANGLES,this.start=0,this.size=0,this.data=null},si=(ai.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},ai);function ai(){this.elements=[],this.ids=[],this.count=0}Object.defineProperty(li.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(li.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(li.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(li.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(li.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),li.prototype.view=function(t){return this[t+"View"]},li.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},li.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}};var ui=li;function li(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}T(D,hi=gr),D.prototype.contextChange=function(){var t=this.renderer.gl;m.PREFER_ENV===X.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=en(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},D.prototype.initFlushBuffers=function(){for(var t=D._drawCallPool,e=D._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new oi);for(;e.length<n;)e.push(new si);for(var i=0;i<this.MAX_TEXTURES;i++)this._tempBoundTextures[i]=null},D.prototype.onPrerender=function(){this._flushId=0},D.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},D.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=D._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++w._globalBatch,a=0,u=r[0],l=0;n.copyBoundTextures(i,e);for(var h=0;h<this._bufferSize;++h){var c=t[h];t[h]=null,c._batchEnabled!==s&&(u.count>=e&&(n.boundArray(u,i,s,e),this.buildDrawCalls(u,l,h),l=h,u=r[++a],++s),c._batchEnabled=s,c.touched=o,u.elements[u.count++]=c)}0<u.count&&(n.boundArray(u,i,s,e),this.buildDrawCalls(u,l,this._bufferSize),++a,++s);for(h=0;h<i.length;h++)i[h]=null;w._globalBatch=s},D.prototype.buildDrawCalls=function(t,e,r){var n=this._bufferedElements,i=this._attributeBuffer,o=this._indexBuffer,s=this.vertexSize,a=D._drawCallPool,u=this._dcIndex,l=this._aIndex,h=this._iIndex,c=a[u];c.start=this._iIndex,c.texArray=t;for(var f=e;f<r;++f){var d=n[f],p=d._texture.baseTexture,p=ft[p.alphaMode?1:0][d.blendMode];n[f]=null,e<f&&c.blend!==p&&(c.size=h-c.start,e=f,(c=a[++u]).texArray=t,c.start=h),this.packInterleavedGeometry(d,i,o,l,h),l+=d.vertexData.length/2*s,h+=d.indices.length,c.blend=p}e<r&&(c.size=h-c.start,++u),this._dcIndex=u,this._aIndex=l,this._iIndex=h},D.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},D.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;m.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},D.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,n=e.state,i=D._drawCallPool,o=null,s=0;s<t;s++){var a=i[s],u=a.texArray,l=a.type,h=a.size,c=a.start,a=a.blend;o!==u&&this.bindAndClearTexArray(o=u),this.state.blendMode=a,n.set(this.state),r.drawElements(l,h,r.UNSIGNED_SHORT,2*c)}},D.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},D.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),m.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},D.prototype.stop=function(){this.flush()},D.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),hi.prototype.destroy.call(this)},D.prototype.getAttributeBuffer=function(t){var t=dt(Math.ceil(t/8)),e=mt(t),t=8*t,e=(this._aBuffers.length<=e&&(this._iBuffers.length=e+1),this._aBuffers[t]);return e||(this._aBuffers[t]=e=new ui(t*this.vertexSize*4)),e},D.prototype.getIndexBuffer=function(t){var t=dt(Math.ceil(t/12)),e=mt(t),t=12*t,r=(this._iBuffers.length<=e&&(this._iBuffers.length=e+1),this._iBuffers[e]);return r||(this._iBuffers[e]=r=new Uint16Array(t)),r},D.prototype.packInterleavedGeometry=function(t,e,r,n,i){for(var o,s,a=e.uint32View,u=e.float32View,l=n/this.vertexSize,h=t.uvs,c=t.indices,f=t.vertexData,d=t._texture.baseTexture._batchLocation,e=Math.min(t.worldAlpha,1),p=e<1&&t._texture.baseTexture.alphaMode?(o=t._tintRGB,1===(s=e)?(255*s<<24)+o:0===s?0:(255*s<<24)+(((o>>16&255)*s+.5|0)<<16)+(((o>>8&255)*s+.5|0)<<8)+((255&o)*s+.5|0)):t._tintRGB+(255*e<<24),m=0;m<f.length;m+=2)u[n++]=f[m],u[n++]=f[m+1],u[n++]=h[m],u[n++]=h[m+1],a[n++]=p,u[n++]=d;for(m=0;m<c.length;m++)r[i++]=l+c[m]},D._drawCallPool=[],D._textureArrayPool=[];var hi,ci=D;function D(t){var e=hi.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=ln.for2d(),e.size=4*m.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}di.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=cr.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new on(this.vertexSrc,n)}n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:this.defaultGroupCache[t]};return new an(this.programCache[t],n)},di.prototype.generateSampleSrc=function(t){for(var e=(e="")+"\n"+"\n",r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e=(e+="\n{")+"\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);\n}";return e=e+"\n"+"\n"};var fi=di;function di(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}T(_i,pi=G);var pi,mi=_i;function _i(t){void 0===t&&(t=!1);var e=pi.call(this)||this;return e._buffer=new Qe(null,t,!1),e._indexBuffer=new Qe(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,Z.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,Z.FLOAT).addAttribute("aColor",e._buffer,4,!0,Z.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,Z.FLOAT).addIndex(e._indexBuffer),e}var vi="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",gi="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function yi(){}yi.create=function(t){var e,t=Object.assign({vertex:vi,fragment:gi,geometryClass:mi,vertexSize:6},t),r=t.vertex,n=t.fragment,i=t.vertexSize,o=t.geometryClass;return T(s,e=ci),s;function s(t){t=e.call(this,t)||this;return t.shaderGenerator=new fi(r,n),t.geometryClass=o,t.vertexSize=i,t}},Object.defineProperty(yi,"defaultVertexSrc",{get:function(){return vi},enumerable:!1,configurable:!0}),Object.defineProperty(yi,"defaultFragmentTemplate",{get:function(){return gi},enumerable:!1,configurable:!0});yi.create();
/*!
 * @pixi/filter-adjustment - v3.1.0
 * Compiled Wed, 11 Mar 2020 20:38:18 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xi=function(e){function t(t){e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n"),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,r,n)},t}(I),bi=function(n){function t(t,e,r){void 0===t&&(t=4),void 0===e&&(e=3),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",(r=void 0===r?!1:r)?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new g,this.pixelSize=1,this._clamp=r,this._kernels=null,Array.isArray(t)?this.kernels=t:(this._blur=t,this.quality=e)}n&&(t.__proto__=n);var e={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.apply=function(t,e,r,n){var i,o=this._pixelSize.x/e._frame.width,s=this._pixelSize.y/e._frame.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*s,t.applyFilter(this,e,r,n);else{for(var a,u=t.getFilterTexture(),l=e,h=u,c=this._quality-1,f=0;f<c;f++)i=this._kernels[f]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*s,t.applyFilter(this,l,h,1),a=l,l=h,h=a;i=this._kernels[c]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*s,t.applyFilter(this,l,r,n),t.returnFilterTexture(u)}},t.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(t,e){return t+e+.5},0))},t.prototype._generateKernels=function(){var t=this._blur,e=this._quality,r=[t];if(0<t)for(var n=t,i=t/e,o=1;o<e;o++)r.push(n-=i);this._kernels=r,this._updatePadding()},e.kernels.get=function(){return this._kernels},e.kernels.set=function(t){Array.isArray(t)&&0<t.length?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},e.clamp.get=function(){return this._clamp},e.pixelSize.set=function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof g?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},e.pixelSize.get=function(){return this._pixelSize},e.quality.get=function(){return this._quality},e.quality.set=function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},e.blur.get=function(){return this._blur},e.blur.set=function(t){this._blur=t,this._generateKernels()},Object.defineProperties(t.prototype,e),t}(I),Ti="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",wi=function(e){function t(t){void 0===t&&(t=.5),e.call(this,Ti,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={threshold:{configurable:!0}};return r.threshold.get=function(){return this.uniforms.threshold},r.threshold.set=function(t){this.uniforms.threshold=t},Object.defineProperties(t.prototype,r),t}(I),Ai=function(s){function t(t){s.call(this,Ti,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),"number"==typeof t&&(t={threshold:t}),t=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:m.FILTER_RESOLUTION},t),this.bloomScale=t.bloomScale,this.brightness=t.brightness;var e=t.kernels,r=t.blur,n=t.quality,i=t.pixelSize,o=t.resolution;this._extractFilter=new wi(t.threshold),this._extractFilter.resolution=o,this._blurFilter=e?new bi(e):new bi(r,n),this.pixelSize=i,this.resolution=o}s&&(t.__proto__=s);var e={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.apply=function(t,e,r,n,i){var o=t.getFilterTexture(),s=(this._extractFilter.apply(t,e,o,1,i),t.getFilterTexture());this._blurFilter.apply(t,o,s,1,i),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=s,t.applyFilter(this,e,r,n),t.returnFilterTexture(s),t.returnFilterTexture(o)},e.resolution.get=function(){return this._resolution},e.resolution.set=function(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},e.threshold.get=function(){return this._extractFilter.threshold},e.threshold.set=function(t){this._extractFilter.threshold=t},e.kernels.get=function(){return this._blurFilter.kernels},e.kernels.set=function(t){this._blurFilter.kernels=t},e.blur.get=function(){return this._blurFilter.blur},e.blur.set=function(t){this._blurFilter.blur=t},e.quality.get=function(){return this._blurFilter.quality},e.quality.set=function(t){this._blurFilter.quality=t},e.pixelSize.get=function(){return this._blurFilter.pixelSize},e.pixelSize.set=function(t){this._blurFilter.pixelSize=t},Object.defineProperties(t.prototype,e),t}(I),Ci=function(e){function t(t){void 0===t&&(t=8),e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n\n    if (clamp(p.x, 0.0, 4.0) == p.x)\n    {\n        if (clamp(p.y, 0.0, 4.0) == p.y)\n        {\n            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n        }\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}\n"),this.size=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.pixelSize},r.size.set=function(t){this.uniforms.pixelSize=t},Object.defineProperties(t.prototype,r),t}(I),Si=function(e){function t(t){void 0===t&&(t={}),e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),t=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},t),this.rotation=t.rotation,this.thickness=t.thickness,this.lightColor=t.lightColor,this.lightAlpha=t.lightAlpha,this.shadowColor=t.shadowColor,this.shadowAlpha=t.shadowAlpha,this.padding=1}e&&(t.__proto__=e);var r={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},r.rotation.get=function(){return this._angle/Rt},r.rotation.set=function(t){this._angle=t*Rt,this._updateTransform()},r.thickness.get=function(){return this._thickness},r.thickness.set=function(t){this._thickness=t,this._updateTransform()},r.lightColor.get=function(){return ct(this.uniforms.lightColor)},r.lightColor.set=function(t){ht(t,this.uniforms.lightColor)},r.lightAlpha.get=function(){return this.uniforms.lightAlpha},r.lightAlpha.set=function(t){this.uniforms.lightAlpha=t},r.shadowColor.get=function(){return ct(this.uniforms.shadowColor)},r.shadowColor.set=function(t){ht(t,this.uniforms.shadowColor)},r.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},r.shadowAlpha.set=function(t){this.uniforms.shadowAlpha=t},Object.defineProperties(t.prototype,r),t}(I),Ei=function(t,e){return(Ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};Ei(Pi=Ri,e=Oi=I),Pi.prototype=null===e?Object.create(e):(Ii.prototype=e.prototype,new Ii),Object.defineProperty(Ri.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0});var Oi,Pi,Mi=Ri;function Ii(){this.constructor=Pi}function Ri(t){void 0===t&&(t=1);var e=Oi.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return e.alpha=t,e}
/*!
 * @pixi/filter-blur - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Fi=function(t,e){return(Fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Di(t,e){function r(){this.constructor=t}Fi(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Li="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";var L,Ni,ki={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Bi=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");(L={NORMAL:0,0:"NORMAL",ADD:1,1:"ADD",MULTIPLY:2,2:"MULTIPLY",SCREEN:3,3:"SCREEN",OVERLAY:4,4:"OVERLAY",DARKEN:5,5:"DARKEN",LIGHTEN:6,6:"LIGHTEN",COLOR_DODGE:7,7:"COLOR_DODGE",COLOR_BURN:8,8:"COLOR_BURN",HARD_LIGHT:9,9:"HARD_LIGHT",SOFT_LIGHT:10,10:"SOFT_LIGHT",DIFFERENCE:11,11:"DIFFERENCE",EXCLUSION:12,12:"EXCLUSION",HUE:13,13:"HUE",SATURATION:14,14:"SATURATION",COLOR:15,15:"COLOR",LUMINOSITY:16,16:"LUMINOSITY",NORMAL_NPM:17,17:"NORMAL_NPM",ADD_NPM:18,18:"ADD_NPM",SCREEN_NPM:19,19:"SCREEN_NPM",NONE:20,20:"NONE",SRC_OVER:0})[0]="SRC_OVER",L[L.SRC_IN=21]="SRC_IN",L[L.SRC_OUT=22]="SRC_OUT",L[L.SRC_ATOP=23]="SRC_ATOP",L[L.DST_OVER=24]="DST_OVER",L[L.DST_IN=25]="DST_IN",L[L.DST_OUT=26]="DST_OUT",L[L.DST_ATOP=27]="DST_ATOP",L[L.ERASE=26]="ERASE",L[L.SUBTRACT=28]="SUBTRACT",L[L.XOR=29]="XOR",(o={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",o[o.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",o[o.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(t=Ni=Ni||{})[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT";Di(ji,Ui=I),ji.prototype.apply=function(t,e,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{var i=t.getFilterTexture(),o=t.renderer,s=e,a=i;this.state.blend=!1,t.applyFilter(this,s,a,Ni.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(s,Ni.BLIT);var l=this.uniforms.uSampler=a,a=s,s=l;o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,n),t.returnFilterTexture(i)}},Object.defineProperty(ji.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(ji.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0});var Ui,zi=ji;function ji(t,e,r,n,i){void 0===e&&(e=8),void 0===r&&(r=4),void 0===n&&(n=m.FILTER_RESOLUTION);var o=this,s=function(t,e){for(var r=Math.ceil(t/2),n=Li,i="",o=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);",s=0;s<t;s++)i=i+o.replace("%index%",s.toString()).replace("%sampleIndex%",s-(r-1)+".0")+"\n";return n=(n=n.replace("%blur%",i)).replace("%size%",t.toString())}(i=void 0===i?5:i,t),i=function(t){for(var e=ki[t],r=e.length,n=Bi,i="",o=0;o<t;o++)var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString()),a=o,i=i+(s=s.replace("%value%",e[a=r<=o?t-o-1:a].toString()))+"\n";return n=(n=n.replace("%blur%",i)).replace("%size%",t.toString())}(i);return(o=Ui.call(this,s,i)||this).horizontal=t,o.resolution=n,o._quality=0,o.quality=r,o.blur=e,o}var Gi;
/*!
 * @pixi/filter-bloom - v3.2.0
 * Compiled Wed, 23 Dec 2020 00:29:02 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Di(Vi,Gi=I),Vi.prototype.apply=function(t,e,r,n){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);i&&o?(i=t.getFilterTexture(),this.blurXFilter.apply(t,e,i,Ni.CLEAR),this.blurYFilter.apply(t,i,r,n),t.returnFilterTexture(i)):(o?this.blurYFilter:this.blurXFilter).apply(t,e,r,n)},Vi.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(Vi.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(Vi.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(Vi.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(Vi.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(Vi.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Vi.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0});function Vi(t,e,r,n){void 0===t&&(t=8),void 0===e&&(e=4),void 0===r&&(r=m.FILTER_RESOLUTION),void 0===n&&(n=5);var i=Gi.call(this)||this;return i.blurXFilter=new zi(!0,t,e,r,n),i.blurYFilter=new zi(!1,t,e,r,n),i.resolution=r,i.quality=e,i.blur=t,i.repeatEdgePixels=!1,i}var Xi=function(s){function t(t,e,r,n){var i,o;void 0===t&&(t=2),void 0===e&&(e=4),void 0===r&&(r=m.FILTER_RESOLUTION),void 0===n&&(n=5),s.call(this),"number"==typeof t?o=i=t:t instanceof g?(i=t.x,o=t.y):Array.isArray(t)&&(i=t[0],o=t[1]),this.blurXFilter=new zi(!0,i,e,r,n),this.blurYFilter=new zi(!1,o,e,r,n),this.blurYFilter.blendMode=c.SCREEN,this.defaultFilter=new Mi}s&&(t.__proto__=s);var e={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.apply=function(t,e,r,n){var i=t.getFilterTexture();this.defaultFilter.apply(t,e,r,n),this.blurXFilter.apply(t,e,i),this.blurYFilter.apply(t,i,r,0),t.returnFilterTexture(i)},e.blur.get=function(){return this.blurXFilter.blur},e.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t},e.blurX.get=function(){return this.blurXFilter.blur},e.blurX.set=function(t){this.blurXFilter.blur=t},e.blurY.get=function(){return this.blurYFilter.blur},e.blurY.set=function(t){this.blurYFilter.blur=t},Object.defineProperties(t.prototype,e),t}(I),Hi=function(i){function t(t){var e,r,n;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),"object"!=typeof t&&(e=arguments[0],r=arguments[1],n=arguments[2],t={},void 0!==e&&(t.center=e),void 0!==r&&(t.radius=r),void 0!==n&&(t.strength=n)),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{center:[.5,.5],radius:100,strength:1},t)}i&&(t.__proto__=i);var e={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,t.applyFilter(this,e,r,n)},e.radius.get=function(){return this.uniforms.radius},e.radius.set=function(t){this.uniforms.radius=t},e.strength.get=function(){return this.uniforms.strength},e.strength.set=function(t){this.uniforms.strength=t},e.center.get=function(){return this.uniforms.center},e.center.set=function(t){this.uniforms.center=t},Object.defineProperties(t.prototype,e),t}(I),Wi=function(n){function t(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D colorMap;\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    vec4 adjusted;\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n        float innerWidth = _size - 1.0;\n        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);\n        float zSlice1 = min(zSlice0 + 1.0, innerWidth);\n        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n        float s0 = xOffset + (zSlice0 * _sliceSize);\n        float s1 = xOffset + (zSlice1 * _sliceSize);\n        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);\n        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));\n        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));\n        float zOffset = fract(color.b * innerWidth);\n        adjusted = mix(slice0Color, slice1Color, zOffset);\n\n        color.rgb *= color.a;\n    }\n    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);\n\n}"),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=e,this.mix=r,this.colorMap=t}n&&(t.__proto__=n);var e={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms._mix=this.mix,t.applyFilter(this,e,r,n)},e.colorSize.get=function(){return this._size},e.colorMap.get=function(){return this._colorMap},e.colorMap.set=function(t){(t=t instanceof je?t:je.from(t))&&t.baseTexture&&(t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=!1,this._size=t.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=t),this._colorMap=t},e.nearest.get=function(){return this._nearest},e.nearest.set=function(t){this._nearest=t,this._scaleMode=t?Q.NEAREST:Q.LINEAR;t=this._colorMap;t&&t.baseTexture&&(t.baseTexture._glTextures={},t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=!1,t._updateID++,t.baseTexture.emit("update",t.baseTexture))},t.prototype.updateColorMap=function(){var t=this._colorMap;t&&t.baseTexture&&(t._updateID++,t.baseTexture.emit("update",t.baseTexture),this.colorMap=t)},t.prototype.destroy=function(t){this._colorMap&&this._colorMap.destroy(t),n.prototype.destroy.call(this)},Object.defineProperties(t.prototype,e),t}(I),Yi=function(e){function t(t){void 0===t&&(t=0),e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorOverlay = color * currentColor.a;\n    gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n}\n"),this.uniforms.color=new Float32Array(3),this.color=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={color:{configurable:!0}};return r.color.set=function(t){var e=this.uniforms.color;"number"==typeof t?(ht(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._color=ct(e))},r.color.get=function(){return this._color},Object.defineProperties(t.prototype,r),t}(I),qi=function(n){function t(t,e,r){void 0===t&&(t=16711680),void 0===e&&(e=0),void 0===r&&(r=.4),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n"),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=t,this.newColor=e,this.epsilon=r}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return e.originalColor.set=function(t){var e=this.uniforms.originalColor;"number"==typeof t?(ht(t,e),this._originalColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._originalColor=ct(e))},e.originalColor.get=function(){return this._originalColor},e.newColor.set=function(t){var e=this.uniforms.newColor;"number"==typeof t?(ht(t,e),this._newColor=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._newColor=ct(e))},e.newColor.get=function(){return this._newColor},e.epsilon.set=function(t){this.uniforms.epsilon=t},e.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(t.prototype,e),t}(I),Ki=function(n){function t(t,e,r){void 0===e&&(e=200),void 0===r&&(r=200),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n"),this.uniforms.texelSize=new Float32Array(2),this.uniforms.matrix=new Float32Array(9),void 0!==t&&(this.matrix=t),this.width=e,this.height=r}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.matrix.get=function(){return this.uniforms.matrix},e.matrix.set=function(t){var r=this;t.forEach(function(t,e){return r.uniforms.matrix[e]=t})},e.width.get=function(){return 1/this.uniforms.texelSize[0]},e.width.set=function(t){this.uniforms.texelSize[0]=1/t},e.height.get=function(){return 1/this.uniforms.texelSize[1]},e.height.set=function(t){this.uniforms.texelSize[1]=1/t},Object.defineProperties(t.prototype,e),t}(I),Zi=function(t){function e(){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(I),Qi=function(e){function t(t){e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy - vec2(0.5, 0.5)) * filterArea.xy / dimensions;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},t)}e&&(t.__proto__=e);var r={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,e,r,n)},r.curvature.set=function(t){this.uniforms.curvature=t},r.curvature.get=function(){return this.uniforms.curvature},r.lineWidth.set=function(t){this.uniforms.lineWidth=t},r.lineWidth.get=function(){return this.uniforms.lineWidth},r.lineContrast.set=function(t){this.uniforms.lineContrast=t},r.lineContrast.get=function(){return this.uniforms.lineContrast},r.verticalLine.set=function(t){this.uniforms.verticalLine=t},r.verticalLine.get=function(){return this.uniforms.verticalLine},r.noise.set=function(t){this.uniforms.noise=t},r.noise.get=function(){return this.uniforms.noise},r.noiseSize.set=function(t){this.uniforms.noiseSize=t},r.noiseSize.get=function(){return this.uniforms.noiseSize},r.vignetting.set=function(t){this.uniforms.vignetting=t},r.vignetting.get=function(){return this.uniforms.vignetting},r.vignettingAlpha.set=function(t){this.uniforms.vignettingAlpha=t},r.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},r.vignettingBlur.set=function(t){this.uniforms.vignettingBlur=t},r.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(t.prototype,r),t}(I),$i=function(r){function t(t,e){void 0===t&&(t=1),void 0===e&&(e=5),r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n"),this.scale=t,this.angle=e}r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t;var e={scale:{configurable:!0},angle:{configurable:!0}};return e.scale.get=function(){return this.uniforms.scale},e.scale.set=function(t){this.uniforms.scale=t},e.angle.get=function(){return this.uniforms.angle},e.angle.set=function(t){this.uniforms.angle=t},Object.defineProperties(t.prototype,e),t}(I),Ji=function(s){function t(t){t&&t.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),t={rotation:t},void 0!==arguments[1]&&(t.distance=arguments[1]),void 0!==arguments[2]&&(t.blur=arguments[2]),void 0!==arguments[3]&&(t.color=arguments[3]),void 0!==arguments[4]&&(t.alpha=arguments[4])),t=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:m.FILTER_RESOLUTION},t),s.call(this);var e=t.kernels,r=t.blur,n=t.quality,i=t.pixelSize,o=t.resolution,e=(this._tintFilter=new s("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=new g,this._tintFilter.resolution=o,this._blurFilter=e?new bi(e):new bi(r,n),this.pixelSize=i,this.resolution=o,t.shadowOnly),r=t.rotation,n=t.distance,i=t.alpha,o=t.color;this.shadowOnly=e,this.rotation=r,this.distance=n,this.alpha=i,this.color=o,this._updatePadding()}s&&(t.__proto__=s);var e={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.apply=function(t,e,r,n){var i=t.getFilterTexture();this._tintFilter.apply(t,e,i,1),this._blurFilter.apply(t,i,r,n),!0!==this.shadowOnly&&t.applyFilter(this,e,r,0),t.returnFilterTexture(i)},t.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},t.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},e.resolution.get=function(){return this._resolution},e.resolution.set=function(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},e.distance.get=function(){return this._distance},e.distance.set=function(t){this._distance=t,this._updatePadding(),this._updateShift()},e.rotation.get=function(){return this.angle/Rt},e.rotation.set=function(t){this.angle=t*Rt,this._updateShift()},e.alpha.get=function(){return this._tintFilter.uniforms.alpha},e.alpha.set=function(t){this._tintFilter.uniforms.alpha=t},e.color.get=function(){return ct(this._tintFilter.uniforms.color)},e.color.set=function(t){ht(t,this._tintFilter.uniforms.color)},e.kernels.get=function(){return this._blurFilter.kernels},e.kernels.set=function(t){this._blurFilter.kernels=t},e.blur.get=function(){return this._blurFilter.blur},e.blur.set=function(t){this._blurFilter.blur=t,this._updatePadding()},e.quality.get=function(){return this._blurFilter.quality},e.quality.set=function(t){this._blurFilter.quality=t},e.pixelSize.get=function(){return this._blurFilter.pixelSize},e.pixelSize.set=function(t){this._blurFilter.pixelSize=t},Object.defineProperties(t.prototype,e),t}(I),to=function(e){function t(t){void 0===t&&(t=5),e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n"),this.strength=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={strength:{configurable:!0}};return r.strength.get=function(){return this.uniforms.strength},r.strength.set=function(t){this.uniforms.strength=t},Object.defineProperties(t.prototype,r),t}(I),eo=function(e){function t(t){void 0===t&&(t={}),e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),t=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},t),this.direction=t.direction,this.red=t.red,this.green=t.green,this.blue=t.blue,this.offset=t.offset,this.fillMode=t.fillMode,this.average=t.average,this.seed=t.seed,this.minSize=t.minSize,this.sampleSize=t.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=je.from(this._canvas,{scaleMode:Q.NEAREST}),this._slices=0,this.slices=t.slices}e&&(t.__proto__=e);var r={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(t,e,r,n){var i=e.filterFrame.width,o=e.filterFrame.height;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/i,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,r,n)},t.prototype._randomizeSizes=function(){var t=this._sizes,e=this._slices-1,r=this.sampleSize,n=Math.min(this.minSize/r,.9/this._slices);if(this.average){for(var i=this._slices,o=1,s=0;s<e;s++){var a=Math.max(o/(i-s)*(1-.6*Math.random()),n);o-=t[s]=a}t[e]=o}else{for(var u=1,l=Math.sqrt(1/this._slices),h=0;h<e;h++){var c=Math.max(l*u*Math.random(),n);u-=t[h]=c}t[e]=u}this.shuffle()},t.prototype.shuffle=function(){for(var t=this._sizes,e=this._slices-1;0<e;e--){var r=Math.random()*e>>0,n=t[e];t[e]=t[r],t[r]=n}},t.prototype._randomizeOffsets=function(){for(var t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)},t.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},t.prototype.redraw=function(){for(var t=this.sampleSize,e=this.texture,r=this._canvas.getContext("2d"),n=(r.clearRect(0,0,8,t),0),i=0;i<this._slices;i++){var o=Math.floor(256*this._offsets[i]),s=this._sizes[i]*t;r.fillStyle="rgba("+(0<o?o:0)+", "+(o<0?-o:0)+", 0, 1)",r.fillRect(0,n>>0,t,1+s>>0),n+=s}e.baseTexture.update(),this.uniforms.displacementMap=e},r.sizes.set=function(t){for(var e=Math.min(this._slices,t.length),r=0;r<e;r++)this._sizes[r]=t[r]},r.sizes.get=function(){return this._sizes},r.offsets.set=function(t){for(var e=Math.min(this._slices,t.length),r=0;r<e;r++)this._offsets[r]=t[r]},r.offsets.get=function(){return this._offsets},r.slices.get=function(){return this._slices},r.slices.set=function(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())},r.direction.get=function(){return this._direction},r.direction.set=function(t){this._direction!==t&&(t=(this._direction=t)*Rt,this.uniforms.sinDir=Math.sin(t),this.uniforms.cosDir=Math.cos(t))},r.red.get=function(){return this.uniforms.red},r.red.set=function(t){this.uniforms.red=t},r.green.get=function(){return this.uniforms.green},r.green.set=function(t){this.uniforms.green=t},r.blue.get=function(){return this.uniforms.blue},r.blue.set=function(t){this.uniforms.blue=t},t.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(t.prototype,r),t}(I),ro=(eo.TRANSPARENT=0,eo.ORIGINAL=1,eo.LOOP=2,eo.CLAMP=3,eo.MIRROR=4,function(s){function a(t){var t=Object.assign({},a.defaults,t),e=t.distance,r=t.outerStrength,n=t.innerStrength,i=t.color,o=t.knockout,t=t.quality,e=Math.round(e);s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,""+(1/t/e).toFixed(7)).replace(/__DIST__/gi,e.toFixed(0)+".0")),this.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(this,{color:i,outerStrength:r,innerStrength:n,padding:e,knockout:o})}s&&(a.__proto__=s),(a.prototype=Object.create(s&&s.prototype)).constructor=a;var t={color:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0},knockout:{configurable:!0}};return t.color.get=function(){return ct(this.uniforms.glowColor)},t.color.set=function(t){ht(t,this.uniforms.glowColor)},t.outerStrength.get=function(){return this.uniforms.outerStrength},t.outerStrength.set=function(t){this.uniforms.outerStrength=t},t.innerStrength.get=function(){return this.uniforms.innerStrength},t.innerStrength.set=function(t){this.uniforms.innerStrength=t},t.knockout.get=function(){return this.uniforms.knockout},t.knockout.set=function(t){this.uniforms.knockout=t},Object.defineProperties(a.prototype,t),a}(I)),no=(ro.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},function(e){function t(t){e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n")),this.uniforms.dimensions=new Float32Array(2),"number"==typeof t&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),t={angle:t},void 0!==arguments[1]&&(t.gain=arguments[1]),void 0!==arguments[2]&&(t.lacunarity=arguments[2]),void 0!==arguments[3]&&(t.time=arguments[3]),void 0!==arguments[4]&&(t.alpha=arguments[4])),t=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},t),this._angleLight=new g,this.angle=t.angle,this.gain=t.gain,this.lacunarity=t.lacunarity,this.alpha=t.alpha,this.parallel=t.parallel,this.center=t.center,this.time=t.time}e&&(t.__proto__=e);var r={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0},alpha:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(t,e,r,n){var i=e.filterFrame,o=i.width,i=i.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=i,this.uniforms.aspect=i/o,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,r,n)},r.angle.get=function(){return this._angle},r.angle.set=function(t){t=(this._angle=t)*Rt;this._angleLight.x=Math.cos(t),this._angleLight.y=Math.sin(t)},r.gain.get=function(){return this.uniforms.gain},r.gain.set=function(t){this.uniforms.gain=t},r.lacunarity.get=function(){return this.uniforms.lacunarity},r.lacunarity.set=function(t){this.uniforms.lacunarity=t},r.alpha.get=function(){return this.uniforms.alpha},r.alpha.set=function(t){this.uniforms.alpha=t},Object.defineProperties(t.prototype,r),t}(I)),io=function(n){function t(t,e,r){void 0===t&&(t=[0,0]),void 0===e&&(e=5),void 0===r&&(r=0),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new Dt(this.velocityChanged,this),this.velocity=t,this.kernelSize=e,this.offset=r}n&&(t.__proto__=n);var e={velocity:{configurable:!0},offset:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.apply=function(t,e,r,n){var i=this.velocity,o=i.x,i=i.y;this.uniforms.uKernelSize=0!==o||0!==i?this.kernelSize:0,t.applyFilter(this,e,r,n)},e.velocity.set=function(t){Array.isArray(t)?this._velocity.set(t[0],t[1]):(t instanceof g||t instanceof Dt)&&this._velocity.copyFrom(t)},e.velocity.get=function(){return this._velocity},t.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},e.offset.set=function(t){this.uniforms.uOffset=t},e.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(t.prototype,e),t}(I),oo=function(n){function t(t,e,r){void 0===e&&(e=.05),r=(r=void 0===r?null:r)||t.length,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,r)),this.epsilon=e,this._maxColors=r,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*r),this.uniforms.targetColors=new Float32Array(3*r),this.replacements=t}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return e.replacements.set=function(t){var e=this.uniforms.originalColors,r=this.uniforms.targetColors,n=t.length;if(n>this._maxColors)throw"Length of replacements ("+n+") exceeds the maximum colors length ("+this._maxColors+")";e[3*n]=-1;for(var i=0;i<n;i++){var o=t[i],s=o[0],s=("number"==typeof s?s=ht(s):o[0]=ct(s),e[3*i]=s[0],e[3*i+1]=s[1],e[3*i+2]=s[2],o[1]);"number"==typeof s?s=ht(s):o[1]=ct(s),r[3*i]=s[0],r[3*i+1]=s[1],r[3*i+2]=s[2]}this._replacements=t},e.replacements.get=function(){return this._replacements},t.prototype.refresh=function(){this.replacements=this._replacements},e.maxColors.get=function(){return this._maxColors},e.epsilon.set=function(t){this.uniforms.epsilon=t},e.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(t.prototype,e),t}(I),so=function(r){function t(t,e){void 0===e&&(e=0),r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),"number"==typeof t?(this.seed=t,t=null):this.seed=e,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},t)}r&&(t.__proto__=r);var e={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,this.uniforms.seed=this.seed,t.applyFilter(this,e,r,n)},e.sepia.set=function(t){this.uniforms.sepia=t},e.sepia.get=function(){return this.uniforms.sepia},e.noise.set=function(t){this.uniforms.noise=t},e.noise.get=function(){return this.uniforms.noise},e.noiseSize.set=function(t){this.uniforms.noiseSize=t},e.noiseSize.get=function(){return this.uniforms.noiseSize},e.scratch.set=function(t){this.uniforms.scratch=t},e.scratch.get=function(){return this.uniforms.scratch},e.scratchDensity.set=function(t){this.uniforms.scratchDensity=t},e.scratchDensity.get=function(){return this.uniforms.scratchDensity},e.scratchWidth.set=function(t){this.uniforms.scratchWidth=t},e.scratchWidth.get=function(){return this.uniforms.scratchWidth},e.vignetting.set=function(t){this.uniforms.vignetting=t},e.vignetting.get=function(){return this.uniforms.vignetting},e.vignettingAlpha.set=function(t){this.uniforms.vignettingAlpha=t},e.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},e.vignettingBlur.set=function(t){this.uniforms.vignettingBlur=t},e.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(t.prototype,e),t}(I),ao=function(i){function o(t,e,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=.1);var n=Math.max(r*o.MAX_SAMPLES,o.MIN_SAMPLES),n=(2*Math.PI/n).toFixed(7);i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,n)),this.uniforms.thickness=new Float32Array([0,0]),this.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(this,{thickness:t,color:e,quality:r})}i&&(o.__proto__=i);var t={color:{configurable:!0},thickness:{configurable:!0}};return((o.prototype=Object.create(i&&i.prototype)).constructor=o).prototype.apply=function(t,e,r,n){this.uniforms.thickness[0]=this._thickness/e._frame.width,this.uniforms.thickness[1]=this._thickness/e._frame.height,t.applyFilter(this,e,r,n)},t.color.get=function(){return ct(this.uniforms.outlineColor)},t.color.set=function(t){ht(t,this.uniforms.outlineColor)},t.thickness.get=function(){return this._thickness},t.thickness.set=function(t){this._thickness=t,this.padding=t},Object.defineProperties(o.prototype,t),o}(I),uo=(ao.MIN_SAMPLES=1,ao.MAX_SAMPLES=100,function(e){function t(t){void 0===t&&(t=10),e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n"),this.size=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.size},r.size.set=function(t){this.uniforms.size=t="number"==typeof t?[t,t]:t},Object.defineProperties(t.prototype,r),t}(I)),lo=function(i){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=[0,0]),void 0===r&&(r=5),void 0===n&&(n=-1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this._angle=0,this.angle=t,this.center=e,this.kernelSize=r,this.radius=n}i&&(t.__proto__=i);var e={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,t.applyFilter(this,e,r,n)},e.angle.set=function(t){this._angle=t,this.uniforms.uRadian=t*Math.PI/180},e.angle.get=function(){return this._angle},e.center.get=function(){return this.uniforms.uCenter},e.center.set=function(t){this.uniforms.uCenter=t},e.radius.get=function(){return this.uniforms.uRadius},e.radius.set=function(t){this.uniforms.uRadius=t=t<0||t===1/0?-1:t},Object.defineProperties(t.prototype,e),t}(I),ho=function(e){function t(t){e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},t)}e&&(t.__proto__=e);var r={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,this.uniforms.time=this.time,t.applyFilter(this,e,r,n)},r.mirror.set=function(t){this.uniforms.mirror=t},r.mirror.get=function(){return this.uniforms.mirror},r.boundary.set=function(t){this.uniforms.boundary=t},r.boundary.get=function(){return this.uniforms.boundary},r.amplitude.set=function(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]},r.amplitude.get=function(){return this.uniforms.amplitude},r.waveLength.set=function(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]},r.waveLength.get=function(){return this.uniforms.waveLength},r.alpha.set=function(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]},r.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(t.prototype,r),t}(I),co=function(n){function t(t,e,r){void 0===t&&(t=[-10,0]),void 0===e&&(e=[0,10]),void 0===r&&(r=[0,0]),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n"),this.red=t,this.green=e,this.blue=r}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return e.red.get=function(){return this.uniforms.red},e.red.set=function(t){this.uniforms.red=t},e.green.get=function(){return this.uniforms.green},e.green.set=function(t){this.uniforms.green=t},e.blue.get=function(){return this.uniforms.blue},e.blue.set=function(t){this.uniforms.blue=t},Object.defineProperties(t.prototype,e),t}(I),fo=function(n){function t(t,e,r){void 0===t&&(t=[0,0]),void 0===e&&(e={}),void 0===r&&(r=0),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=t,Array.isArray(e)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),e={}),e=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},e),this.amplitude=e.amplitude,this.wavelength=e.wavelength,this.brightness=e.brightness,this.speed=e.speed,this.radius=e.radius,this.time=r}n&&(t.__proto__=n);var e={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.time=this.time,t.applyFilter(this,e,r,n)},e.center.get=function(){return this.uniforms.center},e.center.set=function(t){this.uniforms.center=t},e.amplitude.get=function(){return this.uniforms.amplitude},e.amplitude.set=function(t){this.uniforms.amplitude=t},e.wavelength.get=function(){return this.uniforms.wavelength},e.wavelength.set=function(t){this.uniforms.wavelength=t},e.brightness.get=function(){return this.uniforms.brightness},e.brightness.set=function(t){this.uniforms.brightness=t},e.speed.get=function(){return this.uniforms.speed},e.speed.set=function(t){this.uniforms.speed=t},e.radius.get=function(){return this.uniforms.radius},e.radius.set=function(t){this.uniforms.radius=t},Object.defineProperties(t.prototype,e),t}(I),po=function(n){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=1),n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,r]),this.texture=t,this.color=e}n&&(t.__proto__=n);var e={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.apply=function(t,e,r,n){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,t.applyFilter(this,e,r,n)},e.texture.get=function(){return this.uniforms.uLightmap},e.texture.set=function(t){this.uniforms.uLightmap=t},e.color.set=function(t){var e=this.uniforms.ambientColor;"number"==typeof t?(ht(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._color=ct(e))},e.color.get=function(){return this._color},e.alpha.get=function(){return this.uniforms.ambientColor[3]},e.alpha.set=function(t){this.uniforms.ambientColor[3]=t},Object.defineProperties(t.prototype,e),t}(I),mo=function(i){function t(t,e,r,n){void 0===t&&(t=100),void 0===e&&(e=600),void 0===r&&(r=null),void 0===n&&(n=null),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=t,this.uniforms.gradientBlur=e,this.uniforms.start=r||new g(0,window.innerHeight/2),this.uniforms.end=n||new g(600,window.innerHeight/2),this.uniforms.delta=new g(30,30),this.uniforms.texSize=new g(window.innerWidth,window.innerHeight),this.updateDelta()}i&&(t.__proto__=i);var e={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},e.blur.get=function(){return this.uniforms.blur},e.blur.set=function(t){this.uniforms.blur=t},e.gradientBlur.get=function(){return this.uniforms.gradientBlur},e.gradientBlur.set=function(t){this.uniforms.gradientBlur=t},e.start.get=function(){return this.uniforms.start},e.start.set=function(t){this.uniforms.start=t,this.updateDelta()},e.end.get=function(){return this.uniforms.end},e.end.set=function(t){this.uniforms.end=t,this.updateDelta()},Object.defineProperties(t.prototype,e),t}(I),_o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.x=t/r,this.uniforms.delta.y=e/r},e}(mo),vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.x=-e/r,this.uniforms.delta.y=t/r},e}(mo),go=function(i){function t(t,e,r,n){void 0===t&&(t=100),void 0===e&&(e=600),void 0===r&&(r=null),void 0===n&&(n=null),i.call(this),this.tiltShiftXFilter=new _o(t,e,r,n),this.tiltShiftYFilter=new vo(t,e,r,n)}i&&(t.__proto__=i);var e={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.apply=function(t,e,r){var n=t.getFilterTexture();this.tiltShiftXFilter.apply(t,e,n,1),this.tiltShiftYFilter.apply(t,n,r),t.returnFilterTexture(n)},e.blur.get=function(){return this.tiltShiftXFilter.blur},e.blur.set=function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t},e.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},e.gradientBlur.set=function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t},e.start.get=function(){return this.tiltShiftXFilter.start},e.start.set=function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t},e.end.get=function(){return this.tiltShiftXFilter.end},e.end.set=function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t},Object.defineProperties(t.prototype,e),t}(I),yo=function(e){function t(t){e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),"number"==typeof t&&(t={radius:t},void 0!==arguments[1]&&(t.angle=arguments[1]),void 0!==arguments[2]&&(t.padding=arguments[2])),Object.assign(this,{radius:200,angle:4,padding:20,offset:new g},t)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return r.offset.get=function(){return this.uniforms.offset},r.offset.set=function(t){this.uniforms.offset=t},r.radius.get=function(){return this.uniforms.radius},r.radius.set=function(t){this.uniforms.radius=t},r.angle.get=function(){return this.uniforms.angle},r.angle.set=function(t){this.uniforms.angle=t},Object.defineProperties(t.prototype,r),t}(I),xo=function(o){function t(t){var e,r,n,i;"object"!=typeof t&&(e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],t={},void 0!==e&&(t.strength=e),void 0!==r&&(t.center=r),void 0!==n&&(t.innerRadius=n),void 0!==i&&(t.radius=i)),t=Object.assign({strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},t),o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n".replace("${maxKernelSize}",t.maxKernelSize.toFixed(1))),this.strength=t.strength,this.center=t.center,this.innerRadius=t.innerRadius,this.radius=t.radius}o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t;var e={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return e.center.get=function(){return this.uniforms.uCenter},e.center.set=function(t){this.uniforms.uCenter=t},e.strength.get=function(){return this.uniforms.uStrength},e.strength.set=function(t){this.uniforms.uStrength=t},e.innerRadius.get=function(){return this.uniforms.uInnerRadius},e.innerRadius.set=function(t){this.uniforms.uInnerRadius=t},e.radius.get=function(){return this.uniforms.uRadius},e.radius.set=function(t){this.uniforms.uRadius=t=t<0||t===1/0?-1:t},Object.defineProperties(t.prototype,e),t}(I);
/*!
 * @pixi/filter-bulge-pinch - v3.1.0
 * Compiled Wed, 11 Mar 2020 20:38:18 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */},function(n,t,e){"use strict";function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}
/*!
 * GSAP 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/e.r(t),e.d(t,"gsap",function(){return Qn}),e.d(t,"default",function(){return Qn}),e.d(t,"CSSPlugin",function(){return Zn}),e.d(t,"TweenMax",function(){return $n}),e.d(t,"TweenLite",function(){return q}),e.d(t,"TimelineMax",function(){return Y}),e.d(t,"TimelineLite",function(){return Y}),e.d(t,"Power0",function(){return tn}),e.d(t,"Power1",function(){return en}),e.d(t,"Power2",function(){return rn}),e.d(t,"Power3",function(){return nn}),e.d(t,"Power4",function(){return on}),e.d(t,"Linear",function(){return sn}),e.d(t,"Quad",function(){return an}),e.d(t,"Cubic",function(){return un}),e.d(t,"Quart",function(){return ln}),e.d(t,"Quint",function(){return hn}),e.d(t,"Strong",function(){return cn}),e.d(t,"Elastic",function(){return fn}),e.d(t,"Back",function(){return dn}),e.d(t,"SteppedEase",function(){return pn}),e.d(t,"Bounce",function(){return mn}),e.d(t,"Sine",function(){return _n}),e.d(t,"Expo",function(){return vn}),e.d(t,"Circ",function(){return gn});function L(t){return!1!==t}function i(){return"undefined"!=typeof window}function $(t){return c(t)||G(t)}function u(t){return(de=tt(t,a))&&h}function J(t,e){return!e&&console.warn(t)}function m(t,e){return t&&(a[t]=e)&&de&&(de[t]=e)||a}function _(){return 0}function d(t,e){return(t=t.split(",")).forEach(e)||t}function v(t,e,r,n){_e.length&&Se(),t.render(e,r,n),_e.length&&Se()}function g(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(ce).length<2?e:G(t)?t.trim():t}function y(t){return t}function N(t,e){for(var r in e)r in t||(t[r]=e[r]);return t}function tt(t,e){for(var r in e)t[r]=e[r];return t}function x(t,e){for(var r in e)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=I(e[r])?x(t[r]||(t[r]={}),e[r]):e[r]);return t}function et(t,e){var r,n={};for(r in t)r in e||(n[r]=t[r]);return n}function rt(t){var n,e=t.parent||B,r=t.keyframes?(n=R(t.keyframes),function(t,e){for(var r in e)r in t||"duration"===r&&n||"ease"===r||(t[r]=e[r])}):N;if(L(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent||e._dp;return t}function T(t,e,r,n,i){void 0===r&&(r="_first");var o,s=t[n=void 0===n?"_last":n];if(i)for(o=e[i];s&&s[i]>o;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[n]=e,e._prev=s,e.parent=e._dp=t}function k(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function nt(t){return!t||t._ts&&nt(t.parent)}function w(t){return t._repeat?A(t._tTime,t=t.duration()+t._rDelay)*t:0}function A(t,e){return e=Math.floor(t/=e),t&&e===t?e-1:e}function C(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function S(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=C(t.rawTime(),e),(!e._dur||ht(0,e.totalDuration(),r)-e._tTime>j)&&e.render(r,!0)),Oe(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)0<=r.rawTime()&&r.totalTime(r._tTime),r=r._dp;t._zTime=-j}}function P(t,e,r,n){return e.parent&&k(e),e._start=F((M(r)?r:r||t!==B?l(t,r,e):t._time)+e._delay),e._end=F(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),T(t,e,"_first","_last",t._sort?"_start":0),at(e)||(t._recent=e),n||S(t,e),t}function it(t,e){(a.ScrollTrigger||pe("scrollTrigger",e))&&a.ScrollTrigger.create(e,t)}function ot(t,e,r,n){return jr(t,e),t._initted?!r&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Dt!==p.frame?(_e.push(t),t._lazy=[e,n]):void 0:1}function st(t){return(t=t.parent)&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||st(t))}function at(t){return"isFromStart"===(t=t.data)||"isStart"===t}function ut(t,e,r,n){var i=t._repeat,e=F(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=e/t._dur),t._dur=e,t._tDur=i?i<0?1e10:F(e*(i+1)+t._rDelay*i):e,0<o&&!n?Me(t,t._tTime=t._tDur*o):t.parent&&Pe(t),r||Oe(t.parent,t),t}function E(t){return t instanceof Y?Oe(t):ut(t,t._dur)}function l(t,e,r){var n,i,o,s=t.labels,a=t._recent||Ie,u=t.duration()>=z?a.endTime(!1):t._dur;return G(e)&&(isNaN(e)||e in s)?(i=e.charAt(0),o="%"===e.substr(-1),n=e.indexOf("="),"<"===i||">"===i?(0<=n&&(e=e.replace(/=/,"")),("<"===i?a._start:a.endTime(0<=a._repeat))+(parseFloat(e.substr(1))||0)*(o?(n<0?a:r).totalDuration()/100:1)):n<0?(e in s||(s[e]=u),s[e]):(i=parseFloat(e.charAt(n-1)+e.substr(n+1)),o&&r&&(i=i/100*(R(r)?r[0]:r).totalDuration()),1<n?l(t,e.substr(0,n-1),r)+i:u+i)):null==e?u:+e}function lt(t,e,r){var n,i,o=M(e[1]),s=(o?2:1)+(t<2?0:1),a=e[s];if(o&&(a.duration=e[1]),a.parent=r,t){for(n=a,i=r;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=L(i.vars.inherit)&&i.parent;a.immediateRender=L(n.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return new q(e[0],a,e[1+s])}function ht(t,e,r){return r<t?t:e<r?e:r}function ct(t){if(c(t))return t;var d=I(t)?t:{each:t},p=Ye(d.ease),m=d.from||0,_=parseFloat(d.base)||0,v={},t=0<m&&m<1,g=isNaN(m)||t,y=d.axis,x=m,b=m;return G(m)?x=b={center:.5,edges:.5,end:1}[m]||0:!t&&g&&(x=m[0],b=m[1]),function(t,e,r){var n,i,o,s,a,u,l,h,c=(r||d).length,f=v[c];if(!f){if(!(h="auto"===d.grid?0:(d.grid||[1,z])[1])){for(u=-z;u<(u=r[h++].getBoundingClientRect().left)&&h<c;);h--}for(f=v[c]=[],n=g?Math.min(h,c)*x-.5:m%h,i=h===z?0:g?c*b/h-.5:m/h|0,l=z,a=u=0;a<c;a++)s=a%h-n,o=i-(a/h|0),f[a]=s=y?Math.abs("y"===y?o:s):ee(s*s+o*o),u<s&&(u=s),s<l&&(l=s);"random"===m&&Le(f),f.max=u-l,f.min=l,f.v=c=(parseFloat(d.amount)||parseFloat(d.each)*(c<h?c-1:y?"y"===y?c/h:h:Math.max(h,c/h))||0)*("edges"===m?-1:1),f.b=c<0?_-c:_,f.u=X(d.amount||d.each)||0,p=p&&c<0?We(p):p}return c=(f[t]-f.min)/f.max||0,F(f.b+(p?p(c):c)*f.v)+f.u}}function ft(r){var n=Math.pow(10,((r+"").split(".")[1]||"").length);return function(t){var e=Math.round(parseFloat(t)/r)*r*n;return(e-e%1)/n+(M(t)?0:X(t))}}function dt(u,t){var l,h,e=R(u);return!e&&I(u)&&(l=e=u.radius||z,u.values?(u=H(u.values),(h=!M(u[0]))&&(l*=l)):u=ft(u.increment)),Re(t,e?c(u)?function(t){return h=u(t),Math.abs(h-t)<=l?h:t}:function(t){for(var e,r,n=parseFloat(h?t.x:t),i=parseFloat(h?t.y:0),o=z,s=0,a=u.length;a--;)(e=h?(e=u[a].x-n)*e+(r=u[a].y-i)*r:Math.abs(u[a]-n))<o&&(o=e,s=a);return s=!l||o<=l?u[s]:t,h||s===t||M(t)?s:s+X(t)}:ft(u))}function pt(t,e,r,n){return Re(R(t)?!e:!0===r?!!(r=0):!n,function(){return R(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+.99*r))/r)*r*n)/n})}function mt(e,r,t){return Re(t,function(t){return e[~~r(t)]})}function _t(e,t,r){var n=t-e;return R(e)?mt(e,_t(0,e.length),t):Re(r,function(t){return(n+(t-e)%n)%n+e})}function vt(e,t,r){var n=t-e,i=2*n;return R(e)?mt(e,vt(0,e.length-1),t):Re(r,function(t){return e+(n<(t=(i+(t-e)%i)%i||0)?i-t:t)})}function gt(e,t,r,n,i){var o=t-e,s=n-r;return Re(i,function(t){return r+((t-e)/o*s||0)})}function yt(e,r,t,n){var i=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!i){var o,s,a,u,l,h=G(e),c={};if(!0===t&&(n=1)&&(t=null),h)e={p:e},r={p:r};else if(R(e)&&!R(r)){for(a=[],u=e.length,l=u-2,s=1;s<u;s++)a.push(yt(e[s-1],e[s]));u--,i=function(t){t*=u;var e=Math.min(l,~~t);return a[e](t-e)},t=r}else n||(e=tt(R(e)?[]:{},e));if(!a){for(o in r)Ze.call(c,e,o,"get",r[o]);i=function(t){return tr(t,c),h?e.p:e}}}return Re(t,i)}function xt(t,e,r){var n,i,o,s=t.labels,a=z;for(n in s)(i=s[n]-e)<0==!!r&&i&&a>(i=Math.abs(i))&&(o=n,a=i);return o}function b(t,e,r){var n=t.vars,i=n[e];if(i)e=n[e+"Params"],n=n.callbackScope||t,r&&_e.length&&Se(),e?i.apply(n,e):i.call(n)}function bt(t){return k(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&b(t,"onInterrupt"),t}function Tt(t,e,r){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*f+.5|0}function wt(t,e,r){var n,i,o,s,a="",u=(t+a).match(ze),l=e?"hsla(":"rgba(",h=0;if(!u)return t;if(u=u.map(function(t){return(t=Be(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),r&&(o=Ue(t),(n=r.c).join(a)!==o.c.join(a)))for(s=(i=t.replace(ze,"1").split(ue)).length-1;h<s;h++)a+=i[h]+(~n.indexOf(h)?u.shift()||l+"0,0,0,0)":(o.length?o:u.length?u:r).shift());if(!i)for(s=(i=t.split(ze)).length-1;h<s;h++)a+=i[h]+u[h];return a+i[s]}function At(t){var e=t.join(" ");if(ze.lastIndex=0,ze.test(e))return e=je.test(e),t[1]=wt(t[1],e),t[0]=wt(t[0],e,Ue(t[1])),!0}function Ct(t,e){for(var r,n=t._first;n;)n instanceof Y?Ct(n,e):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===e||(n.timeline?Ct(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next}function St(t,e,r,n){var i,o={easeIn:e,easeOut:r=void 0===r?function(t){return 1-e(1-t)}:r,easeInOut:n=void 0===n?function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2}:n};d(t,function(t){for(var e in W[t]=a[t]=o,W[i=t.toLowerCase()]=r,o)W[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=W[t+"."+e]=o[e]})}function Et(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function Ot(r,t,e){function n(t){return 1===t?1:i*Math.pow(2,-10*t)*ne((t-o)*s)+1}var i=1<=t?t:1,o=(s=(e||(r?.3:.45))/(t<1?t:1))/$t*(Math.asin(1/i)||0),e="out"===r?n:"in"===r?function(t){return 1-n(1-t)}:Et(n),s=$t/s;return e.config=function(t,e){return Ot(r,t,e)},e}function Pt(e,r){function n(t){return t?--t*t*((r+1)*t+r)+1:0}void 0===r&&(r=1.70158);var t="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Et(n);return t.config=function(t){return Pt(e,t)},t}var Mt,B,r,It,Rt,Ft,Dt,Lt,Nt,kt,Bt,Ut,zt,jt,Gt,Vt,Xt,Ht,Wt,Yt,qt,Kt,s,Zt,U={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Qt={duration:.5,overwrite:!1,delay:0},z=1e8,j=1/z,$t=2*Math.PI,Jt=$t/4,te=0,ee=Math.sqrt,re=Math.cos,ne=Math.sin,G=function(t){return"string"==typeof t},c=function(t){return"function"==typeof t},M=function(t){return"number"==typeof t},ie=function(t){return void 0===t},I=function(t){return"object"==typeof t},oe="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},R=Array.isArray,se=/(?:-?\.?\d|\.)+/gi,ae=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ue=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,le=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,he=/[+-]=-?[.\d]+/,ce=/[^,'"\[\]\s]+/gi,fe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,a={},de={},pe=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},me={},_e=[],ve={},V={},ge={},ye=30,xe=[],be="",Te=function(t){var e,r,n=t[0];if(I(n)||c(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(r=xe.length;r--&&!xe[r].targetTest(n););e=xe[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new kr(t[r],e)))||t.splice(r,1);return t},we=function(t){return t._gsap||Te(H(t))[0]._gsap},Ae=function(t,e,r){return(r=t[e])&&c(r)?t[e]():ie(r)&&t.getAttribute&&t.getAttribute(e)||r},D=function(t){return Math.round(1e5*t)/1e5||0},F=function(t){return Math.round(1e7*t)/1e7||0},Ce=function(t,e){var r=e.charAt(0),e=parseFloat(e.substr(2));return t=parseFloat(t),"+"===r?t+e:"-"===r?t-e:"*"===r?t*e:t/e},Se=function(){var t,e,r=_e.length,n=_e.slice(0);for(ve={},t=_e.length=0;t<r;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Ee=function(t,e,r,n){void 0===r&&(r="_first"),void 0===n&&(n="_last");var i=e._prev,o=e._next;i?i._next=o:t[r]===e&&(t[r]=o),o?o._prev=i:t[n]===e&&(t[n]=i),e._next=e._prev=e.parent=null},Oe=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Pe=function(t){return t._end=F(t._start+(t._tDur/Math.abs(t._ts||t._rts||j)||0))},Me=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=F(r._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Pe(t),r._dirty||Oe(r,t)),t},Ie={_start:0,endTime:_,totalDuration:_},Re=function(t,e){return t||0===t?e(t):e},X=function(t,e){return G(t)&&(e=fe.exec(t))?e[1]:""},Fe=[].slice,De=function(t,e){return t&&I(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&I(t[0]))&&!t.nodeType&&t!==r},H=function(t,e,r){return!G(t)||r||!It&&Ge()?R(t)?(n=r,void 0===i&&(i=[]),t.forEach(function(t){return G(t)&&!n||De(t,1)?i.push.apply(i,H(t)):i.push(t)})||i):De(t)?Fe.call(t,0):t?[t]:[]:Fe.call((e||Rt).querySelectorAll(t),0);var n,i},Le=function(t){return t.sort(function(){return.5-Math.random()})},Ne=function(t){for(var e,r,n,i,o=0,s="";~(e=t.indexOf("random(",o));)n=t.indexOf(")",e),i="["===t.charAt(e+7),r=t.substr(e+7,n-e-7).match(i?ce:se),s+=t.substr(o,e-o)+pt(i?r:+r[0],i?0:+r[1],+r[2]||1e-5),o=n+1;return s+t.substr(o,t.length-o)},f=255,ke={aqua:[0,f,f],lime:[0,f,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,f],navy:[0,0,128],white:[f,f,f],olive:[128,128,0],yellow:[f,f,0],orange:[f,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[f,0,0],pink:[f,192,203],cyan:[0,f,f],transparent:[f,f,f,0]},Be=function(t,e,r){var n,i,o,s,a,u,l,h=t?M(t)?[t>>16,t>>8&f,t&f]:0:ke.black;if(!h){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ke[t])h=ke[t];else if("#"===t.charAt(0)){if(9===(t=t.length<6?"#"+(n=t.charAt(1))+n+(i=t.charAt(2))+i+(o=t.charAt(3))+o+(5===t.length?t.charAt(4)+t.charAt(4):""):t).length)return[(h=parseInt(t.substr(1,6),16))>>16,h>>8&f,h&f,parseInt(t.substr(7),16)/255];h=[(t=parseInt(t.substr(1),16))>>16,t>>8&f,t&f]}else if("hsl"===t.substr(0,3))if(h=l=t.match(se),e){if(~t.indexOf("="))return h=t.match(ae),r&&h.length<4&&(h[3]=1),h}else s=+h[0]%360/360,a=+h[1]/100,n=2*(u=+h[2]/100)-(i=u<=.5?u*(a+1):u+a-u*a),3<h.length&&(h[3]*=1),h[0]=Tt(s+1/3,n,i),h[1]=Tt(s,n,i),h[2]=Tt(s-1/3,n,i);else h=t.match(se)||ke.transparent;h=h.map(Number)}return e&&!l&&(n=h[0]/f,i=h[1]/f,o=h[2]/f,u=((t=Math.max(n,i,o))+(e=Math.min(n,i,o)))/2,t===e?s=a=0:(l=t-e,a=.5<u?l/(2-t-e):l/(t+e),s=t===n?(i-o)/l+(i<o?6:0):t===i?(o-n)/l+2:(n-i)/l+4,s*=60),h[0]=~~(s+.5),h[1]=~~(100*a+.5),h[2]=~~(100*u+.5)),r&&h.length<4&&(h[3]=1),h},Ue=function(t){var e=[],r=[],n=-1;return t.split(ze).forEach(function(t){t=t.match(ue)||[];e.push.apply(e,t),r.push(n+=t.length+1)}),e.c=r,e},ze=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ke)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),je=/hsl[a]?\(/,p=(Gt=Date.now,Vt=500,Xt=33,Ht=Gt(),Wt=Ht,qt=Yt=1e3/240,s={time:0,frame:0,tick:function(){qe(!0)},deltaRatio:function(t){return zt/(1e3/(t||60))},wake:function(){Ft&&(!It&&i()&&(r=It=window,Rt=r.document||{},a.gsap=h,(r.gsapVersions||(r.gsapVersions=[])).push(h.version),u(de||r.GreenSockGlobals||!r.gsap&&r||{}),Ut=r.requestAnimationFrame),kt&&s.sleep(),Bt=Ut||function(t){return setTimeout(t,qt-1e3*s.time+1|0)},Nt=1,qe(2))},sleep:function(){(Ut?r.cancelAnimationFrame:clearTimeout)(kt),Nt=0,Bt=_},lagSmoothing:function(t,e){Vt=t||1/j,Xt=Math.min(e,Vt,0)},fps:function(t){Yt=1e3/(t||240),qt=1e3*s.time+Yt},add:function(i,t,e){var o=t?function(t,e,r,n){i(t,e,r,n),s.remove(o)}:i;return s.remove(i),Kt[e?"unshift":"push"](o),Ge(),o},remove:function(t,e){~(e=Kt.indexOf(t))&&Kt.splice(e,1)&&e<=jt&&jt--},_listeners:Kt=[]}),Ge=function(){return!Nt&&p.wake()},W={},Ve=/^[\d.\-M][\d.\-,\s]/,Xe=/["']/g,He=function(t){var e,r,n,i=(t+"").split("("),o=W[i[0]];return o&&1<i.length&&o.config?o.config.apply(null,~t.indexOf("{")?[function(t){for(var e,r,n,i={},o=t.substr(1,t.length-3).split(":"),s=o[0],a=1,u=o.length;a<u;a++)r=o[a],e=a!==u-1?r.lastIndexOf(","):r.length,n=r.substr(0,e),i[s]=isNaN(n)?n.replace(Xe,"").trim():+n,s=r.substr(e+1).trim();return i}(i[1])]:(e=(i=t).indexOf("(")+1,r=i.indexOf(")"),n=i.indexOf("(",e),i.substring(e,~n&&n<r?i.indexOf(")",r+1):r).split(",").map(g))):W._CE&&Ve.test(t)?W._CE("",t):o},We=function(e){return function(t){return 1-e(1-t)}},Ye=function(t,e){return t&&(c(t)?t:W[t]||He(t))||e};function qe(t){var e,r,n,i=Gt()-Wt,o=!0===t;if(Vt<i&&(Ht+=i-Xt),(0<(i=(r=(Wt+=i)-Ht)-qt)||o)&&(n=++s.frame,zt=r-1e3*s.time,s.time=r/=1e3,qt+=i+(Yt<=i?4:Yt-i),e=1),o||(kt=Bt(qe)),e)for(jt=0;jt<Kt.length;jt++)Kt[jt](r,zt,n,t)}function Ke(t){return t<1/2.75?Zt*t*t:t<1/2.75*2?Zt*Math.pow(t-1.5/2.75,2)+.75:t<1/2.75*2.5?Zt*(t-=2.25/2.75)*t+.9375:Zt*Math.pow(t-2.625/2.75,2)+.984375}d("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;St(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},function(t){return 1-Math.pow(1-t,r)},function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2})}),W.Linear.easeNone=W.none=W.Linear.easeIn,St("Elastic",Ot("in"),Ot("out"),Ot()),Zt=7.5625,St("Bounce",function(t){return 1-Ke(1-t)},Ke),St("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),St("Circ",function(t){return-(ee(1-t*t)-1)}),St("Sine",function(t){return 1===t?1:1-re(t*Jt)}),St("Back",Pt("in"),Pt("out"),Pt()),W.SteppedEase=W.steps=a.SteppedEase={config:function(t,e){var r=1/(t=void 0===t?1:t),n=t+(e?0:1),i=e?1:0,o=1-j;return function(t){return((n*ht(0,o,t)|0)+i)*r}}},Qt.ease=W["quad.out"],d("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return be+=t+","+t+"Params,"});function Ze(t,e,r,n,i,o,s,a,u){c(n)&&(n=n(i||0,t,o));var l,i=t[e],o="get"!==r?r:c(i)?u?t[e.indexOf("set")||!c(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():i,r=c(i)?u?Wr:Hr:Xr;if(o!==(n=!G(n)||"="!==(n=~n.indexOf("random(")?Ne(n):n).charAt(1)||!(l=Ce(o,n)+(X(o)||0))&&0!==l?n:l)||Or)return isNaN(o*n)||""===n?(i||e in t||pe(e,n),Ur.call(this,t,e,o,n,r,a||U.stringFilter,u)):(l=new K(this._pt,t,e,+o||0,n-(o||0),"boolean"==typeof i?Zr:Kr,0,r),u&&(l.fp=u),s&&l.modifier(s,this,t),this._pt=l)}function Qe(t,e,r,n,i,o){var s,a,u,l;if(V[t]&&!1!==(s=new V[t]).init(i,s.rawVars?e[t]:zr(e[t],n,i,o,r),r,n,o)&&(r._pt=a=new K(r._pt,i,t,0,1,s.render,s,0,s.priority),r!==Lt))for(u=r._ptLookup[r._targets.indexOf(i)],l=s._props.length;l--;)u[s._props[l]]=a;return s}function $e(t,e,r,n,i){return c(t)?t.call(e,r,n,i):G(t)&&~t.indexOf("random(")?Ne(t):t}function Je(t,e){var r=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+n,r=r._next;n+=e.c}e.set(e.t,e.p,n,e)}function tr(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next}function er(t,e,r,n){for(var i,o=this._pt;o;)i=o._next,o.p===n&&o.modifier(t,e,r),o=i}function rr(t){for(var e,r,n=this._pt;n;)r=n._next,n.p===t&&!n.op||n.op===t?Ee(this,n,"_pt"):n.dep||(e=1),n=r;return!e}function nr(t,e,r,n){n.mSet(t,e,n.m.call(n.tween,r,n.mt),n)}function ir(t,h){return{name:t,rawVars:1,init:function(t,l,e){e._onInit=function(t){var e,r;if(G(l)&&(e={},d(l,function(t){return e[t]=1}),l=e),h){for(r in e={},l)e[r]=h(l[r]);l=e}var n,i,o,s=t,a=l,u=s._targets;for(n in a)for(i=u.length;i--;)(o=(o=s._ptLookup[i][n])&&o.d)&&(o=o._pt?Jr(o,n):o)&&o.modifier&&o.modifier(a[n],s,u[i],n)}}}}function or(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function sr(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function ar(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function ur(t,e){t=e.s+e.c*t,e.set(e.t,e.p,~~(t+(t<0?-.5:.5))+e.u,e)}function lr(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function hr(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function cr(t,e,r){return t.style[e]=r}function fr(t,e,r){return t.style.setProperty(e,r)}function dr(t,e,r){return t._gsap[e]=r}function pr(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r}function mr(t,e,r,n,i){(t=t._gsap).scaleX=t.scaleY=r,t.renderTransform(i,t)}function _r(t,e,r,n,i){(t=t._gsap)[e]=r,t.renderTransform(i,t)}function vr(){yn()&&window.document&&(Pr=window,Mr=Pr.document,Ir=Mr.documentElement,Fr=Pn("div")||{style:{}},Pn("div"),Z=In(Z),On=Z+"Origin",Fr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Lr=!!In("perspective"),Rr=1)}function gr(t){var e,r=Pn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,o=this.style.cssText;if(Ir.appendChild(r),r.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=gr}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),Ir.removeChild(r),this.style.cssText=o,e}function yr(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])}function xr(t,e,r,n){var i;return Rr||vr(),e in En&&"transform"!==e&&~(e=En[e]).indexOf(",")&&(e=e.split(",")[0]),xn[e]&&"transform"!==e?(i=Xn(t,n),i="transformOrigin"!==e?i[e]:i.svg?i.origin:Hn(Q(t,On))+" "+i.zOrigin+"px"):(i=t.style[e])&&"auto"!==i&&!n&&!~(i+"").indexOf("calc(")||(i=Un[e]&&Un[e](t,e,r)||Q(t,e)||Ae(t,e)||("opacity"===e?1:0)),r&&!~(i+"").trim().indexOf(" ")?kn(t,e,i,r)+r:i}function br(t,e,r,n){r&&"none"!==r||((i=(o=In(e,t,1))&&Q(t,o,1))&&i!==r?(e=o,r=i):"borderColor"===e&&(r=Q(t,"borderTopColor")));var i,o,s,a,u,l,h,c,f,d,p=new K(this._pt,t.style,e,0,1,Je),m=0,_=0;if(p.b=r,p.e=n,r+="","auto"===(n+="")&&(t.style[e]=n,n=Q(t,e)||n,t.style[e]=r),At(o=[r,n]),n=o[1],s=(r=o[0]).match(ue)||[],(n.match(ue)||[]).length){for(;c=ue.exec(n);)f=c[0],c=n.substring(m,c.index),u?u=(u+1)%5:"rgba("!==c.substr(-5)&&"hsla("!==c.substr(-5)||(u=1),f!==(l=s[_++]||"")&&(a=parseFloat(l)||0,d=l.substr((a+"").length),"="===f.charAt(1)&&(f=Ce(a,f)+d),h=parseFloat(f),f=f.substr((h+"").length),m=ue.lastIndex-f.length,f||(f=f||U.units[e]||d,m===n.length&&(n+=f,p.e+=f)),d!==f&&(a=kn(t,e,l,f)||0),p._pt={_next:p._pt,p:c||1===_?c:",",s:a,c:h-a,m:u&&u<4||"zIndex"===e?Math.round:0});p.c=m<n.length?n.substring(m,n.length):""}else p.r="display"===e&&"none"===n?hr:lr;return he.test(n)&&(p.e=0),this._pt=p}function Tr(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,n,i,o=e.t,s=o.style,a=e.u,e=o._gsap;if("all"===a||!0===a)s.cssText="",n=1;else for(i=(a=a.split(",")).length;-1<--i;)r=a[i],xn[r]&&(n=1,r="transformOrigin"===r?On:Z),Dn(o,r);n&&(Dn(o,Z),e&&(e.svg&&o.removeAttribute("transform"),Xn(o,1),e.uncache=1))}}function wr(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Ar(t,e,r,n,i,o){var s,a=t._gsap,i=i||Vn(t,!0),u=a.xOrigin||0,l=a.yOrigin||0,h=a.xOffset||0,c=a.yOffset||0,f=i[0],d=i[1],p=i[2],m=i[3],_=i[4],v=i[5],g=e.split(" "),y=parseFloat(g[0])||0,x=parseFloat(g[1])||0;r?i!==zn&&(i=f*m-d*p)&&(s=y*(-d/i)+x*(f/i)-(f*v-d*_)/i,y=y*(m/i)+x*(-p/i)+(p*v-m*_)/i,x=s):(y=(i=Rn(t)).x+(~g[0].indexOf("%")?y/100*i.width:y),x=i.y+(~(g[1]||g[0]).indexOf("%")?x/100*i.height:x)),n||!1!==n&&a.smooth?(a.xOffset=h+((_=y-u)*f+(v=x-l)*p)-_,a.yOffset=c+(_*d+v*m)-v):a.xOffset=a.yOffset=0,a.xOrigin=y,a.yOrigin=x,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!r,t.style[On]="0px 0px",o&&(Ln(o,a,"xOrigin",u,y),Ln(o,a,"yOrigin",l,x),Ln(o,a,"xOffset",h,a.xOffset),Ln(o,a,"yOffset",c,a.yOffset)),t.setAttribute("data-svg-origin",y+" "+x)}function Cr(t,e,r){var n=X(e);return D(parseFloat(e)+parseFloat(kn(t,"x",r+"px",n)))+n}function Sr(t,e){for(var r in e)t[r]=e[r];return t}var Er,Or,Pr,Mr,Ir,Rr,Fr,Dr,Lr,Nr,kr=function(t,e){this.id=te++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:Ae,this.set=e?e.getSetter:qr},Br=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ut(this,+t.duration,1,1),this.data=t.data,Nt||p.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,ut(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Ge(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Me(this,t),r._dp&&!r.parent&&S(r,this);r&&r.parent;)r.parent._time!==r._start+(0<=r._ts?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&P(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===j||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),v(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+w(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+w(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?A(this._tTime,r)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-j?0:this._rts;if(this._rts===t)return this;for(var e=this.parent&&this._ts?C(this.parent._time,this):this._tTime,t=(this._rts=+t||0,this._ts=this._ps||t===-j?0:this._rts,this.totalTime(ht(-this._delay,this._tDur,e),!0),Pe(this),this),r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},e.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ge(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==j&&(this._tTime-=j)))),this):this._ps},e.startTime=function(t){var e;return arguments.length?(this._start=t,!(e=this.parent||this._dp)||!e._sort&&this.parent||P(e,this,t-this._delay),this):this._start},e.endTime=function(t){return this._start+(L(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?C(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,r=arguments.length?t:e.rawTime();e;)r=e._start+r/(e._ts||1),e=e._dp;return r},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,E(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){var e;return arguments.length?(e=this._time,this._rDelay=t,E(this),e?this.time(e):this):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(l(this,t),L(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,L(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-j:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-j,this},e.isActive=function(){var t=this.parent||this._dp,e=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(t=t.rawTime(!0))>=e&&t<this.endTime(!0)-j))},e.eventCallback=function(t,e,r){var n=this.vars;return 1<arguments.length?(e?(n[t]=e,r&&(n[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(n){var i=this;return new Promise(function(e){function t(){var t=i.then;i.then=null,c(r)&&(r=r(i))&&(r.then||r===i)&&(i.then=t),e(r),i.then=t}var r=c(n)?n:y;i._initted&&1===i.totalProgress()&&0<=i._ts||!i._tTime&&i._ts<0?t():i._prom=t})},e.kill=function(){bt(this)},t}(),Y=(N(Br.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-j,_prom:0,_ps:!1,_rts:1}),function(n){function t(t,e){var r;return(r=n.call(this,t=void 0===t?{}:t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=L(t.sortChildren),B&&P(t.parent||B,O(r),e),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&it(O(r),t.scrollTrigger),r}o(t,n);var e=t.prototype;return e.to=function(t,e,r){return lt(0,arguments,this),this},e.from=function(t,e,r){return lt(1,arguments,this),this},e.fromTo=function(t,e,r,n){return lt(2,arguments,this),this},e.set=function(t,e,r){return e.duration=0,e.parent=this,rt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new q(t,e,l(this,r),1),this},e.call=function(t,e,r){return P(this,q.delayedCall(0,t,e),r)},e.staggerTo=function(t,e,r,n,i,o,s){return r.duration=e,r.stagger=r.stagger||n,r.onComplete=o,r.onCompleteParams=s,r.parent=this,new q(t,r,l(this,i)),this},e.staggerFrom=function(t,e,r,n,i,o,s){return r.runBackwards=1,rt(r).immediateRender=L(r.immediateRender),this.staggerTo(t,e,r,n,i,o,s)},e.staggerFromTo=function(t,e,r,n,i,o,s,a){return n.startAt=r,rt(n).immediateRender=L(n.immediateRender),this.staggerTo(t,e,n,i,o,s,a)},e.render=function(t,e,r){var n,i,o,s,a,u,l,h,c,f,d=this._time,p=this._dirty?this.totalDuration():this._tDur,m=this._dur,_=t<=0?0:F(t),v=this._zTime<0!=t<0&&(this._initted||!m);if((_=this!==B&&p<_&&0<=t?p:_)!==this._tTime||r||v){if(d!==this._time&&m&&(_+=this._time-d,t+=this._time-d),n=_,h=this._start,a=!(l=this._ts),v&&(m||(d=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(v=this._yoyo,s=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,r);if(n=F(_%s),_===p?(o=this._repeat,n=m):((o=~~(_/s))&&o===_/s&&(n=m,o--),m<n&&(n=m)),c=A(this._tTime,s),v&&1&o&&(n=m-n,f=1),o!==(c=!d&&this._tTime&&c!==o?o:c)&&!this._lock){var g=v&&1&c,v=g===(v&&1&o),d=(g=o<c?!g:g)?0:m;if(this._lock=1,this.render(d||(f?0:F(o*s)),e,!m)._lock=0,this._tTime=_,!e&&this.parent&&b(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),d&&d!==this._time||a!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,p=this._tDur,v&&(this._lock=2,this.render(d=g?m:-1e-4,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!a)return this;Ct(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,r){var n;if(e<r)for(n=t._first;n&&n._start<=r;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=r;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,F(d),F(n)))&&(_-=n-(n=u._start)),this._tTime=_,this._time=n,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,d=0),!d&&n&&!e&&(b(this,"onStart"),this._tTime!==_))return this;if(d<=n&&0<=t)for(y=this._first;y;){if(i=y._next,(y._act||n>=y._start)&&y._ts&&u!==y){if(y.parent!==this)return this.render(t,e,r);if(y.render(0<y._ts?(n-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(n-y._start)*y._ts,e,r),n!==this._time||!this._ts&&!a){u=0,i&&(_+=this._zTime=-j);break}}y=i}else for(var y=this._last,x=t<0?t:n;y;){if(i=y._prev,(y._act||x<=y._end)&&y._ts&&u!==y){if(y.parent!==this)return this.render(t,e,r);if(y.render(0<y._ts?(x-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(x-y._start)*y._ts,e,r),n!==this._time||!this._ts&&!a){u=0,i&&(_+=this._zTime=x?-j:j);break}}y=i}if(u&&!e&&(this.pause(),u.render(d<=n?0:-j)._zTime=d<=n?1:-1,this._ts))return this._start=h,Pe(this),this.render(t,e,r);this._onUpdate&&!e&&b(this,"onUpdate",!0),!(_===p&&this._tTime>=this.totalDuration()||!_&&d)||h!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||(!t&&m||!(_===p&&0<this._ts||!_&&this._ts<0)||k(this,1),e||t<0&&!d||!_&&!d&&p||(b(this,_===p&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom||_<p&&0<this.timeScale()||this._prom()))}return this},e.add=function(t,e){var r=this;if(M(e)||(e=l(this,e,t)),!(t instanceof Br)){if(R(t))return t.forEach(function(t){return r.add(t,e)}),this;if(G(t))return this.addLabel(t,e);if(!c(t))return this;t=q.delayedCall(0,t)}return this!==t?P(this,t,e):this},e.getChildren=function(t,e,r,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===n&&(n=-z);for(var i=[],o=this._first;o;)o._start>=n&&(o instanceof q?e&&i.push(o):(r&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,r)))),o=o._next;return i},e.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},e.remove=function(t){return G(t)?this.removeLabel(t):c(t)?this.killTweensOf(t):(Ee(this,t),t===this._recent&&(this._recent=this._last),Oe(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=F(p.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),n.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=l(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,r){e=q.delayedCall(0,e||_,r);return e.data="isPause",this._hasPause=1,P(this,e,l(this,t))},e.removePause=function(t){var e=this._first;for(t=l(this,t);e;)e._start===t&&"isPause"===e.data&&k(e),e=e._next},e.killTweensOf=function(t,e,r){for(var n=this.getTweensOf(t,r),i=n.length;i--;)Er!==n[i]&&n[i].kill(t,e);return this},e.getTweensOf=function(t,e){for(var r,n=[],i=H(t),o=this._first,s=M(e);o;)o instanceof q?function(t,e){for(var r=e.length,n=0;t.indexOf(e[n])<0&&++n<r;);return n<r}(o._targets,i)&&(s?(!Er||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&n.push(o):(r=o.getTweensOf(i,e)).length&&n.push.apply(n,r),o=o._next;return n},e.tweenTo=function(t,e){e=e||{};var r,n=this,i=l(n,t),t=e,o=t.startAt,s=t.onStart,a=t.onStartParams,t=t.immediateRender,u=q.to(n,N({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale())||j,onStart:function(){var t;n.pause(),r||(t=e.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale()),u._dur!==t&&ut(u,t,0,1).render(u._time,!0,!0),r=1),s&&s.apply(u,a||[])}},e));return t?u.render(0):u},e.tweenFromTo=function(t,e,r){return this.tweenTo(e,N({startAt:{time:l(this,t)}},r))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),xt(this,l(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),xt(this,l(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+j)},e.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var n,i=this._first,o=this.labels;i;)i._start>=r&&(i._start+=t,i._end+=t),i=i._next;if(e)for(n in o)o[n]>=r&&(o[n]+=t);return Oe(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return n.prototype.invalidate.call(this)},e.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Oe(this)},e.totalDuration=function(t){var e,r,n,i=0,o=this,s=o._last,a=z;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(n=o.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),a<(r=s._start)&&o._sort&&s._ts&&!o._lock?(o._lock=1,P(o,s,r-s._delay,1)._lock=0):a=r,r<0&&s._ts&&(i-=r,(!n&&!o._dp||n&&n.smoothChildTiming)&&(o._start+=r/o._ts,o._time-=r,o._tTime-=r),o.shiftChildren(-r,!1,-1/0),a=0),s._end>i&&s._ts&&(i=s._end),s=e;ut(o,o===B&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(t){if(B._ts&&(v(B,C(t,B)),Dt=p.frame),p.frame>=ye){ye+=U.autoSleep||120;var e=B._first;if((!e||!e._ts)&&U.autoSleep&&p._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||p.sleep()}}},t}(Br)),Ur=(N(Y.prototype,{_lock:0,_hasPause:0,_forcing:0}),function(t,e,r,n,i,o,s){var a,u,l,h,c,f=new K(this._pt,t,e,0,1,Je,null,i),d=0,p=0;for(f.b=r,f.e=n,r+="",(i=~(n+="").indexOf("random("))&&(n=Ne(n)),o&&(o(o=[r,n],t,e),r=o[0],n=o[1]),a=r.match(le)||[];h=le.exec(n);)l=h[0],h=n.substring(d,h.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),l!==a[p++]&&(c=parseFloat(a[p-1])||0,f._pt={_next:f._pt,p:h||1===p?h:",",s:c,c:"="===l.charAt(1)?Ce(c,l)-c:parseFloat(l)-c,m:u&&u<4?Math.round:0},d=le.lastIndex);return f.c=d<n.length?n.substring(d,n.length):"",f.fp=s,(he.test(n)||i)&&(f.e=0),this._pt=f}),zr=function(t,e,r,n,i){if(c(t)&&(t=$e(t,i,e,r,n)),!I(t)||t.style&&t.nodeType||R(t)||oe(t))return G(t)?$e(t,i,e,r,n):t;var o,s={};for(o in t)s[o]=$e(t[o],i,e,r,n);return s},jr=function t(e,r){var n,i,o,s,a,u,l,h,c,f,d,p,m,_=e.vars,v=_.ease,g=_.startAt,y=_.immediateRender,x=_.lazy,b=_.onUpdate,T=_.onUpdateParams,w=_.callbackScope,A=_.runBackwards,C=_.yoyoEase,S=_.keyframes,E=_.autoRevert,O=e._dur,P=e._startAt,M=e._targets,I=e.parent,R=I&&"nested"===I.data?I.parent._targets:M,F="auto"===e._overwrite&&!Mt,D=e.timeline;if(e._ease=Ye(v=!D||S&&v?v:"none",Qt.ease),e._yEase=C?We(Ye(!0===C?v:C,Qt.ease)):0,C&&e._yoyo&&!e._repeat&&(C=e._yEase,e._yEase=e._ease,e._ease=C),e._from=!D&&!!_.runBackwards,!D||S&&!_.stagger){if(p=(h=M[0]?we(M[0]).harness:0)&&_[h.prop],n=et(_,me),P&&(k(P.render(-1,!0)),P._lazy=0),g)if(k(e._startAt=q.set(M,N({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:L(x),startAt:null,delay:0,onUpdate:b,onUpdateParams:T,callbackScope:w,stagger:0},g))),r<0&&!y&&!E&&e._startAt.render(-1,!0),y){if(0<r&&!E&&(e._startAt=0),O&&r<=0)return void(r&&(e._zTime=r))}else!1===E&&(e._startAt=0);else if(A&&O)if(P)E||(e._startAt=0);else if(o=N({overwrite:!1,data:"isFromStart",lazy:(y=r?!1:y)&&L(x),immediateRender:y,stagger:0,parent:I},n),p&&(o[h.prop]=p),k(e._startAt=q.set(M,o)),r<0&&e._startAt.render(-1,!0),e._zTime=r,y){if(!r)return}else t(e._startAt,j);for(e._pt=e._ptCache=0,x=O&&L(x)||x&&!O,i=0;i<M.length;i++){if(l=(a=M[i])._gsap||Te(M)[i]._gsap,e._ptLookup[i]=f={},ve[l.id]&&_e.length&&Se(),d=R===M?i:R.indexOf(a),h&&!1!==(c=new h).init(a,p||n,e,d,R)&&(e._pt=s=new K(e._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach(function(t){f[t]=s}),c.priority&&(u=1)),!h||p)for(o in n)V[o]&&(c=Qe(o,n,e,d,a,R))?c.priority&&(u=1):f[o]=s=Ze.call(e,a,o,"get",n[o],d,R,0,_.stringFilter);e._op&&e._op[i]&&e.kill(a,e._op[i]),F&&e._pt&&(Er=e,B.killTweensOf(a,f,e.globalTime(r)),m=!e.parent,Er=0),e._pt&&x&&(ve[l.id]=1)}u&&Qr(e),e._onInit&&e._onInit(e)}e._onUpdate=b,e._initted=(!e._op||e._pt)&&!m,S&&r<=0&&D.render(z,!0,!0)},Gr=be+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Vr={},q=(d(Gr+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return Vr[t]=1}),function(E){function i(t,e,r,n){"number"==typeof e&&(r.duration=e,e=r,r=null);var i,o,s,a,u,l,h,c,f,n=(i=E.call(this,n?e:rt(e))||this).vars,d=n.duration,p=n.delay,m=n.immediateRender,_=n.stagger,v=n.overwrite,g=n.keyframes,y=n.defaults,x=n.scrollTrigger,b=n.yoyoEase,n=e.parent||B,T=(R(t)||oe(t)?M(t[0]):"length"in e)?[t]:H(t);if(i._targets=T.length?Te(T):J("GSAP target "+t+" not found. https://greensock.com",!U.nullTargetWarn)||[],i._ptLookup=[],i._overwrite=v,g||_||$(d)||$(p)){if(e=i.vars,(o=i.timeline=new Y({data:"nested",defaults:y||{}})).kill(),o.parent=o._dp=O(i),o._start=0,_||$(d)||$(p)){if(u=T.length,c=_&&ct(_),I(_))for(l in _)~Gr.indexOf(l)&&((f=f||{})[l]=_[l]);for(s=0;s<u;s++)(a=et(e,Vr)).stagger=0,b&&(a.yoyoEase=b),f&&tt(a,f),h=T[s],a.duration=+$e(d,O(i),s,h,T),a.delay=(+$e(p,O(i),s,h,T)||0)-i._delay,!_&&1===u&&a.delay&&(i._delay=p=a.delay,i._start+=p,a.delay=0),o.to(h,a,c?c(s,h,T):0),o._ease=W.none;o.duration()?d=p=0:i.timeline=0}else if(g){rt(N(o.vars.defaults,{ease:"none"})),o._ease=Ye(g.ease||e.ease||"none");var w,A,C,S=0;if(R(g))g.forEach(function(t){return o.to(T,t,">")});else{for(l in a={},g)"ease"!==l&&"easeEach"!==l&&function(t,r,e,n){var i,o,s=r.ease||n||"power1.inOut";if(R(r))o=e[t]||(e[t]=[]),r.forEach(function(t,e){return o.push({t:e/(r.length-1)*100,v:t,e:s})});else for(i in r)o=e[i]||(e[i]=[]),"ease"!==i&&o.push({t:parseFloat(t),v:r[i],e:s})}(l,g[l],a,g.easeEach);for(l in a)for(w=a[l].sort(function(t,e){return t.t-e.t}),s=S=0;s<w.length;s++)(C={ease:(A=w[s]).e,duration:(A.t-(s?w[s-1].t:0))/100*d})[l]=A.v,o.to(T,C,S),S+=C.duration;o.duration()<d&&o.to({},{duration:d-o.duration()})}}d||i.duration(d=o.duration())}else i.timeline=0;return!0!==v||Mt||(Er=O(i),B.killTweensOf(T),Er=0),P(n,O(i),r),e.reversed&&i.reverse(),e.paused&&i.paused(!0),(m||!d&&!g&&i._start===F(n._time)&&L(m)&&nt(O(i))&&"nested"!==n.data)&&(i._tTime=-j,i.render(Math.max(0,-p))),x&&it(O(i),x),i}o(i,E);var t=i.prototype;return t.render=function(t,e,r){var n,i,o=this._time,s=this._tDur,a=this._dur,u=s-j<t&&0<=t?s:t<j?0:t;if(a){if(u!==this._tTime||!t||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(m=u,p=this.timeline,this._repeat){if(c=a+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*c+t,e,r);if(m=F(u%c),u===s?(v=this._repeat,m=a):((v=~~(u/c))&&v===u/c&&(m=a,v--),a<m&&(m=a)),(d=this._yoyo&&1&v)&&(f=this._yEase,m=a-m),g=A(this._tTime,c),m===o&&!r&&this._initted)return this._tTime=u,this;v!==g&&(p&&this._yEase&&Ct(p,d),!this.vars.repeatRefresh||d||this._lock||(this._lock=r=1,this.render(F(c*v),!0).invalidate()._lock=0))}if(!this._initted){if(ot(this,t<0?t:m,r,e))return this._tTime=0,this;if(o!==this._time)return this;if(a!==this._dur)return this.render(t,e,r)}if(this._tTime=u,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=i=(f||this._ease)(m/a),this._from&&(this.ratio=i=1-i),m&&!o&&!e&&(b(this,"onStart"),this._tTime!==u))return this;for(n=this._pt;n;)n.r(i,n.d),n=n._next;p&&p.render(t<0?t:!m&&d?-j:p._dur*p._ease(m/this._dur),e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,r),b(this,"onUpdate")),this._repeat&&v!==g&&this.vars.onRepeat&&!e&&this.parent&&b(this,"onRepeat"),u!==this._tDur&&u||this._tTime!==u||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),!t&&a||!(u===this._tDur&&0<this._ts||!u&&this._ts<0)||k(this,1),e||t<0&&!o||!u&&!o||(b(this,u===s?"onComplete":"onReverseComplete",!0),!this._prom||u<s&&0<this.timeScale()||this._prom()))}}else{var l,h,c=this,f=t,d=e,p=r,m=c.ratio,_=f<0||!f&&(!c._start&&st(c)&&(c._initted||!at(c))||(c._ts<0||c._dp._ts<0)&&!at(c))?0:1,v=c._rDelay,g=0;if(v&&c._repeat&&(g=ht(0,c._tDur,f),h=A(g,v),c._yoyo&&1&h&&(_=1-_),h!==A(c._tTime,v)&&(m=1-_,c.vars.repeatRefresh&&c._initted&&c.invalidate())),_!==m||p||c._zTime===j||!f&&c._zTime){if(c._initted||!ot(c,f,p,d)){for(h=c._zTime,c._zTime=f||(d?j:0),d=d||f&&!h,c.ratio=_,c._from&&(_=1-_),c._time=0,c._tTime=g,l=c._pt;l;)l.r(_,l.d),l=l._next;c._startAt&&f<0&&c._startAt.render(f,!0,!0),c._onUpdate&&!d&&b(c,"onUpdate"),g&&c._repeat&&!d&&c.parent&&b(c,"onRepeat"),(f>=c._tDur||f<0)&&c.ratio===_&&(_&&k(c,1),d||(b(c,_?"onComplete":"onReverseComplete",!0),c._prom&&c._prom()))}}else c._zTime||(c._zTime=f)}return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),E.prototype.invalidate.call(this)},t.resetTo=function(t,e,r,n){Nt||p.wake(),this._ts||this.play();var i,o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||jr(this,o),i=this._ease(o/this._dur),function(t,e,r,n,i,o,s){var a,u,l,h=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!h)for(h=t._ptCache[e]=[],u=t._ptLookup,l=t._targets.length;l--;){if((a=u[l][e])&&a.d&&a.d._pt)for(a=a.d._pt;a&&a.p!==e;)a=a._next;if(!a)return Or=1,t.vars[e]="+=0",jr(t,s),Or=0,1;h.push(a)}for(l=h.length;l--;)(a=h[l]).s=!n&&0!==n||i?a.s+(n||0)+o*a.c:n,a.c=r-a.s,a.e&&(a.e=D(r)+X(a.e)),a.b&&(a.b=a.s+X(a.b))}(this,t,e,r,n,i,o)?this.resetTo(t,e,r,n):(Me(this,0),this.parent||T(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?bt(this):this;if(this.timeline)return f=this.timeline.totalDuration(),this.timeline.killTweensOf(t,e,Er&&!0!==Er.vars.overwrite)._first||bt(this),this.parent&&f!==this.timeline.totalDuration()&&ut(this,this._dur*this.timeline._tDur/f,0,1),this;var r,n,i,o,s,a,u,l=this._targets,h=t?H(t):l,c=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,n=r===e.length;n&&r--&&t[r]===e[r];);return r<0}(l,h))return"all"===e&&(this._pt=0),bt(this);for(r=this._op=this._op||[],"all"!==e&&(G(e)&&(s={},d(e,function(t){return s[t]=1}),e=s),e=function(t,e){var r,n,i,o,t=t[0]?we(t[0]).harness:0,s=t&&t.aliases;if(!s)return e;for(n in r=tt({},e),s)if(n in r)for(i=(o=s[n].split(",")).length;i--;)r[o[i]]=r[n];return r}(l,e)),u=l.length;u--;)if(~h.indexOf(l[u]))for(s in n=c[u],"all"===e?(r[u]=e,o=n,i={}):(i=r[u]=r[u]||{},o=e),o)(a=n&&n[s])&&("kill"in a.d&&!0!==a.d.kill(s)||Ee(this,a,"_pt"),delete n[s]),"all"!==i&&(i[s]=1);return this._initted&&!this._pt&&f&&bt(this),this},i.to=function(t,e){return new i(t,e,arguments[2])},i.from=function(t,e){return lt(1,arguments)},i.delayedCall=function(t,e,r,n){return new i(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:n})},i.fromTo=function(t,e,r){return lt(2,arguments)},i.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new i(t,e)},i.killTweensOf=function(t,e,r){return B.killTweensOf(t,e,r)},i}(Br)),Xr=(N(q.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),d("staggerTo,staggerFrom,staggerFromTo",function(r){q[r]=function(){var t=new Y,e=Fe.call(arguments,0);return e.splice("staggerFromTo"===r?5:4,0,0),t[r].apply(t,e)}}),function(t,e,r){return t[e]=r}),Hr=function(t,e,r){return t[e](r)},Wr=function(t,e,r,n){return t[e](n.fp,r)},Yr=function(t,e,r){return t.setAttribute(e,r)},qr=function(t,e){return c(t[e])?Hr:ie(t[e])&&t.setAttribute?Yr:Xr},Kr=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Zr=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Qr=function(t){for(var e,r,n,i,o=t._pt;o;){for(e=o._next,r=n;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:i)?o._prev._next=o:n=o,(o._next=r)?r._prev=o:i=o,o=e}t._pt=n},K=function(){function t(t,e,r,n,i,o,s,a,u){this.t=e,this.s=n,this.c=i,this.p=r,this.r=o||Kr,this.d=s||this,this.set=a||Xr,this.pr=u||0,(this._next=t)&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=nr,this.m=t,this.mt=r,this.tween=e},t}(),$r=(d(be+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return me[t]=1}),a.TweenMax=a.TweenLite=q,a.TimelineLite=a.TimelineMax=Y,B=new Y({sortChildren:!1,defaults:Qt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),U.stringFilter=At,{registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(t){var e=(t=!t.name&&t.default||t).name,r=c(t),r=e&&!r&&t.init?function(){this._props=[]}:t,n={init:_,render:tr,add:Ze,kill:rr,modifier:er,rawVars:0},i={targetTest:0,get:0,getSetter:qr,aliases:{},register:0};if(Ge(),t!==r){if(V[e])return;N(r,N(et(t,n),i)),tt(r.prototype,tt(n,et(t,i))),V[r.prop=e]=r,t.targetTest&&(xe.push(r),me[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}m(e,r),t.register&&t.register(h,r,K)})},timeline:function(t){return new Y(t)},getTweensOf:function(t,e){return B.getTweensOf(t,e)},getProperty:function(n,t,e,r){G(n)&&(n=H(n)[0]);var i=we(n||{}).get,o=e?y:g;return"native"===e&&(e=""),n&&(t?o((V[t]&&V[t].get||i)(n,t,e,r)):function(t,e,r){return o((V[t]&&V[t].get||i)(n,t,e,r))})},quickSetter:function(r,e,n){var i,o;if(1<(r=H(r)).length)return i=r.map(function(t){return h.quickSetter(t,e,n)}),o=i.length,function(t){for(var e=o;e--;)i[e](t)};r=r[0]||{};var s=V[e],a=we(r),u=a.harness&&(a.harness.aliases||{})[e]||e,l=s?function(t){var e=new s;Lt._pt=0,e.init(r,n?t+n:t,Lt,0,[r]),e.render(1,e),Lt._pt&&tr(1,Lt)}:a.set(r,u);return s?l:function(t){return l(r,u,n?t+n:t,a,1)}},quickTo:function(t,n,e){function r(t,e,r){return i.resetTo(n,t,e,r)}var i=h.to(t,tt(((t={})[n]="+=0.1",t.paused=!0,t),e||{}));return r.tween=i,r},isTweening:function(t){return 0<B.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Ye(t.ease,Qt.ease)),x(Qt,t||{})},config:function(t){return x(U,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,e=t.plugins,o=t.defaults,t=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!V[t]&&!a[t]&&J(n+" effect requires "+t+" plugin.")}),ge[n]=function(t,e,r){return i(H(t),N(e||{},o),r)},t&&(Y.prototype[n]=function(t,e,r){return this.add(ge[n](t,I(e)?e:(r=e)&&{},this),r)})},registerEase:function(t,e){W[t]=Ye(e)},parseEase:function(t,e){return arguments.length?Ye(t,e):W},getById:function(t){return B.getById(t)},exportRoot:function(t,e){var r,n,i=new Y(t=void 0===t?{}:t);for(i.smoothChildTiming=L(t.smoothChildTiming),B.remove(i),i._dp=0,i._time=i._tTime=B._time,r=B._first;r;)n=r._next,!e&&!r._dur&&r instanceof q&&r.vars.onComplete===r._targets[0]||P(i,r,r._start-r._delay),r=n;return P(B,i,0),i},utils:{wrap:_t,wrapYoyo:vt,distribute:ct,random:pt,snap:dt,normalize:function(t,e,r){return gt(t,e,0,1,r)},getUnit:X,clamp:function(e,r,t){return Re(t,function(t){return ht(e,r,t)})},splitColor:Be,toArray:H,selector:function(r){return r=H(r)[0]||J("Invalid scope")||{},function(t){var e=r.current||r.nativeElement||r;return H(t,e.querySelectorAll?e:e===r?J("Invalid scope")||Rt.createElement("div"):r)}},mapRange:gt,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,r){return function(t){return e(parseFloat(t))+(r||X(t))}},interpolate:yt,shuffle:Le},install:u,effects:ge,ticker:p,updateRoot:Y.updateRoot,plugins:V,globalTimeline:B,core:{PropTween:K,globals:m,Tween:q,Timeline:Y,Animation:Br,getCache:we,_removeLinkedListItem:Ee,suppressOverwrites:function(t){return Mt=t}}}),Jr=(d("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return $r[t]=q[t]}),p.add(Y.updateRoot),Lt=$r.to({},{duration:0}),function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r}),h=$r.registerPlugin({name:"attr",init:function(t,e,r,n,i){var o,s;for(o in e)(s=this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],n,i,0,0,o))&&(s.op=o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r])}},ir("roundProps",ft),ir("modifiers"),ir("snap",dt))||$r,tn=(q.version=Y.version=h.version="3.10.4",Ft=1,i()&&Ge(),W.Power0),en=W.Power1,rn=W.Power2,nn=W.Power3,on=W.Power4,sn=W.Linear,an=W.Quad,un=W.Cubic,ln=W.Quart,hn=W.Quint,cn=W.Strong,fn=W.Elastic,dn=W.Back,pn=W.SteppedEase,mn=W.Bounce,_n=W.Sine,vn=W.Expo,gn=W.Circ,yn=function(){return"undefined"!=typeof window},xn={},bn=180/Math.PI,Tn=Math.PI/180,wn=Math.atan2,An=/([A-Z])/g,Cn=/(left|right|width|margin|padding|x)/i,Sn=/[\s,\(]\S/,En={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Z="transform",On=Z+"Origin",Pn=function(t,e){e=Mr.createElementNS?Mr.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Mr.createElement(t);return e.style?e:Mr.createElement(t)},Q=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(An,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,In(r)||r,1)||""},Mn="O,Moz,ms,Ms,Webkit".split(","),In=function(t,e,r){var n=(e||Fr).style,i=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(Mn[i]+t in n););return i<0?null:(3===i?"ms":0<=i?Mn[i]:"")+t},Rn=function(e){var r;try{r=e.getBBox()}catch(t){r=gr.call(e,!0)}return!(r=r&&(r.width||r.height)||e.getBBox===gr?r:gr.call(e,!0))||r.width||r.x||r.y?r:{x:+yr(e,["x","cx","x1"])||0,y:+yr(e,["y","cy","y1"])||0,width:0,height:0}},Fn=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Rn(t))},Dn=function(t,e){e&&(t=t.style,e in xn&&e!==On&&(e=Z),t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(An,"-$1").toLowerCase())):t.removeAttribute(e))},Ln=function(t,e,r,n,i,o){e=new K(t._pt,e,r,0,1,o?hr:lr);return(t._pt=e).b=n,e.e=i,t._props.push(r),e},Nn={deg:1,rad:1,turn:1},kn=function t(e,r,n,i){var o,s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",u=Fr.style,l=Cn.test(r),h="svg"===e.tagName.toLowerCase(),c=(h?"client":"offset")+(l?"Width":"Height"),f="px"===i,d="%"===i;return i===a||!s||Nn[i]||Nn[a]?s:("px"===a||f||(s=t(e,r,n,"px")),n=e.getCTM&&Fn(e),!d&&"%"!==a||!xn[r]&&!~r.indexOf("adius")?(u[l?"width":"height"]=100+(f?a:i),r=~r.indexOf("adius")||"em"===i&&e.appendChild&&!h?e:e.parentNode,(i=(r=(r=n?(e.ownerSVGElement||{}).parentNode:r)&&r!==Mr&&r.appendChild?r:Mr.body)._gsap)&&d&&i.width&&l&&i.time===p.time?D(s/i.width*100):(!d&&"%"!==a||(u.position=Q(e,"position")),r===e&&(u.position="static"),r.appendChild(Fr),o=Fr[c],r.removeChild(Fr),u.position="absolute",l&&d&&((i=we(r)).time=p.time,i.width=r[c]),D(f?o*s/100:o&&s?100/o*s:0))):(o=n?e.getBBox()[l?"width":"height"]:e[c],D(d?s/o*100:s/100*o)))},Bn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Un={clearProps:function(t,e,r,n,i){if("isFromStart"!==i.data)return(e=t._pt=new K(t._pt,e,r,0,0,Tr)).u=n,e.pr=-10,e.tween=i,t._props.push(r),1}},zn=[1,0,0,1,0,0],jn={},Gn=function(t){t=Q(t,Z);return wr(t)?zn:t.substr(7).match(ae).map(D)},Vn=function(t,e){var r,n,i,o=t._gsap||we(t),s=t.style,a=Gn(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(a=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?zn:a:(a!==zn||t.offsetParent||t===Ir||o.svg||(n=s.display,s.display="block",(o=t.parentNode)&&t.offsetParent||(i=1,r=t.nextSibling,Ir.appendChild(t)),a=Gn(t),n?s.display=n:Dn(t,"display"),i&&(r?o.insertBefore(t,r):o?o.appendChild(t):Ir.removeChild(t))),e&&6<a.length?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},Xn=function(t,e){var r=t._gsap||new kr(t);if("x"in r&&!e&&!r.uncache)return r;var n,i,o,s,a,u,l,h,c,f,d,p,m,_,v,g,y,x,b,T,w,A,C,S,E,O,P=t.style,M=r.scaleX<0,I=Q(t,On)||"0",R=n=i=s=a=u=l=h=0,F=o=1;return r.svg=!(!t.getCTM||!Fn(t)),c=Vn(t,r.svg),r.svg&&(x=(!r.uncache||"0px 0px"===I)&&!e&&t.getAttribute("data-svg-origin"),Ar(t,x||I,!!x||r.originIsAbsolute,!1!==r.smooth,c)),O=r.xOrigin||0,S=r.yOrigin||0,c!==zn&&(p=c[0],m=c[1],_=c[2],v=c[3],R=g=c[4],n=y=c[5],6===c.length?(F=Math.sqrt(p*p+m*m),o=Math.sqrt(v*v+_*_),s=p||m?wn(m,p)*bn:0,(l=_||v?wn(_,v)*bn+s:0)&&(o*=Math.abs(Math.cos(l*Tn))),r.svg&&(R-=O-(O*p+S*_),n-=S-(O*m+S*v))):(O=c[6],S=c[7],w=c[8],A=c[9],C=c[10],E=c[11],R=c[12],n=c[13],i=c[14],a=(c=wn(O,C))*bn,c&&(x=g*(f=Math.cos(-c))+w*(d=Math.sin(-c)),b=y*f+A*d,T=O*f+C*d,w=g*-d+w*f,A=y*-d+A*f,C=O*-d+C*f,E=S*-d+E*f,g=x,y=b,O=T),u=(c=wn(-_,C))*bn,c&&(f=Math.cos(-c),E=v*(d=Math.sin(-c))+E*f,p=x=p*f-w*d,m=b=m*f-A*d,_=T=_*f-C*d),s=(c=wn(m,p))*bn,c&&(x=p*(f=Math.cos(c))+m*(d=Math.sin(c)),b=g*f+y*d,m=m*f-p*d,y=y*f-g*d,p=x,g=b),a&&359.9<Math.abs(a)+Math.abs(s)&&(a=s=0,u=180-u),F=D(Math.sqrt(p*p+m*m+_*_)),o=D(Math.sqrt(y*y+O*O)),c=wn(g,y),l=2e-4<Math.abs(c)?c*bn:0,h=E?1/(E<0?-E:E):0),r.svg&&(x=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!wr(Q(t,Z)),x&&t.setAttribute("transform",x))),90<Math.abs(l)&&Math.abs(l)<270&&(M?(F*=-1,l+=s<=0?180:-180,s+=s<=0?180:-180):(o*=-1,l+=l<=0?180:-180)),e=e||r.uncache,r.x=R-((r.xPercent=R&&(!e&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-R)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+"px",r.y=n-((r.yPercent=n&&(!e&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+"px",r.z=i+"px",r.scaleX=D(F),r.scaleY=D(o),r.rotation=D(s)+"deg",r.rotationX=D(a)+"deg",r.rotationY=D(u)+"deg",r.skewX=l+"deg",r.skewY="0deg",r.transformPerspective=h+"px",(r.zOrigin=parseFloat(I.split(" ")[2])||0)&&(P[On]=Hn(I)),r.xOffset=r.yOffset=0,r.force3D=U.force3D,r.renderTransform=r.svg?Kn:Lr?qn:Wn,r.uncache=0,r},Hn=function(t){return(t=t.split(" "))[0]+" "+t[1]},Wn=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,qn(t,e)},Yn="0deg",qn=function(t,e){var r,n,i,e=e||this,o=e.xPercent,s=e.yPercent,a=e.x,u=e.y,l=e.z,h=e.rotation,c=e.rotationY,f=e.rotationX,d=e.skewX,p=e.skewY,m=e.scaleX,_=e.scaleY,v=e.transformPerspective,g=e.force3D,y=e.target,e=e.zOrigin,x="",t="auto"===g&&t&&1!==t||!0===g;!e||f===Yn&&c===Yn||(g=parseFloat(c)*Tn,r=Math.sin(g),n=Math.cos(g),g=parseFloat(f)*Tn,i=Math.cos(g),a=Cr(y,a,r*i*-e),u=Cr(y,u,-Math.sin(g)*-e),l=Cr(y,l,n*i*-e+e)),"0px"!==v&&(x+="perspective("+v+") "),(o||s)&&(x+="translate("+o+"%, "+s+"%) "),!t&&"0px"===a&&"0px"===u&&"0px"===l||(x+="0px"!==l||t?"translate3d("+a+", "+u+", "+l+") ":"translate("+a+", "+u+") "),h!==Yn&&(x+="rotate("+h+") "),c!==Yn&&(x+="rotateY("+c+") "),f!==Yn&&(x+="rotateX("+f+") "),d===Yn&&p===Yn||(x+="skew("+d+", "+p+") "),1===m&&1===_||(x+="scale("+m+", "+_+") "),y.style[Z]=x||"translate(0, 0)"},Kn=function(t,e){var r,n,i,o,s,e=e||this,a=e.xPercent,u=e.yPercent,l=e.x,h=e.y,c=e.rotation,f=e.skewX,d=e.skewY,p=e.scaleX,m=e.scaleY,_=e.target,v=e.xOrigin,g=e.yOrigin,y=e.xOffset,x=e.yOffset,e=e.forceCSS,b=parseFloat(l),T=parseFloat(h),c=parseFloat(c),f=parseFloat(f);(d=parseFloat(d))&&(f+=d=parseFloat(d),c+=d),c||f?(c*=Tn,f*=Tn,r=Math.cos(c)*p,n=Math.sin(c)*p,i=Math.sin(c-f)*-m,o=Math.cos(c-f)*m,f&&(d*=Tn,s=Math.tan(f-d),i*=s=Math.sqrt(1+s*s),o*=s,d&&(s=Math.tan(d),r*=s=Math.sqrt(1+s*s),n*=s)),r=D(r),n=D(n),i=D(i),o=D(o)):(r=p,o=m,n=i=0),(b&&!~(l+"").indexOf("px")||T&&!~(h+"").indexOf("px"))&&(b=kn(_,"x",l,"px"),T=kn(_,"y",h,"px")),(v||g||y||x)&&(b=D(b+v-(v*r+g*i)+y),T=D(T+g-(v*n+g*o)+x)),(a||u)&&(s=_.getBBox(),b=D(b+a/100*s.width),T=D(T+u/100*s.height)),_.setAttribute("transform",s="matrix("+r+","+n+","+i+","+o+","+b+","+T+")"),e&&(_.style[Z]=s)},Zn=(d("padding,margin,Width,Radius",function(e,r){var t="Bottom",a=(r<3?["Top","Right",t,"Left"]:["TopLeft","TopRight",t+"Right",t+"Left"]).map(function(t){return r<2?e+t:"border"+t+e});Un[1<r?"border"+e:e]=function(e,t,r,n,i){var o,s;if(arguments.length<4)return o=a.map(function(t){return xr(e,t,r)}),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(n+"").split(" "),s={},a.forEach(function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]}),e.init(t,s,i)}}),{name:"css",register:vr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var o,s,a,u,l,h,c,f,d,N,p,m,k,_,v,g,y,x,b,T=this._props,w=t.style,A=r.vars.startAt;for(l in Rr||vr(),e)if("autoRound"!==l&&(s=e[l],!V[l]||!Qe(l,e,r,n,t,i)))if(f=typeof s,u=Un[l],"string"===(f="function"===f?typeof(s=s.call(r,n,t,i)):f)&&~s.indexOf("random(")&&(s=Ne(s)),u)u(this,t,l,s,r)&&(k=1);else if("--"===l.substr(0,2))o=(getComputedStyle(t).getPropertyValue(l)+"").trim(),s+="",ze.lastIndex=0,ze.test(o)||(h=X(o),c=X(s)),c?h!==c&&(o=kn(t,l,o,c)+c):h&&(s+=h),this.add(w,"setProperty",o,s,n,i,0,0,l),T.push(l);else if("undefined"!==f){if(A&&l in A?(o="function"==typeof A[l]?A[l].call(r,n,t,i):A[l],G(o)&&~o.indexOf("random(")&&(o=Ne(o)),X(o+"")||(o+=U.units[l]||X(xr(t,l))||""),"="===(o+"").charAt(1)&&(o=xr(t,l))):o=xr(t,l),u=parseFloat(o),(f="string"===f&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),a=parseFloat(s),l in En&&("autoAlpha"===l&&(1===u&&"hidden"===xr(t,"visibility")&&a&&(u=0),Ln(this,w,"visibility",u?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==l&&"transform"!==l&&~(l=En[l]).indexOf(",")&&(l=l.split(",")[0])),d=l in xn)if(N||((p=t._gsap).renderTransform&&!e.parseTransform||Xn(t,e.parseTransform),m=!1!==e.smoothOrigin&&p.smooth,(N=this._pt=new K(this._pt,w,Z,0,1,p.renderTransform,p,0,-1)).dep=1),"scale"===l)this._pt=new K(this._pt,p,"scaleY",p.scaleY,(f?Ce(p.scaleY,f+a):a)-p.scaleY||0),T.push("scaleY",l),l+="X";else{if("transformOrigin"===l){b=x=y=void 0,y=(g=s).split(" "),x=y[0],b=y[1]||"50%","top"!==x&&"bottom"!==x&&"left"!==b&&"right"!==b||(g=x,x=b,b=g),y[0]=Bn[x]||x,y[1]=Bn[b]||b,s=y.join(" "),p.svg?Ar(t,s,0,m,0,this):((c=parseFloat(s.split(" ")[2])||0)!==p.zOrigin&&Ln(this,p,"zOrigin",p.zOrigin,c),Ln(this,w,l,Hn(o),Hn(s)));continue}if("svgOrigin"===l){Ar(t,s,1,m,0,this);continue}if(l in jn){g=this,x=p,b=l,y=u,_=f?Ce(u,f+s):s,v=R=L=void 0,L=G(_),R=parseFloat(_)*(L&&~_.indexOf("rad")?bn:1)-y,v=y+R+"deg",L&&("short"===(L=_.split("_")[1])&&(R%=360)!==R%180&&(R+=R<0?360:-360),"cw"===L&&R<0?R=(R+36e9)%360-360*~~(R/360):"ccw"===L&&0<R&&(R=(R-36e9)%360-360*~~(R/360))),g._pt=_=new K(g._pt,x,b,y,R,sr),_.e=v,_.u="deg",g._props.push(b);continue}if("smoothOrigin"===l){Ln(this,p,"smooth",p.smooth,s);continue}if("force3D"===l){p[l]=s;continue}if("transform"===l){M=P=O=P=E=S=C=L=D=void 0;var C,S,E,O,P,M,I=this,R=s,F=t,D=Sr({},F._gsap),L=F.style;for(S in D.svg?(E=F.getAttribute("transform"),F.setAttribute("transform",""),L[Z]=R,C=Xn(F,1),Dn(F,Z),F.setAttribute("transform",E)):(E=getComputedStyle(F)[Z],L[Z]=R,C=Xn(F,1),L[Z]=E),xn)(E=D[S])!==(P=C[S])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(S)<0&&(O=X(E)!==(M=X(P))?kn(F,S,E,M):parseFloat(E),P=parseFloat(P),I._pt=new K(I._pt,C,S,O,P-O,or),I._pt.u=M||0,I._props.push(S));Sr(C,D);continue}}else l in w||(l=In(l)||l);if(d||(a||0===a)&&(u||0===u)&&!Sn.test(s)&&l in w)a=a||0,(h=(o+"").substr((u+"").length))!==(c=X(s)||(l in U.units?U.units[l]:h))&&(u=kn(t,l,o,c)),this._pt=new K(this._pt,d?p:w,l,u,(f?Ce(u,f+a):a)-u,d||"px"!==c&&"zIndex"!==l||!1===e.autoRound?or:ur),this._pt.u=c||0,h!==c&&"%"!==c&&(this._pt.b=o,this._pt.r=ar);else if(l in w)br.call(this,t,l,o,f?f+s:s);else{if(!(l in t)){pe(l,s);continue}this.add(t,l,o||t[l],f?f+s:s,n,i)}T.push(l)}k&&Qr(this)},get:xr,aliases:En,getSetter:function(t,e,r){var n=En[e];return(e=n&&n.indexOf(",")<0?n:e)in xn&&e!==On&&(t._gsap.x||xr(t,"x"))?r&&Dr===r?"scale"===e?pr:dr:(Dr=r||{})&&("scale"===e?mr:_r):t.style&&!ie(t.style[e])?cr:~e.indexOf("-")?fr:qr(t,e)},core:{_removeProperty:Dn,_getMatrix:Vn}}),Qn=(h.utils.checkPrefix=In,Nr=d((e="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(t="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){xn[t]=1}),d(t,function(t){U.units[t]="deg",jn[t]=1}),En[Nr[13]]=e+","+t,d("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){t=t.split(":");En[t[1]]=Nr[t[0]]}),d("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){U.units[t]="px"}),h.registerPlugin(Zn),h.registerPlugin(Zn)||h),$n=Qn.core.Tween}],o={},i.m=n,i.c=o,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6);function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,o});